(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"/UyG":function(e,t){e.exports='<div class="fimb-question-container fimb-attempt-authoring" bb-first-time-container>\n  <div class="fimb-question">\n    <bb-rich-text-editor\n      ng-model="assessmentQuestion.viewHelper.questionText"\n      plugin-options="editorPluginOptions"\n      supports-inline-document-render="true"\n      is-read-only="true">\n    </bb-rich-text-editor>\n  </div>\n  <ul class="fimb-answers-container">\n    <li class="fimb-answer" ng-repeat="blankIdentifier in assessmentQuestion.viewHelper.orderedIdentifiers track by $index">\n      <bb-guidance ng-if="::assessmentQuestion.shouldShowFIMBFTUEOnAnswer($index)"\n                   component-key="components.features.course.content.assessment.ftue.fimb-question.attempt"\n                   class="guidance-element-overlay">\n        <span bb-translate>components.directives.assessment-question.fimb.attempt-authoring.ftue</span>\n      </bb-guidance>\n      <div ng-if="::assessmentQuestion.shouldShowFIMBFTUEOnAnswer($index)"\n           class="answer-guidance-container"\n           bb-guidance-target\n           component-key="components.features.course.content.assessment.ftue.fimb-question.attempt">\n      </div>\n      <label class="fimb-answer-label"\n             for="{{assessmentQuestion.elementId}}-fimb-answers-{{$index}}">\n        {{assessmentQuestion.viewHelper.translatedIdentifiers.get(blankIdentifier)}}\n      </label>\n      <input id="{{assessmentQuestion.elementId}}-fimb-answers-{{$index}}"\n             name="{{assessmentQuestion.elementId}}-fimb-answers-{{$index}}"\n             class="fimb-answer-input"\n             type="text"\n             ng-model="assessmentQuestion.givenAnswer[blankIdentifier]"\n             ng-blur="assessmentQuestion.viewHelper.replaceAnswerInQuestionTextWithText($index, assessmentQuestion.givenAnswer[blankIdentifier])"\n             bb-translate-attrs="{placeholder: \'components.directives.assessment-question.fimb.attempt-authoring.input-placeholder\'}"\n             analytics-id="components.directives.assessment-question.fimb.attempt-authoring.input-placeholder.input.text"\n      />\n    </li>\n  </ul>\n</div>\n'},"/qTg":function(e,t){e.exports='<div class="matching-attempt-authoring matching">\n  <div class="matching-question question-container">\n    <bb-rich-text-editor\n      plugin-options="editorPluginOptions"\n      ng-model="questionAttempt.question.questionText.rawText"\n      supports-inline-document-render="true"\n      is-read-only="true">\n    </bb-rich-text-editor>\n  </div>\n  <div bb-first-time-container class="guidance-wrapper question-answer-container">\n    <div bb-guidance-target component-key="components.directives.assessment-question.ftue.matching-attempt-authoring">\n      <bb-matching-attempt\n        answers="questionAttempt.question.answers"\n        given-answers="questionAttempt.givenAnswers"\n        prompts="questionAttempt.question.prompts"\n        on-change="assessmentQuestion.onAnswersChange"\n        question-index="questionAttempt.question.position"\n        plugins-config="automatedFeedbackEditorPluginOptions"\n      ></bb-matching-attempt>\n    </div>\n\n    <bb-guidance component-key="components.directives.assessment-question.ftue.matching-attempt-authoring"\n                 class="guidance-element-overlay stacked push-bottom" ng-if="::assessmentQuestion.isFirstQuestionAttemptOfType()">\n      <span bb-translate>components.directives.assessment-question.ftue.matching-attempt-authoring</span>\n    </bb-guidance>\n  </div>\n</div>\n'},"0V7O":function(e,t){e.exports='<div class="attempt-authoring-container" bb-load-bundle="components/directives/assessment/attempt-canvas" ng-switch="::attemptCanvas.hasQuestions()">\n  \x3c!-- Add empty form to import autosave-directive.ts when there is no question content --\x3e\n  <form bb-autosave save-func="" validation-func="" novalidate ng-class="::{\'empty-form\' : !attemptCanvas.hasQuestions()}"></form>\n  \x3c!-- has questions --\x3e\n  <div ng-if="::attemptCanvas.hasQuestions()">\n    <div class="attempt-header assessment-header uneditable">\n      <h2 bb-translate="{{attemptCanvas.headerKey}}" translate-values="{\'title\': attemptCanvas.customCategory}"></h2>\n    </div>\n    <bb-assessment-page-counts\n      ng-if="attemptCanvas.showPageCountHeader"\n      total-pages="attemptCanvas.totalPagesCount"\n      current-page="attemptCanvas.currentPageCount"\n    ></bb-assessment-page-counts>\n    <div ng-if="attemptCanvas.showQuestionFilterMessage" class="no-visible-questions">\n      <bb-ui-icon-small-attention class="no-visible-questions-attention-icon"></bb-ui-icon-small-attention>\n      <span bb-translate>components.directives.attempt-canvas.no-visible-questions</span>\n    </div>\n    <ol class="question-list attempt-question-list">\n      <li ng-repeat="questionAttempt in attemptCanvas.questionAttemptView.currentVisibleQuestionAttemptsPage track by questionAttempt.id">\n        <bb-assessment-question question-attempt="questionAttempt"\n                                mode="attemptCanvas.AttemptMode()"\n                                content-id="attemptCanvas.content.id"\n                                index="$index">\n        </bb-assessment-question>\n      </li>\n    </ol>\n    <div class="freeform-response-divider"></div>\n  </div>\n\n  \x3c!-- empty state --\x3e\n  <div class="is-empty-page is-empty-fade"\n        ng-switch-when="false"\n        ng-if="!attemptCanvas.studentSubmission().rawText">\n    <div class="is-empty-wrapper">\n      <div class="is-empty-explanation">\n        <img src="./static/images/ftue/zero-state-assessment-student-addcontent.svg" alt="" />\n        <h3 class="is-empty-heading" bb-translate>components.directives.attempt-canvas.freeform-response.author.banner.submission</h3>\n        <span bb-translate>components.directives.attempt-canvas.freeform-response.author.subtext.submission</span>\n      </div>\n    </div>\n  </div>\n\n  <div class="freeform-response" ng-if="attemptCanvas.displayFreeformResponse()">\n    <ng-form name="freeform-response-form" novalidate>\n      <span class="additional-content-label" bb-translate>{{::attemptCanvas.getFreeformResponseBundleKey()}}</span>\n      <bb-freeform-response-editor\n        is-privileged="true"\n        bbml="attemptCanvas.studentSubmission()"\n        save-func="attemptCanvas.save()"\n        auto-save-context-area="{{::attemptCanvas.autoSaveContextArea}}"\n        text-editor-placeholder-key="attemptCanvas.getFreeformPlaceholderBundleKey()"\n        expand-inline-files-on-load="true"\n      >\n      </bb-freeform-response-editor>\n    </ng-form>\n  </div>\n\n  <div ng-if="attemptCanvas.isContinueVisible"\n       class="continue-to-next-page">\n    <button\n      analytics-id="components.directives.attempt-canvas.continue-to-next-page"\n      ng-click="attemptCanvas.navigateNext()"\n      class="button button--secondary"\n      bb-translate>\n      components.directives.attempt-canvas.continue-to-next-page\n    </button>\n  </div>\n\n  <div ng-if="attemptCanvas.isFilterToUnansweredVisible"\n       class="filter-to-unanswered"\n       bb-translate>\n    components.directives.attempt-canvas.filter-to-unanswered-desc\n  </div>\n  <div ng-if="attemptCanvas.isFilterToUnansweredVisible"\n       class="filter-to-unanswered filter-to-unanswered-button">\n    <button analytics-id="components.directives.attempt-canvas.filter-to-unanswered"\n            ng-click="attemptCanvas.filterToUnanswered()"\n            class="button button--secondary"\n            bb-translate>\n      components.directives.attempt-canvas.filter-to-unanswered-button\n    </button>\n  </div>\n\n</div>\n'},"2MQt":function(e,t,s){var n=s("ziER"),i=s("5JeM"),a=new n({id:"icon-medium-check-circle",use:"icon-medium-check-circle-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-check-circle"><circle cx="12" cy="12" r="11" stroke-width="2" /><path d="M7 12l4 4 7-8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(a);e.exports=a},"3Uvi":function(e,t){e.exports='<div>\n  <div ng-if="::questionAnswerStatus.shouldShowText() || wasLate()"\n       class="question-answer-status"\n       ng-class="::questionAnswerStatus.getBackgroundClass()">\n    <div ng-if="::questionAnswerStatus.shouldShowText()" class="question-answer-status--correct-text">\n      <div bb-translate\n           class="question-answer-status__correctness-label">\n        {{::questionAnswerStatus.getCorrectnessTextKey()}}\n      </div>\n      <ng-transclude/>\n    </div>\n    <div ng-if="wasLate()"\n        class="question-answer-status__time-limit"\n        ng-class="::{\'question-answer-status__text-with-attention\': questionAnswerStatus.shouldShowText()}">\n      <bb-svg-icon size="small"\n        icon="attention"\n        class="question-answer-status__after-time-attention">\n      </bb-svg-icon>\n      <div bb-translate class="question-answer-status__after-time-text">\n        components.directives.assessment-question.status.attention\n      </div>\n    </div>\n  </div>\n</div>\n'},"5O3l":function(e,t){e.exports='<div class="calculated-formula-question-container calculated-formula-attempt-authoring guidance-wrapper">\n  <bb-rich-text-editor\n    ng-model="assessmentQuestion.viewHelper.questionTextWithVariableValues"\n    plugin-options="{\'attachment\': true, \'math\': true, \'contentMarket\': true}"\n    supports-inline-document-render="true"\n    is-read-only="true">\n  </bb-rich-text-editor>\n  <div\n    class="formula-details"\n    ng-if="::questionAttempt.question.displayFormulaToStudent"\n  >\n    <div class="formula-image">\n      <span class="formula-image-label" bb-translate>\n        components.directives.assessment-question.calculated-formula.answerFormula\n      </span>\n      <div>\n        <img\n          ng-src="{{::assessmentQuestion.imageSource}}"\n          alt="{{::assessmentQuestion.imageAltText}}"\n        />\n      </div>\n    </div>\n    <ul class="variable-value-list">\n      <li class="variable-value-list-item" ng-repeat="(variable, value) in ::questionAttempt.question.variableValues">\n        <span translate-values="{variableName: variable, variableValue: value}" bb-translate>\n          components.directives.assessment-question.calculated-formula.variableValue\n        </span>\n      </li>\n    </ul>\n  </div>\n  <div\n    ng-if="::questionAttempt.question.correctAnswerPrecision"\n    bb-translate="{{::assessmentQuestion.viewHelper.getRoundingInstructionsKey()}}"\n    translate-values="{scale: questionAttempt.question.answerScale}"\n    class="rounding-instructions"\n  ></div>\n</div>\n\n<div bb-first-time-container class="guidance-wrapper question-answer-container">\n  <div bb-guidance-target component-key="components.directives.assessment-question.ftue.calculated-formula-attempt-authoring">\n    <input\n      id="{{::assessmentQuestion.elementId}}"\n      name="{{::assessmentQuestion.elementId}}"\n      type="text"\n      ng-model="assessmentQuestion.givenAnswer"\n      bb-translate-attrs="{placeholder: \'components.directives.assessment-question.calculated-formula.placeholder.attempt\', \'aria-label\': \'components.directives.assessment-question.placeholder.question\'}"\n      translate-attrs-values="{questionIdentifier: questionAttempt.visibleQuestionNumber}"\n      analytics-id="components.directives.assessment-question.calculated-formula.attempt-authoring.input-placeholder.input.text"\n    />\n  </div>\n\n  <bb-guidance component-key="components.directives.assessment-question.ftue.calculated-formula-attempt-authoring"\n               class="guidance-element-overlay stacked push-bottom" ng-if="::assessmentQuestion.isFirstQuestionAttemptOfType()">\n    <span bb-translate>components.directives.assessment-question.ftue.calculated-formula-attempt-authoring</span>\n  </bb-guidance>\n</div>\n'},"5dtR":function(e,t){e.exports='<div class="question-container">\n  <bb-rich-text-editor\n    ng-model="questionAttempt.question.questionText.rawText"\n    plugin-options="{\'attachment\': true, \'math\': true, \'contentMarket\': true}"\n    supports-inline-document-render="true"\n    is-read-only="true">\n  </bb-rich-text-editor>\n</div>\n\n<div bb-first-time-container class="guidance-wrapper question-answer-container">\n  <div bb-guidance-target component-key="components.directives.assessment-question.ftue.essay-attempt-authoring">\n    <bb-rich-text-editor\n      name="{{::assessmentQuestion.elementId}}"\n      ng-model="assessmentQuestion.givenAnswer.rawText"\n      is-read-only="assessmentQuestion.readOnly"\n      is-disabled="assessmentQuestion.isDisabled"\n      on-focus="assessmentQuestion.onEditorFocus()"\n      on-blur="assessmentQuestion.onEditorBlur()"\n      on-new-attachment-save-pressed="assessmentQuestion.onNewAttachmentSaving()"\n      on-change="assessmentQuestion.onBbRichTextEditorChange"\n      is-toolbar-hidden="!assessmentQuestion.isEditorActive"\n      plugin-options="assessmentQuestion.pluginOptions"\n      file-location="questionAttempt.givenAnswer.fileLocation"\n      web-location="questionAttempt.givenAnswer.webLocation"\n      editor-placeholder-key="components.directives.assessment-question.essay.placeholder.attempt"\n      sr-label="quattachmentestionAttempt.question.questionText.rawText"\n      supports-inline-document-render="false"\n      show-word-count="true">\n    </bb-rich-text-editor>\n  </div>\n\n  <bb-guidance component-key="components.directives.assessment-question.ftue.essay-attempt-authoring"\n               class="guidance-element-overlay stacked push-bottom" ng-if="::assessmentQuestion.isFirstQuestionAttemptOfType()">\n    <span bb-translate>components.directives.assessment-question.ftue.essay-attempt-authoring</span>\n  </bb-guidance>\n</div>\n'},"7TUR":function(e,t){e.exports='<div class="fimb-question-container fimb-attempt-review">\n  <div class="fimb-question">\n    <bb-rich-text-editor\n      ng-model="assessmentQuestion.viewHelper.questionText"\n      plugin-options="editorPluginOptions"\n      supports-inline-document-render="true"\n      is-read-only="true">\n    </bb-rich-text-editor>\n  </div>\n  <bb-question-answer-status correctness="::assessmentQuestion.getAnswerResult()"\n                             hide-correctness-text="::!assessmentQuestion.canShowCorrectAnswerRelatedDetail()"\n                             was-late="::assessmentQuestion.wasAnsweredLate()"\n                             align-icon-to-top="assessmentQuestion.viewHelper.alignIconTop()"\n                             class="fimb-question-answer">\n    <div class="acceptable-answer" ng-if="assessmentQuestion.canShowCorrectAnswerRelatedDetail()" ng-repeat="identifier in assessmentQuestion.viewHelper.orderedIdentifiers">\n      <div ng-switch on="assessmentQuestion.viewHelper.answersMap[identifier].evaluationType">\n        <span ng-switch-when="CONTAINS" bb-translate\n              translate-values="{identifier: identifier, numberOfValues: assessmentQuestion.viewHelper.answersMap[identifier].values.length, values: assessmentQuestion.viewHelper.answersMap[identifier].values}">\n          components.directives.assessment-question.fimb.review.acceptable-answers.contains.plural\n        </span>\n        <span ng-switch-when="EXACT" bb-translate\n              translate-values="{identifier: identifier, numberOfValues: assessmentQuestion.viewHelper.answersMap[identifier].values.length, values: assessmentQuestion.viewHelper.answersMap[identifier].values}">\n          components.directives.assessment-question.fimb.review.acceptable-answers.exact.plural\n        </span>\n        <span ng-switch-when="MATCHES" bb-translate\n              translate-values="{identifier: identifier, pattern: assessmentQuestion.viewHelper.answersMap[identifier].values[0]}">\n          components.directives.assessment-question.fimb.review.acceptable-answers.matches\n        </span>\n      </div>\n      <div class="acceptable-answer-details" ng-if="::assessmentQuestion.viewHelper.showDetailsForAnswer(identifier)"\n           ng-switch on="::assessmentQuestion.viewHelper.answersMap[identifier].evaluationType">\n        <span ng-switch-when="CONTAINS" ng-switch on="assessmentQuestion.viewHelper.answersMap[identifier].caseSensitive">\n          <span ng-switch-when="true" bb-translate>components.directives.assessment-question.fimb.review.answer-details.contains.case-sensitive</span>\n          <span ng-switch-when="false" bb-translate>components.directives.assessment-question.fimb.review.answer-details.contains.not-case-sensitive</span>\n        </span>\n        <span ng-switch-when="EXACT" ng-switch on="assessmentQuestion.viewHelper.answersMap[identifier].caseSensitive">\n          <span ng-switch-when="true" bb-translate>components.directives.assessment-question.fimb.review.answer-details.exact.case-sensitive</span>\n          <span ng-switch-when="false" bb-translate>components.directives.assessment-question.fimb.review.answer-details.exact.not-case-sensitive</span>\n        </span>\n      </div>\n    </div>\n  </bb-question-answer-status>\n  <bb-automated-question-feedback\n    feedback="assessmentQuestion.getAutomatedQuestionFeedback()"\n    is-collapsible="assessmentQuestion.allowCollapsingOfAutomatedFeedbackIfShown()"\n    editor-plugins-options="automatedFeedbackEditorPluginOptions"\n  />\n</div>\n'},"7b1Y":function(e,t){e.exports='<div class="question-answer-container">\n  <bb-question-answer-status was-late="::assessmentQuestion.wasAnsweredLate()"\n                             hide-correctness-text="true"\n                             class="essay-attention">\n  </bb-question-answer-status>\n  <bb-rich-text-editor\n    plugin-options="{\'attachment\': true, \'math\': true, \'contentMarket\': true}"\n    ng-model="assessmentQuestion.questionAttempt.question.questionText.rawText"\n    supports-inline-document-render="true"\n    is-read-only="true">\n  </bb-rich-text-editor>\n  <div class="panel">\n    <span class="answer-panel-heading" bb-translate>components.directives.assessment-question.essay.review.your-answer</span>\n    <bb-rich-text-editor\n      ng-model="assessmentQuestion.questionAttempt.givenAnswer.rawText"\n      plugin-options="{\'attachment\': true, \'math\': true}"\n      supports-inline-document-render="false"\n      is-read-only="true">\n    </bb-rich-text-editor>\n  </div>\n  <bb-model-answer\n    ng-if="assessmentQuestion.canShowCorrectAnswerRelatedDetail()"\n    disable-focus="false"\n    course-id="assessmentQuestion.contextCourse.courseId"\n    is-read-only="true"\n    model-answer-mode="assessmentQuestion.modelAnswerMode"\n    question="assessmentQuestion.questionAttempt.question"\n  ></bb-model-answer>\n</div>\n'},APyD:function(e,t){e.exports='<div class="question-container">\n  <bb-rich-text-editor\n    ng-model="assessmentQuestion.questionAttempt.question.questionText.rawText"\n    is-read-only="true"\n    supports-inline-document-render="true"\n    plugin-options="editorPluginOptions"\n  >\n  </bb-rich-text-editor>\n</div>\n'},D57O:function(e,t){e.exports='<div class="peer-feedback-by-student">\n  <div class="spinner bb-secondary-color-2" ng-if="$ctrl.isLoading" aria-hidden="true"></div>\n  <div ng-if="!$ctrl.isLoading">\n    <bb-feedback-list\n      secondary-graders-feedback="$ctrl.feedbackListPayload.secondaryGradersFeedback"\n      config-props="$ctrl.feedbackListPayload.configProps"\n    />\n  </div>\n</div>\n'},"Ee/I":function(e,t){e.exports='<div class="true-false-attempt-authoring true-false">\n  <div class="true-false-question question-container">\n    <bb-rich-text-editor\n      ng-model="questionAttempt.question.questionText.rawText"\n      is-read-only="true"\n      supports-inline-document-render="true"\n      plugin-options="{\'attachment\': true, \'math\': true, \'contentMarket\': true}">\n    </bb-rich-text-editor>\n  </div>\n  <div class="true-false-answers-container">\n    <ol class="true-false-answers" ng-if="questionAttempt.question">\n      <li class="true-false-answer js-true-false-answer-true" ng-class="{\'selected-answer\': assessmentQuestion.givenAnswer !== undefined && assessmentQuestion.givenAnswer}">\n        <input type="radio"\n               id="{{assessmentQuestion.elementId + \'true-false-answer-true\' }}"\n               name="{{assessmentQuestion.elementId + \'true-false-answers-choice\' }}"\n               aria-labelledby="{{assessmentQuestion.elementId + \'true-false-answer-true-label\' }}"\n               ng-model="assessmentQuestion.givenAnswer"\n               ng-value="true"\n               analytics-id="assessment.question.true.false.answer.givenAnswer.input.radio"/>\n        <label id="{{assessmentQuestion.elementId + \'true-false-answer-true-label\' }}"\n               for="{{assessmentQuestion.elementId + \'true-false-answer-true\' }}"\n               ng-mousedown="assessmentQuestion.givenAnswer = true"\n               class="checkbox-label">\n          {{::assessmentQuestion.viewHelper.trueAnswerOptionLabel}}\n        </label>\n      </li>\n      <li class="true-false-answer js-true-false-answer-false" ng-class="{\'selected-answer\': assessmentQuestion.givenAnswer !== undefined && !assessmentQuestion.givenAnswer}">\n        <input type="radio"\n               id="{{assessmentQuestion.elementId + \'true-false-answer-false\' }}"\n               name="{{assessmentQuestion.elementId + \'true-false-answers-choice\' }}"\n               aria-labelledby="{{assessmentQuestion.elementId + \'true-false-answer-false-label\' }}"\n               ng-model="assessmentQuestion.givenAnswer"\n               ng-value="false"\n               analytics-id="assessment.question.true.false.answer.no.givenAnswer.input.radio"/>\n        <label id="{{assessmentQuestion.elementId + \'true-false-answer-false-label\' }}"\n               for="{{assessmentQuestion.elementId + \'true-false-answer-false\' }}"\n               ng-mousedown="assessmentQuestion.givenAnswer = false"\n               class="checkbox-label">\n          {{::assessmentQuestion.viewHelper.falseAnswerOptionLabel}}\n        </label>\n      </li>\n    </ol>\n  </div>\n</div>\n'},FVIt:function(e,t){e.exports='<div class="attempt-review-container"\n  bb-load-bundle="components/directives/assessment/attempt-canvas">\n  <div class="attempt-question-review">\n    <h2 id="attemptGrading_assignmentContent_heading"\n        class="sr-only">\n      <bb-translate>components.directives.attempt-canvas.sections.assignment</bb-translate>\n    </h2>\n    <button class="accordion__button"\n            aria-controls="attemptGrading_assignmentContent_region"\n            ng-attr-aria-expanded="{{attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.AssignmentContent)}}"\n            ng-click="attemptCanvas.toggleAccordionRegions(attemptCanvas.attemptCanvasRegion.AssignmentContent)"\n            analytics-id="course.content.assessment.attempt.grading.section.assignment.button">\n      <span class="accordion__button__heading">\n        <bb-translate>components.directives.attempt-canvas.sections.assignment</bb-translate>\n      </span>\n      <span class="accordion__button__arrow accordion__button__arrow--active"\n            ng-class="{\'accordion__button__arrow--active\': attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.AssignmentContent)}">\n        <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon></span>\n    </button>\n    <div class="accordion__region"\n         id="attemptGrading_assignmentContent_region"\n         aria-labelledby="attemptGrading_assignmentContent_heading"\n         role="region"\n         ng-class="{\'accordion__region--active\': attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.AssignmentContent)}">\n      <ol class="question-list">\n        <li ng-repeat="gradedQuestionAttempt in (attemptCanvas.gradedQuestionAttempts | filter: { questionAttempt: { questionType: \'!pageBreak\' }}) track by $index">\n          <bb-assessment-question class="js-assessment-question-{{$index}}" attempt="attempt" graded-question-attempt="gradedQuestionAttempt" mode="attemptCanvas.ReviewMode()" index="$index"\n                                  is-small-breakpoint="attemptCanvas.isSmallBreakpoint"\n          >\n          </bb-assessment-question>\n        </li>\n      </ol>\n    </div>\n\n    <h2 id="attemptGrading_submissionContent_heading"\n        ng-if="::!!attemptCanvas.studentSubmission().rawText"\n        class="sr-only">\n      <bb-translate>components.directives.attempt-canvas.sections.submission</bb-translate>\n    </h2>\n    <button class="accordion__button"\n            aria-controls="attemptGrading_submissionContent_region"\n            ng-if="::!!attemptCanvas.studentSubmission().rawText"\n            ng-attr-aria-expanded="{{attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.SubmissionContent)}}"\n            ng-click="attemptCanvas.toggleAccordionRegions(attemptCanvas.attemptCanvasRegion.SubmissionContent)"\n            analytics-id="course.content.assessment.attempt.grading.section.submission.button">\n      <span class="accordion__button__heading">\n        <bb-translate>components.directives.attempt-canvas.sections.submission</bb-translate>\n      </span>\n      <span class="accordion__button__arrow accordion__button__arrow--active"\n            ng-class="{\'accordion__button__arrow--active\': attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.SubmissionContent)}">\n        <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon></span>\n    </button>\n    <div class="accordion__region"\n         id="attemptGrading_submissionContent_region"\n         ng-if="::!!attemptCanvas.studentSubmission().rawText"\n         aria-labelledby="attemptGrading_submissionContent_heading"\n         role="region"\n         ng-class="{\'accordion__region--active\': attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.SubmissionContent)}">\n      <div class="freeform-response">\n        <bb-freeform-response-editor\n          is-privileged="false"\n          expand-inline-files-on-load="true"\n          bbml="attemptCanvas.studentSubmission()">\n        </bb-freeform-response-editor>\n      </div>\n    </div>\n\n    <h2 id="attemptGrading_peerReviews_heading"\n        ng-if="::attemptCanvas.canShowPeerFeedbackByStudent"\n        class="sr-only">\n      <bb-translate ng-if="::!attemptCanvas.canModifyGradebook">\n        course.content.assessment.attempt.feedback.peerReview.self\n      </bb-translate>\n      <bb-translate ng-if="::attemptCanvas.canModifyGradebook"\n                    course-org-token-resolver>\n        course.content.assessment.attempt.feedback.peerReview.byStudent\n      </bb-translate>\n    </h2>\n    <button class="accordion__button"\n            ng-if="::attemptCanvas.canShowPeerFeedbackByStudent"\n            aria-controls="attemptGrading_peerReviews_region"\n            ng-attr-aria-expanded="{{attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.PeerReviews)}}"\n            ng-click="attemptCanvas.toggleAccordionRegions(attemptCanvas.attemptCanvasRegion.PeerReviews)"\n            analytics-id="course.content.assessment.attempt.grading.section.peerReviews.button">\n      <span class="accordion__button__heading">\n        <bb-translate ng-if="::!attemptCanvas.canModifyGradebook">\n            course.content.assessment.attempt.feedback.peerReview.self\n          </bb-translate>\n          <bb-translate ng-if="::attemptCanvas.canModifyGradebook"\n                        course-org-token-resolver>\n            course.content.assessment.attempt.feedback.peerReview.byStudent\n          </bb-translate>\n      </span>\n      <span class="accordion__button__arrow accordion__button__arrow--active"\n            ng-class="{\'accordion__button__arrow--active\': attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.PeerReviews)}">\n        <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon></span>\n    </button>\n    <div class="accordion__region"\n         id="attemptGrading_peerReviews_region"\n         ng-if="::attemptCanvas.canShowPeerFeedbackByStudent"\n         aria-labelledby="attemptGrading_peerReviews_heading"\n         role="region"\n         ng-class="{\'accordion__region--active\': attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.PeerReviews)}">\n      <bb-peer-feedback-by-student attempt="attempt"></bb-peer-feedback-by-student>\n    </div>\n  </div>\n</div>\n'},HF29:function(e,t){e.exports='<div class="attempt-grading-container"\n  bb-load-bundle="components/directives/assessment/attempt-canvas">\n  <div class="attempt-question-review">\n    <h2 id="attemptGrading_assignmentContent_heading"\n        class="sr-only">\n      <bb-translate>components.directives.attempt-canvas.sections.assignment</bb-translate>\n    </h2>\n    <button class="accordion__button"\n            aria-controls="attemptGrading_assignmentContent_region"\n            ng-attr-aria-expanded="{{attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.AssignmentContent)}}"\n            ng-click="attemptCanvas.toggleAccordionRegions(attemptCanvas.attemptCanvasRegion.AssignmentContent)"\n            analytics-id="course.content.assessment.attempt.grading.section.assignment.button">\n    <span class="accordion__button__heading">\n      <bb-translate>components.directives.attempt-canvas.sections.assignment</bb-translate>\n    </span>\n      <span class="accordion__button__arrow"\n            ng-class="{\'accordion__button__arrow--active\': attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.AssignmentContent)}">\n      <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon></span>\n    </button>\n    <div class="accordion__region"\n         id="attemptGrading_assignmentContent_region"\n         aria-labelledby="attemptGrading_assignmentContent_heading"\n         role="region"\n         ng-class="{\'accordion__region--active\': attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.AssignmentContent)}">\n      <ol ng-if="::!attemptCanvas.isPeerReviewer"\n          class="question-list js-graded-question-list">\n        <li ng-repeat="gradedQuestionAttempt in (attemptCanvas.gradedQuestionAttempts | filter: { questionAttempt: { questionType: \'!pageBreak\' } }) track by $index">\n          <bb-assessment-question class="js-assessment-question-{{$index}}"\n                                  attempt="attempt"\n                                  graded-question-attempt="gradedQuestionAttempt"\n                                  mode="attemptCanvas.GradingMode()"\n                                  index="$index"\n                                  assessment-id="attemptCanvas.assessmentId"\n                                  content-id="attemptCanvas.content.id"\n                                  is-any-question-editing="isAnyQuestionEditing"\n                                  is-small-breakpoint="attemptCanvas.isSmallBreakpoint"\n          >\n          </bb-assessment-question>\n        </li>\n      </ol>\n      <ol ng-if="::attemptCanvas.isPeerReviewer"\n          class="question-list js-non-graded-question-list">\n        <li ng-repeat="questionAttempt in attemptCanvas.toolAttemptDetail.questionAttempts track by $index">\n          <bb-assessment-question question-attempt="questionAttempt"\n                                  mode="attemptCanvas.AttemptMode()"\n                                  index="$index"\n          >\n          </bb-assessment-question>\n        </li>\n      </ol>\n    </div>\n\n    <h2 id="attemptGrading_submissionContent_heading"\n        ng-if="::!!attemptCanvas.studentSubmission().rawText"\n        class="sr-only">\n      <bb-translate>components.directives.attempt-canvas.sections.submission</bb-translate>\n    </h2>\n    <button class="accordion__button"\n            aria-controls="attemptGrading_submissionContent_region"\n            ng-if="::!!attemptCanvas.studentSubmission().rawText"\n            ng-attr-aria-expanded="{{attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.SubmissionContent)}}"\n            ng-click="attemptCanvas.toggleAccordionRegions(attemptCanvas.attemptCanvasRegion.SubmissionContent)"\n            analytics-id="course.content.assessment.attempt.grading.section.submission.button">\n    <span class="accordion__button__heading">\n      <bb-translate>components.directives.attempt-canvas.sections.submission</bb-translate>\n    </span>\n      <span class="accordion__button__arrow"\n            ng-class="{\'accordion__button__arrow--active\': attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.SubmissionContent)}">\n      <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon></span>\n    </button>\n    <div class="accordion__region"\n         id="attemptGrading_submissionContent_region"\n         ng-if="::!!attemptCanvas.studentSubmission().rawText"\n         aria-labelledby="attemptGrading_submissionContent_heading"\n         role="region"\n         ng-class="{\'accordion__region--active\': attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.SubmissionContent)}">\n      <div class="freeform-response">\n        <bb-freeform-response-editor\n          is-privileged="false"\n          expand-inline-files-on-load="true"\n          bbml="attemptCanvas.studentSubmission()">\n        </bb-freeform-response-editor>\n      </div>\n    </div>\n\n    <h2 id="attemptGrading_peerReviews_heading"\n        ng-if="::attemptCanvas.canShowPeerFeedbackByStudent"\n        class="sr-only">\n      <bb-translate ng-if="::!attemptCanvas.canModifyGradebook">\n        course.content.assessment.attempt.feedback.peerReview.self\n      </bb-translate>\n      <bb-translate ng-if="::attemptCanvas.canModifyGradebook"\n                    course-org-token-resolver>\n        course.content.assessment.attempt.feedback.peerReview.byStudent\n      </bb-translate>\n    </h2>\n    <button class="accordion__button"\n            ng-if="::attemptCanvas.canShowPeerFeedbackByStudent"\n            aria-controls="attemptGrading_peerReviews_region"\n            ng-attr-aria-expanded="{{attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.PeerReviews)}}"\n            ng-click="attemptCanvas.toggleAccordionRegions(attemptCanvas.attemptCanvasRegion.PeerReviews)"\n            analytics-id="course.content.assessment.attempt.grading.section.peerReviews.button">\n      <span class="accordion__button__heading">\n        <bb-translate ng-if="::!attemptCanvas.canModifyGradebook">\n            course.content.assessment.attempt.feedback.peerReview.self\n          </bb-translate>\n          <bb-translate ng-if="::attemptCanvas.canModifyGradebook"\n                        course-org-token-resolver>\n            course.content.assessment.attempt.feedback.peerReview.byStudent\n          </bb-translate>\n      </span>\n      <span class="accordion__button__arrow accordion__button__arrow--active"\n            ng-class="{\'accordion__button__arrow--active\': attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.PeerReviews)}">\n        <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon></span>\n    </button>\n    <div class="accordion__region"\n         id="attemptGrading_peerReviews_region"\n         ng-if="::attemptCanvas.canShowPeerFeedbackByStudent"\n         aria-labelledby="attemptGrading_peerReviews_heading"\n         role="region"\n         ng-class="{\'accordion__region--active\': attemptCanvas.isAccordionRegionActive(attemptCanvas.attemptCanvasRegion.PeerReviews)}">\n      <bb-peer-feedback-by-student attempt="attempt"></bb-peer-feedback-by-student>\n    </div>\n  </div>\n</div>\n'},I5V3:function(e,t){e.exports='<div class="multiple-answer-attempt-review multiple-answer">\n  <div class="multiple-answer-question">\n    <bb-rich-text-editor\n      plugin-options="editorPluginOptions"\n      ng-model="assessmentQuestion.questionAttempt.question.questionText.rawText"\n      supports-inline-document-render="true"\n      is-read-only="true">\n    </bb-rich-text-editor>\n  </div>\n\n  <bb-question-answer-status\n    correctness="::assessmentQuestion.getAnswerResult()"\n    was-late="::assessmentQuestion.wasAnsweredLate()"\n    hide-correctness-text="!assessmentQuestion.canShowCorrectAnswerRelatedDetail() || !assessmentQuestion.viewHelper.isOnlyPartialCredit()"\n    class="multiple-answer-question-answer {{!assessmentQuestion.canShowQuestionScoreRelatedDetail()?\'multiple-answer-attempt-review__question-correctness\':\'\'}}">\n    <div ng-bind-html="::assessmentQuestion.viewHelper.formattedAnswerString"></div>\n  </bb-question-answer-status>\n  <div class="toggle-answer-options-container" ng-if="assessmentQuestion.canShowQuestionScoreRelatedDetail()">\n    <button class="toggle-answer-options" ng-click="assessmentQuestion.viewHelper.toggleAnswerOptions()" analytics-id="assessment.question.answer.options.toggle.button">\n      <ng-switch on="assessmentQuestion.viewHelper.hideAnswerOptions">\n        <span ng-switch-when="false" bb-translate>components.directives.assessment-question.multiple-answer.review.hide-options</span>\n        <span ng-switch-default bb-translate>components.directives.assessment-question.multiple-answer.review.show-options</span>\n        <bb-svg-icon size="custom" icon="arrow-up" class="hide-options-arrow" ng-class="{\'rotate-arrow\': assessmentQuestion.viewHelper.hideAnswerOptions}"></bb-svg-icon>\n      </ng-switch>\n    </button>\n  </div>\n\n  <div class="multiple-answer-answers-container" ng-show="assessmentQuestion.showAnswerOptions()">\n    <ol class="multiple-answer-answers" ng-class="{\'multiple-answers-graded-review\': assessmentQuestion.canShowCorrectAnswerRelatedDetail()}">\n      <li ng-repeat="answer in assessmentQuestion.questionAttempt.question.answers track by $index"\n          class="js-answer-{{$index}} {{::assessmentQuestion.getAnswerChoiceStyles($index)}}">\n        <input type="checkbox"\n               id="{{assessmentQuestion.elementId}}-answer-{{$index}}"\n               name="{{assessmentQuestion.elementId}}-answer-{{$index}}"\n               ng-model="assessmentQuestion.questionAttempt.givenAnswer[$index]"\n               disabled\n               analytics-id="assessment.question.attempt.givenAnswer.input.checkbox"/>\n        <label for="{{assessmentQuestion.elementId}}-answer-{{$index}}" class="checkbox-label">\n          <span ng-if="assessmentQuestion.viewHelper.showIncorrectIndicator($index)"\n                class="correctness-label" bb-translate>\n            components.directives.assessment-question.multiple-answer.incorrect-label\n          </span>\n          <bb-rich-text-editor\n              plugin-options="{\'attachment\': true, \'math\': true, \'contentMarket\': true}"\n              ng-model="answer.answerText.rawText"\n              is-read-only="true">\n          </bb-rich-text-editor>\n        </label>\n        <span class="correct-answer-text" ng-if="answer.correctAnswer && assessmentQuestion.canShowCorrectAnswerRelatedDetail()" bb-translate>components.directives.assessment-question.multiple-answer.correct-label</span>\n      </li>\n    </ol>\n  </div>\n  <bb-automated-question-feedback\n    feedback="assessmentQuestion.getAutomatedQuestionFeedback()"\n    is-collapsible="assessmentQuestion.allowCollapsingOfAutomatedFeedbackIfShown()"\n    editor-plugins-options="automatedFeedbackEditorPluginOptions"\n  />\n</div>\n'},LQXi:function(e,t){e.exports='<div class="multiple-answer-attempt-authoring multiple-answer">\n    <div class="multiple-answer-question question-container">\n        <bb-rich-text-editor\n          plugin-options="editorPluginOptions"\n          ng-model="questionAttempt.question.questionText.rawText"\n          supports-inline-document-render="true"\n          is-read-only="true">\n        </bb-rich-text-editor>\n    </div>\n    <div class="multiple-answer-answers-container">\n      <ol class="multiple-answer-answers">\n        <li class="{{\'js-multiple-answer-answer-\' + $index}}" ng-repeat="answer in questionAttempt.question.answers track by $index" ng-class="{\'selected-answer\': assessmentQuestion.givenAnswer[$index]}">\n          <input ng-if="questionAttempt.question.singleCorrectAnswer" type="radio"\n                 id="{{assessmentQuestion.elementId}}-answer-{{$index}}"\n                 name="{{assessmentQuestion.elementId}}-answer-{{$index}}"\n                 ng-checked="assessmentQuestion.givenAnswer[$index]"\n                 ng-click="assessmentQuestion.onSingleAnswerInputChanged($index)"\n                 ng-value="true"\n                 analytics-id="assessment.question.single.correct.answer.input.radio"/>\n          <input ng-if="!questionAttempt.question.singleCorrectAnswer" type="checkbox"\n                 id="{{assessmentQuestion.elementId}}-answer-{{$index}}"\n                 name="{{assessmentQuestion.elementId}}-answer-{{$index}}"\n                 ng-model="assessmentQuestion.givenAnswer[$index]"\n                 analytics-id="assessment.question.single.correct.answer.input.checkbox"/>\n          <label for="{{assessmentQuestion.elementId}}-answer-{{$index}}" class="checkbox-label">\n            <bb-rich-text-editor\n              plugin-options="{\'attachment\': true, \'math\': true, \'contentMarket\': true}"\n              ng-model="answer.answerText.rawText"\n              is-read-only="true">\n            </bb-rich-text-editor>\n          </label>\n        </li>\n      </ol>\n    </div>\n</div>\n'},LRgG:function(e,t,s){var n=s("ziER"),i=s("5JeM"),a=new n({id:"icon-medium-partial-credit",use:"icon-medium-partial-credit-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-partial-credit"><circle cx="12" cy="12" r="11" stroke-width="2" /><path d="M12 5v14c-3 0-7-2.5-7-7s4-7 7-7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M10 7.4688v9.0624C8.4059 15.7924 7 14.2105 7 12s1.4059-3.7924 3-4.5312z" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(a);e.exports=a},"QJ+g":function(e,t){e.exports='<div bb-load-bundle="components/directives/freeform-response-editor" class="freeform-response-editor-template"></div>'},SHbF:function(e,t,s){var n=s("ziER"),i=s("5JeM"),a=new n({id:"icon-medium-attention",use:"icon-medium-attention-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-attention"><circle cx="12" cy="12" r="11" stroke-width="2" /><path d="M12.75 18.5a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" /><path d="M12 15l-.5-10h1L12 15z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(a);e.exports=a},StAH:function(e,t){e.exports='<div class="hotspot-question-container hotspot-attempt-review">\n  <bb-question-attempt-review\n    ng-if="assessmentQuestion.questionAttempt.question && !assessmentQuestion.isEditing"\n    ally-service="::allyService"\n    content-id="::contentId"\n    attempt="::assessmentQuestion.questionAttempt"\n    automated-feedback-editor-plugin-options="::automatedFeedbackEditorPluginOptions"\n    is-automated-feedback-collapsible="::assessmentQuestion.allowCollapsingOfAutomatedFeedbackIfShown()"\n    is-attempt-grading-view="::assessmentQuestion.isAttemptGradingView"\n    was-answered-late="::assessmentQuestion.wasAnsweredLate()"\n    can-show-correct-answer-related-detail="assessmentQuestion.canShowCorrectAnswerRelatedDetail()"\n  ></bb-question-attempt-review>\n</div>\n'},"U+0H":function(e,t){e.exports='<div class="true-false-question-authoring true-false"  ng-class="::{\'editable\': assessmentQuestion.canEditQuestionText()}">\n  <div class="true-false-answers-container">\n    <ol class="true-false-answers">\n      <li class="true-false-answer js-true-false-answer-true">\n        <input ng-show="assessmentQuestion.isEditState"\n               id="{{::assessmentQuestion.elementId + \'true-false-answer-true\' }}"\n               name="{{::assessmentQuestion.elementId + \'true-false-answers-choice\' }}"\n               aria-labelledby="{{::assessmentQuestion.elementId + \'true-false-answer-true-label\' }}"\n               ng-disabled="::!assessmentQuestion.canModifyQuestionProperties()"\n               type="radio" ng-value="true" ng-model="question.answer"\n               analytics-id="assessment.question.true.false.answer.true.input.radio"/>\n        <label ng-show="assessmentQuestion.isEditState"\n               id="{{::assessmentQuestion.elementId + \'true-false-answer-true-label\' }}"\n               for="{{::assessmentQuestion.elementId + \'true-false-answer-true\' }}"\n               ng-mousedown="assessmentQuestion.updateCorrectAnswer(true)">\n          {{::assessmentQuestion.viewHelper.trueAnswerOptionLabel}}\n        </label>\n        <span class="true-false-answer-option" ng-show="!assessmentQuestion.isEditState" ng-click="assessmentQuestion.edit()"\n              analytics-id="components.directives.assessmentQuestion.edit.label">\n          {{::assessmentQuestion.viewHelper.trueAnswerOptionLabel}}\n        </span>\n        <span class="correct-answer-text" ng-show="!assessmentQuestion.isEditState && question.answer"\n              bb-translate>components.directives.assessment-question.true-false.correct-label</span>\n      </li>\n      <li class="true-false-answer js-true-false-answer-false">\n        <input ng-show="assessmentQuestion.isEditState"\n               id="{{::assessmentQuestion.elementId + \'true-false-answer-false\' }}"\n               name="{{::assessmentQuestion.elementId + \'true-false-answers-choice\' }}"\n               aria-labelledby="{{::assessmentQuestion.elementId + \'true-false-answer-false-label\' }}"\n               ng-disabled="::!assessmentQuestion.canModifyQuestionProperties()"\n               type="radio" ng-value="false" ng-model="question.answer"\n               analytics-id="assessment.question.true.false.answer.false.input.radio"/>\n        <label ng-show="assessmentQuestion.isEditState"\n               id="{{::assessmentQuestion.elementId + \'true-false-answer-false-label\' }}"\n               for="{{::assessmentQuestion.elementId + \'true-false-answer-false\' }}"\n               ng-mousedown="assessmentQuestion.updateCorrectAnswer(false)">\n          {{::assessmentQuestion.viewHelper.falseAnswerOptionLabel}}\n        </label>\n        <span class="true-false-answer-option" ng-show="!assessmentQuestion.isEditState" ng-click="assessmentQuestion.edit()"\n              analytics-id="components.directives.assessmentQuestion.edit.label">\n          {{::assessmentQuestion.viewHelper.falseAnswerOptionLabel}}\n        </span>\n        <span class="correct-answer-text" ng-show="!assessmentQuestion.isEditState && !question.answer"\n              bb-translate>components.directives.assessment-question.true-false.correct-label</span>\n      </li>\n    </ol>\n  </div>\n</div>\n'},UQC1:function(e,t){e.exports='<div class="calculated-formula-question-container calculated-formula-attempt-review">\n  <bb-rich-text-editor\n    ng-model="assessmentQuestion.viewHelper.questionTextWithVariableValues"\n    plugin-options="editorPluginOptions"\n    supports-inline-document-render="true"\n    is-read-only="true">\n  </bb-rich-text-editor>\n  <div\n    ng-if="::assessmentQuestion.questionAttempt.question.displayFormulaToStudent"\n    class="formula-details"\n  >\n    <img\n      ng-src="{{::assessmentQuestion.imageSource}}"\n      alt="{{::assessmentQuestion.imageAltText}}"\n      class="formula-image" />\n    <ul class="variable-value-list">\n      <li class="variable-value-list-item" ng-repeat="(variable, value) in ::assessmentQuestion.questionAttempt.question.variableValues">\n        <span translate-values="{variableName: variable, variableValue: value}" bb-translate>\n          components.directives.assessment-question.calculated-formula.variableValue\n        </span>\n      </li>\n    </ul>\n  </div>\n  <div\n    ng-if="::assessmentQuestion.questionAttempt.question.correctAnswerPrecision"\n    bb-translate\n    translate-values="{scale: assessmentQuestion.questionAttempt.question.answerScale}"\n    class="rounding-instructions"\n  >\n    {{::assessmentQuestion.viewHelper.getRoundingInstructionsKey()}}\n  </div>\n  <div class="given-answer">\n    <span bb-translate class="given-answer-label">\n      components.directives.assessment-question.calculated-formula.yourAnswer\n    </span>\n    <span dir="ltr">\n      {{::assessmentQuestion.questionAttempt.givenAnswer}}\n    </span>\n  </div>\n  <bb-question-answer-status\n    correctness="::assessmentQuestion.getAnswerResult()"\n    hide-correctness-text="::!assessmentQuestion.canShowCorrectAnswerRelatedDetail()"\n    was-late="::assessmentQuestion.wasAnsweredLate()"\n    class="calculated-formula-question-answer"\n  >\n    <div ng-if="assessmentQuestion.canShowCorrectAnswerRelatedDetail()">\n      <span ng-bind-html="::assessmentQuestion.viewHelper.getCorrectAnswerText()"></span>\n    </div>\n  </bb-question-answer-status>\n  <bb-automated-question-feedback\n    feedback="assessmentQuestion.getAutomatedQuestionFeedback()"\n    is-collapsible="assessmentQuestion.allowCollapsingOfAutomatedFeedbackIfShown()"\n    editor-plugins-options="automatedFeedbackEditorPluginOptions"\n  />\n</div>\n'},Xcvp:function(e,t){e.exports='<div class="calculated-numeric-question-container calculated-numeric-attempt-authoring guidance-wrapper">\n  <bb-question-attempt\n    question="::questionAttempt.question"\n    given-answer="assessmentQuestion.givenAnswer"\n    question-number="::questionAttempt.visibleQuestionNumber"\n    on-answer-change="::assessmentQuestion.onAnswerChange"\n    ally-service="::allyService"\n    content-id="::contentId"\n    plugins-config="::automatedFeedbackEditorPluginOptions"\n  ></bb-question-attempt>\n</div>\n'},afiT:function(e,t){e.exports='<div class="question-answer-container matching-attempt-review">\n  <bb-rich-text-editor\n    plugin-options="editorPluginOptions"\n    ng-model="assessmentQuestion.questionAttempt.question.questionText.rawText"\n    supports-inline-document-render="true"\n    is-read-only="true">\n  </bb-rich-text-editor>\n  <bb-question-answer-status\n    correctness="::assessmentQuestion.getAnswerResult()"\n    hide-correctness-text="::!assessmentQuestion.canShowCorrectAnswerRelatedDetail()"\n    was-late="::assessmentQuestion.wasAnsweredLate()"\n    class="matching-attempt-review__question-correctness">\n    <bb-translate\n      ng-if="assessmentQuestion.canShowCorrectAnswerRelatedDetail()"\n      translate-values="{correctCount: assessmentQuestion.viewHelper.correctPairCount, totalCount: assessmentQuestion.viewHelper.totalPairCount}">\n      components.directives.assessment-question.matching.review.correct-answer-count.plural\n    </bb-translate>\n  </bb-question-answer-status>\n  <bb-matching-attempt\n    answers="assessmentQuestion.viewHelper.questionAttempt.question.answers"\n    given-answers="assessmentQuestion.viewHelper.questionAttempt.givenAnswers"\n    prompts="assessmentQuestion.viewHelper.questionAttempt.question.prompts"\n    show-results="assessmentQuestion.canShowCorrectAnswerRelatedDetail()"\n    plugins-config="automatedFeedbackEditorPluginOptions"\n  >\n  </bb-matching-attempt>\n  <bb-automated-question-feedback\n    feedback="assessmentQuestion.getAutomatedQuestionFeedback()"\n    is-collapsible="assessmentQuestion.allowCollapsingOfAutomatedFeedbackIfShown()"\n    editor-plugins-options="automatedFeedbackEditorPluginOptions"\n  />\n</div>\n'},cH8o:function(e,t){e.exports='<div id="{{::bbmlEditor.bbmlEditorId}}" class="freeform-response-editor js-bbml-editor">\n  <div class="element-list-row">\n    <bb-rich-text-editor\n      ng-model="bbmlEditor.bbML.rawText"\n      is-read-only="true"\n      plugin-options="{attachment: true, math: true}"\n      expand-inline-files-on-load="expandInlineFilesOnLoad"\n      supports-inline-document-render="supportsInlineDocumentRender"\n    ></bb-rich-text-editor>\n  </div>\n</div>\n'},dEnf:function(e,t){e.exports='<div class="question-answer-container">\n  <bb-rich-text-editor\n    ng-model="assessmentQuestion.questionAttempt.question.questionText.rawText"\n    is-read-only="true"\n    supports-inline-document-render="true"\n    plugin-options="editorPluginOptions">\n  </bb-rich-text-editor>\n</div>\n'},e6qG:function(e,t,s){"use strict";var n=s("Llzl"),i=s("YHe3"),a=s("D57K"),o=s("DYK3"),r=s("FHk9"),c=s("vYaK"),l=s("X/qj"),u=s("0JpG"),b=s("lEL+"),d=s("TnpK"),p=s("Qbdf"),m=s("Fvsw"),h=s("Ed3w"),g=s("X8JP"),v=s("vhkR"),w=s("ERsv"),O=s("zGdY"),j=s("aHpC"),A=s("cs5G"),f=s("ohO4"),q=s("jx5I"),C=s("IaSh"),S=s("5dtR"),x=s("iJ4p"),y=s("7b1Y");class $ extends o.a{createQuestion(e,t,s){const n=super.createQuestion(e,t,s);return n.questionType=O.Qb.Essay,n.isShortAnswer=!0,n}getAttemptAuthoringHandler(e,t,s){return this.$injector.instantiate(Q,{attrs:s,element:t,scope:e})}getAttemptGradingHandler(e,t,s){return this.$injector.instantiate(E,{attrs:s,element:t,scope:e})}getAttemptReviewHandler(e,t,s){return this.$injector.instantiate(k,{attrs:s,element:t,scope:e})}}let Q=class extends o.e{constructor(e,t,s,n,i,a,o,c,l,u,b,d){if(super(e,t,n,i,a,o,c,l,u,b),this.$compile=e,this.$window=t,this.$q=s,this.attrs=n,this.CourseModel=i,this.element=a,this.gradebookPermissionService=o,this.localizeService=c,this.scope=l,this.timeout=u,this.ultraState=b,this.proctoringService=d,this.isInitializing=!0,this.isSaving=!1,this.isNewAttachmentSaving=!1,this.isDisabled=!1,this.onBbRichTextEditorChange=e=>{this.toBbML=e},this.isEditorActive=!1,this.toBbML=Object(w.generateToBbML)(l.questionAttempt.givenAnswer.rawText),this.pluginOptions=d.getSecureBbEditorOptions({attachment:!0,image:!0,math:!0,video:!0,contentMarket:!0}),!l.questionAttempt)throw new Error("Question attempt must be provided in attempt authoring mode.");this.insertQuestionSpecificTemplate(S),this.scope.questionTextEditorOptions={deleteOnNoText:!1,focusOnInit:!1,maintainOriginalTextOnRefresh:!0,onChangeFunc:()=>this.scope.$broadcast(r.EVENT_BBML_EDITOR_FORCE_UPDATE),placeholderKey:"components.directives.assessment-question.essay.placeholder.attempt",saveOnBlur:()=>!0,showCancelButton:()=>!1,showDeleteButton:()=>!1,showEditButton:()=>!1,showSaveButton:()=>!1,watchReadonly:"true"}}onEditorBlur(){this.isEditorActive=!1}onNewAttachmentSaving(){this.isNewAttachmentSaving=!0}onEditorFocus(){this.isInitializing=!1,this.isEditorActive=!0}initializeGivenAnswer(){const e=this.scope.$watch("questionAttempt.givenAnswer",(t=>{this.givenAnswer||(this.givenAnswer=t,e())}));this.scope.$watch("assessmentQuestion.givenAnswer.rawText",(e=>{"string"==typeof e&&(this.isInitializing?this.isInitializing=!1:this.scope.questionAttempt.givenAnswer.rawText=e)}))}persist(){return this.attemptIsDirty&&!this.isSaving?this.$q.when(this.toBbML(!0)).then((e=>(this.scope.questionAttempt.givenAnswer.rawText=e,super.persist()))):this.$q.resolve(null)}validate(){return!0}prepareGivenAnswer(e){this.isNewAttachmentSaving&&(this.isDisabled=!0),this.isSaving=!0}onPersistFinished(){super.onPersistFinished(),this.isSaving=!1,this.isDisabled=!1}setDirtyAndUpdateGivenAnswer(e){return this.isNewAttachmentSaving?(this.givenAnswer=e.givenAnswer,this.attemptIsDirty=!1,this.isNewAttachmentSaving=!1):this.attemptIsDirty=e.givenAnswer.rawText!==this.givenAnswer.rawText,e}};Q.$inject=[],Q=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$window")),Object(a.c)(2,Object(j.b)("$q")),Object(a.c)(3,Object(j.b)("attrs")),Object(a.c)(4,Object(j.b)(c.serviceName)),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)(u.serviceName)),Object(a.c)(8,Object(j.b)("scope")),Object(a.c)(9,Object(j.b)(b.b)),Object(a.c)(10,Object(j.b)(d.d)),Object(a.c)(11,Object(j.b)(i.b))],Q);let E=class extends o.f{constructor(e,t,s,n,i,a,o,r,c,l,u,b,d,p,m,h,g,v){if(super(e,t,s,n,i,a,o,r,c,l,u,p,b,d,m,h,g,v),this.$compile=e,this.$sce=t,this.$window=s,this.attrs=n,this.element=i,this.gradebookPermissionService=a,this.scope=o,this.timeout=r,this.localizeService=c,this.contextCourse=l,this.$ngRedux=u,this.ltiService=b,this.CloudStorageIntegrationModalService=d,this.scheduleTask=p,this.contextService=m,this.allyService=h,this.featureFlagService=g,this.fileUploadSettingsService=v,!o.gradedQuestionAttempt)throw new Error("Graded Question attempt must be provided in attempt grading mode.");this.modelAnswerMode=C.v.Grading,this.insertQuestionSpecificTemplate(x),this.constructViewHelper()}constructViewHelper(){}};E.$inject=[],E=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$sce")),Object(a.c)(2,Object(j.b)("$window")),Object(a.c)(3,Object(j.b)("attrs")),Object(a.c)(4,Object(j.b)("element")),Object(a.c)(5,Object(j.b)(l.b)),Object(a.c)(6,Object(j.b)("scope")),Object(a.c)(7,Object(j.b)(b.b)),Object(a.c)(8,Object(j.b)(u.serviceName)),Object(a.c)(9,Object(j.b)(p.e)),Object(a.c)(10,Object(j.b)("$ngRedux")),Object(a.c)(11,Object(j.b)(v.b)),Object(a.c)(12,Object(j.b)(g.b)),Object(a.c)(13,Object(j.b)(h.c)),Object(a.c)(14,Object(j.b)(m.b)),Object(a.c)(15,Object(j.b)(A.b)),Object(a.c)(16,Object(j.b)(f.b)),Object(a.c)(17,Object(j.b)(q.b))],E);let k=class extends o.g{constructor(e,t,s,n,i,a,o,r,c,l,u){if(super(e,t,s,n,i,a,r,c,l,o),this.$compile=e,this.$sce=t,this.$window=s,this.attrs=n,this.element=i,this.gradebookPermissionService=a,this.localizeService=o,this.scope=r,this.timeout=c,this.ultraState=l,this.contextCourse=u,!r.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");this.modelAnswerMode=C.v.Reviewing,this.insertQuestionSpecificTemplate(y)}};k.$inject=[],k=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$sce")),Object(a.c)(2,Object(j.b)("$window")),Object(a.c)(3,Object(j.b)("attrs")),Object(a.c)(4,Object(j.b)("element")),Object(a.c)(5,Object(j.b)(l.b)),Object(a.c)(6,Object(j.b)(u.serviceName)),Object(a.c)(7,Object(j.b)("scope")),Object(a.c)(8,Object(j.b)(b.b)),Object(a.c)(9,Object(j.b)(d.d)),Object(a.c)(10,Object(j.b)(p.e))],k);var T=s("nsO7"),I=s("g66W");class R{constructor(e,t,s){this.scope=e,this.localizeService=t,this.questionAttempt=s,this.orderedIdentifiers=[],this.translatedIdentifiers=new Map,this.questionTextElement=document.createElement("div");let n=this.questionAttempt.question.questionText.rawText;this.questionTextElement.innerHTML=n,this.answerElements.forEach((e=>{const t=e.innerHTML,i=I.a(t,/(^\[|]$)/g),a=this.translateIdentifier(i);if(i in s.givenAnswers){this.orderedIdentifiers.push(i),this.translatedIdentifiers.set(i,a);const s=this.questionAttempt.givenAnswers[i];e.innerHTML=s||a,n=n.replace(t,s||a)}})),this.questionText=n}translateIdentifier(e){const t=e.split("-")[1];return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"assessments.canvas.question.fimb.blank",params:{count:t},noEscape:!1,noWrap:!0})}get answerElements(){return Array.from(this.questionTextElement.querySelectorAll("a[data-bbfile]")).filter((e=>-1!==e.dataset.bbfile.indexOf("fimb-answer-value")&&0!==e.innerHTML.trim().length))}}let P=class extends R{constructor(e,t,s){super(e,t,s),this.scope=e,this.localizeService=t,this.questionAttempt=s}replaceAnswerInQuestionTextWithText(e,t){const s=this.answerElements;if(null==t||""===t){const t=this.orderedIdentifiers[e],n=this.translatedIdentifiers.get(t);s[e].innerHTML=n}else T.unescape(s[e].innerHTML)!==t&&(s[e].innerHTML=T.escape(t));this.questionText=this.questionTextElement.innerHTML}shouldShowFTUEOnAnswer(e,t){return e&&(1===t||1===this.orderedIdentifiers.length)}};P=Object(a.a)([Object(a.c)(0,Object(j.b)("scope")),Object(a.c)(1,Object(j.b)(u.serviceName)),Object(a.c)(2,Object(j.b)("questionAttempt"))],P);let _=class extends R{constructor(e,t,s,n,i){super(e,t,s.questionAttempt),this.scope=e,this.localizeService=t,this.gradedQuestionAttempt=s,this.showAnswerCorrectness=n,this.isCorrect=i,this.answersMap={};(this.questionAttempt.question.answers||[]).forEach((e=>{this.answersMap[e.ident]={values:e.answerValues.map((e=>e.value)),evaluationType:e.answerValues[0].evaluationType,caseSensitive:e.answerValues[0].caseSensitive}})),null!=this.questionAttempt.answerCorrectness?(this.answerElements.forEach(((e,t)=>{const s=e.dataset.bbfile,i=s.indexOf("fimb-answer-value"),a=this.orderedIdentifiers[t];if(n){const t=this.questionAttempt.answerCorrectness[a]?"correct":"incorrect";e.dataset.bbfile=`${s.slice(0,i)} ${t} ${s.slice(i)}`}})),this.questionText=this.questionTextElement.innerHTML):!this.showAnswerCorrectness&&this.isCorrect&&(this.answerElements.forEach((e=>{const t=e.dataset.bbfile,s=t.indexOf("fimb-answer-value");if(n){const n="correct";e.dataset.bbfile=`${t.slice(0,s)} ${n} ${t.slice(s)}`}})),this.questionText=this.questionTextElement.innerHTML)}alignIconTop(){return this.orderedIdentifiers.length>1||this.answersMap[this.orderedIdentifiers[0]]&&this.answersMap[this.orderedIdentifiers[0]].evaluationType!==O.F.Matches}showDetailsForAnswer(e){const t=this.answersMap[e];return null!=t&&(t.evaluationType===O.F.Exact||t.evaluationType===O.F.Contains)}};_=Object(a.a)([Object(a.c)(0,Object(j.b)("scope")),Object(a.c)(1,Object(j.b)(u.serviceName)),Object(a.c)(2,Object(j.b)("gradedQuestionAttempt")),Object(a.c)(3,Object(j.b)("showAnswerCorrectness")),Object(a.c)(4,Object(j.b)("isCorrect"))],_);var F=s("/UyG"),M=s("7TUR");class L extends o.a{createQuestion(e,t,s){const n=super.createQuestion(e,t,s);return n.questionType=O.Qb.FIMB,n}getAttemptAuthoringHandler(e,t,s){return this.$injector.instantiate(D,{attrs:s,element:t,scope:e})}getAttemptGradingHandler(e,t,s){return this.$injector.instantiate(H,{attrs:s,element:t,scope:e})}getAttemptReviewHandler(e,t,s){return this.$injector.instantiate(G,{attrs:s,element:t,scope:e})}}function N(e){const t=e;for(const s in e)null!=e[s]&&(t[s]=T.unescape(e[s]));return t}let D=class extends o.e{constructor(e,t,s,n,i,a,o,r,c,l,u){if(super(e,s,n,i,a,o,r,c,l,u),this.$compile=e,this.$injector=t,this.$window=s,this.attrs=n,this.CourseModel=i,this.element=a,this.gradebookPermissionService=o,this.localizeService=r,this.scope=c,this.timeout=l,this.ultraState=u,!c.questionAttempt)throw new Error("Question attempt must be provided in attempt authoring mode.");this.insertQuestionSpecificTemplate(F),this.viewHelper=t.instantiate(P,{questionAttempt:this.scope.questionAttempt,scope:c})}initializeGivenAnswer(){this.scope.questionAttempt.givenAnswers=N(this.scope.questionAttempt.givenAnswers),this.givenAnswer=this.scope.questionAttempt.givenAnswers,this.scope.$watchCollection("assessmentQuestion.givenAnswer",(()=>{this.scope.questionAttempt.givenAnswers=this.givenAnswer}))}prepareGivenAnswer(e){e.givenAnswers=T.mapValues(e.givenAnswers,(e=>null==e?"":e))}setDirtyAndUpdateGivenAnswer(e){return this.attemptIsDirty=!T.isEqual(e.givenAnswers,this.givenAnswer),e.givenAnswers=this.givenAnswer,e}shouldShowFIMBFTUEOnAnswer(e){const t=this.isFirstQuestionAttemptOfType();return this.viewHelper.shouldShowFTUEOnAnswer(t,e)}};D.$inject=[],D=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$injector")),Object(a.c)(2,Object(j.b)("$window")),Object(a.c)(3,Object(j.b)("attrs")),Object(a.c)(4,Object(j.b)(c.serviceName)),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)(u.serviceName)),Object(a.c)(8,Object(j.b)("scope")),Object(a.c)(9,Object(j.b)(b.b)),Object(a.c)(10,Object(j.b)(d.d))],D);let H=class extends o.f{constructor(e,t,s,n,i,a,o,r,c,l,u,b,d,p,m,h,g,v,w){if(super(e,s,n,i,a,o,r,c,l,u,b,m,d,p,h,g,v,w),this.$compile=e,this.$injector=t,this.$sce=s,this.$window=n,this.attrs=i,this.element=a,this.gradebookPermissionService=o,this.scope=r,this.timeout=c,this.localizeService=l,this.contextCourse=u,this.$ngRedux=b,this.ltiService=d,this.CloudStorageIntegrationModalService=p,this.scheduleTask=m,this.contextService=h,this.allyService=g,this.featureFlagService=v,this.fileUploadSettingsService=w,!r.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");this.insertQuestionSpecificTemplate(M),this.constructViewHelper()}constructViewHelper(){this.questionAttempt.givenAnswers=N(this.questionAttempt.givenAnswers),this.viewHelper=this.$injector.instantiate(_,{gradedQuestionAttempt:this.scope.gradedQuestionAttempt,showAnswerCorrectness:this.canShowCorrectAnswerRelatedDetail(),isCorrect:this.isCorrect(),scope:this.scope})}};H.$inject=[],H=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$injector")),Object(a.c)(2,Object(j.b)("$sce")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)("scope")),Object(a.c)(8,Object(j.b)(b.b)),Object(a.c)(9,Object(j.b)(u.serviceName)),Object(a.c)(10,Object(j.b)(p.e)),Object(a.c)(11,Object(j.b)("$ngRedux")),Object(a.c)(12,Object(j.b)(v.b)),Object(a.c)(13,Object(j.b)(g.b)),Object(a.c)(14,Object(j.b)(h.c)),Object(a.c)(15,Object(j.b)(m.b)),Object(a.c)(16,Object(j.b)(A.b)),Object(a.c)(17,Object(j.b)(f.b)),Object(a.c)(18,Object(j.b)(q.b))],H);let G=class extends o.g{constructor(e,t,s,n,i,a,o,r,c,l,u){if(super(e,s,n,i,a,o,c,l,u,r),this.$compile=e,this.$injector=t,this.$sce=s,this.$window=n,this.attrs=i,this.element=a,this.gradebookPermissionService=o,this.localizeService=r,this.scope=c,this.timeout=l,this.ultraState=u,!c.gradedQuestionAttempt)throw new Error("Question attempt must be provided in attempt grading mode.");this.insertQuestionSpecificTemplate(M),this.questionAttempt.givenAnswers=N(this.questionAttempt.givenAnswers),this.viewHelper=t.instantiate(_,{gradedQuestionAttempt:this.scope.gradedQuestionAttempt,showAnswerCorrectness:this.canShowCorrectAnswerRelatedDetail(),isCorrect:this.isCorrect(),scope:this.scope})}};G.$inject=[],G=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$injector")),Object(a.c)(2,Object(j.b)("$sce")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)(u.serviceName)),Object(a.c)(8,Object(j.b)("scope")),Object(a.c)(9,Object(j.b)(b.b)),Object(a.c)(10,Object(j.b)(d.d))],G);class B{constructor(e,t,s){this.scope=e,this.questionAttempt=t,this.bbLocalize=s,this.attempt=this.scope.attempt,this.prepareQuestionText()}prepareQuestionText(){let e=this.questionAttempt.question.questionText.rawText;Object.keys(this.questionAttempt.question.variableValues).forEach((t=>{const s=new RegExp(`\\[${t}\\]`,"g");e=e.replace(s,`${this.questionAttempt.question.variableValues[t]}`)})),this.questionTextWithVariableValues=e}getCorrectAnswerText(){return this.bbLocalize.translateSync({key:"components.directives.assessment-question.calculated-formula.review.correctAnswer",locale:this.bbLocalize.getLocale(this.scope),noEscape:!0,params:{correctAnswer:this.questionAttempt.correctAnswer}})}getRoundingInstructionsKey(){return`components.directives.assessment-question.calculated-formula.roundingInstructions.${this.questionAttempt.question.correctAnswerPrecision===O.n.Decimal?"decimal":"significantFigures"}.plural`}}B.$inject=["scope","questionAttempt",u.serviceName];var V=s("5O3l"),z=s("UQC1"),U=s("a6r6"),W=s("IbyE");class K extends o.a{createQuestion(e,t,s){const n=super.createQuestion(e,t,s);return n.questionType=O.Qb.CalculatedFormula,n}getAttemptAuthoringHandler(e,t,s){return this.$injector.instantiate(J,{attrs:s,element:t,scope:e})}getAttemptGradingHandler(e,t,s){return this.$injector.instantiate(Y,{attrs:s,element:t,scope:e})}getAttemptReviewHandler(e,t,s){return this.$injector.instantiate(X,{attrs:s,element:t,scope:e})}}let J=class extends o.e{constructor(e,t,s,n,i,a,o,r,c,l,u,b){if(super(e,n,i,a,o,r,c,l,u,b),this.$compile=e,this.$q=t,this.$injector=s,this.$window=n,this.attrs=i,this.CourseModel=a,this.element=o,this.gradebookPermissionService=r,this.localizeService=c,this.scope=l,this.timeout=u,this.ultraState=b,this.isInitializing=!0,!l.questionAttempt)throw new Error("Question attempt must be provided in attempt authoring mode.");this.insertQuestionSpecificTemplate(V),this.constructViewHelper()}constructViewHelper(){const e={questionAttempt:this.scope.questionAttempt,scope:this.scope},t=this.$injector.instantiate(B,e);this.viewHelper=t,this.convertMathToImage()}initializeGivenAnswer(){const e=this.scope.$watch("questionAttempt.givenAnswer",(t=>{this.givenAnswer||(this.givenAnswer=t,e())}));this.scope.$watch("assessmentQuestion.givenAnswer",(e=>{"string"==typeof e&&(this.isInitializing?this.isInitializing=!1:this.scope.questionAttempt.givenAnswer=e)}))}setDirtyAndUpdateGivenAnswer(e){return this.attemptIsDirty=e.givenAnswer!==this.givenAnswer,this.attemptIsDirty&&(e.givenAnswer=this.givenAnswer),e}persist(){return this.attemptIsDirty?super.persist():this.$q.resolve(null)}convertMathToImage(){new U.c({...W.kb,locale:this.localizeService.getLocale(this.scope)}).getImageMetadataFromMathML(this.scope.questionAttempt.question.answerFormula).then((({src:e,alt:t})=>{this.imageSource=e,this.imageAltText=t}))}};J.$inject=[],J=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$q")),Object(a.c)(2,Object(j.b)("$injector")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)(c.serviceName)),Object(a.c)(6,Object(j.b)("element")),Object(a.c)(7,Object(j.b)(l.b)),Object(a.c)(8,Object(j.b)(u.serviceName)),Object(a.c)(9,Object(j.b)("scope")),Object(a.c)(10,Object(j.b)(b.b)),Object(a.c)(11,Object(j.b)(d.d))],J);let Y=class extends o.f{constructor(e,t,s,n,i,a,o,r,c,l,u,b,d,p,m,h,g,v,w){if(super(e,s,n,i,a,o,r,c,l,u,b,d,p,m,h,g,v,w),this.$compile=e,this.$injector=t,this.$sce=s,this.$window=n,this.attrs=i,this.element=a,this.gradebookPermissionService=o,this.scope=r,this.timeout=c,this.localizeService=l,this.contextCourse=u,this.$ngRedux=b,this.scheduleTask=d,this.ltiService=p,this.CloudStorageIntegrationModalService=m,this.contextService=h,this.allyService=g,this.featureFlagService=v,this.fileUploadSettingsService=w,!r.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");this.insertQuestionSpecificTemplate(z),this.constructViewHelper()}constructViewHelper(){this.viewHelper=this.$injector.instantiate(B,{questionAttempt:this.questionAttempt,scope:this.scope})}};Y.$inject=[],Y=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$injector")),Object(a.c)(2,Object(j.b)("$sce")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)("scope")),Object(a.c)(8,Object(j.b)(b.b)),Object(a.c)(9,Object(j.b)(u.serviceName)),Object(a.c)(10,Object(j.b)(p.e)),Object(a.c)(11,Object(j.b)("$ngRedux")),Object(a.c)(12,Object(j.b)(h.c)),Object(a.c)(13,Object(j.b)(v.b)),Object(a.c)(14,Object(j.b)(g.b)),Object(a.c)(15,Object(j.b)(m.b)),Object(a.c)(16,Object(j.b)(A.b)),Object(a.c)(17,Object(j.b)(f.b)),Object(a.c)(18,Object(j.b)(q.b))],Y);let X=class extends o.g{constructor(e,t,s,n,i,a,o,r,c,l,u){if(super(e,s,n,i,a,o,r,c,l,u),this.$compile=e,this.$injector=t,this.$sce=s,this.$window=n,this.attrs=i,this.element=a,this.gradebookPermissionService=o,this.scope=r,this.timeout=c,this.ultraState=l,this.localizeService=u,!r.gradedQuestionAttempt)throw new Error("Question attempt must be provided in attempt grading mode.");this.insertQuestionSpecificTemplate(z),this.viewHelper=t.instantiate(B,{questionAttempt:this.questionAttempt,scope:r}),this.convertMathToImage()}convertMathToImage(){new U.c({...W.kb,locale:this.localizeService.getLocale(this.scope)}).getImageMetadataFromMathML(this.scope.gradedQuestionAttempt.questionAttempt.question.answerFormula).then((({src:e,alt:t})=>{this.imageSource=e,this.imageAltText=t}))}};X.$inject=[],X=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$injector")),Object(a.c)(2,Object(j.b)("$sce")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)("scope")),Object(a.c)(8,Object(j.b)(b.b)),Object(a.c)(9,Object(j.b)(d.d)),Object(a.c)(10,Object(j.b)(u.serviceName))],X);var Z=s("Xcvp"),ee=s("oXbF");class te extends o.a{createQuestion(e,t,s){const n=super.createQuestion(e,t,s);return n.questionType=O.Qb.CalculatedNumeric,n}getAttemptAuthoringHandler(e,t,s){return this.$injector.instantiate(se,{attrs:s,element:t,scope:e})}getAttemptGradingHandler(e,t,s){return this.$injector.instantiate(ne,{attrs:s,element:t,scope:e})}getAttemptReviewHandler(e,t,s){return this.$injector.instantiate(ie,{attrs:s,element:t,scope:e})}}let se=class extends o.e{constructor(e,t,s,n,i,a,o,r,c,l,u,b,d){super(e,n,i,a,o,r,c,l,u,b),this.$compile=e,this.$q=t,this.$injector=s,this.$window=n,this.attrs=i,this.CourseModel=a,this.element=o,this.gradebookPermissionService=r,this.localizeService=c,this.scope=l,this.timeout=u,this.ultraState=b,this.allyService=d,this.onAnswerChange=e=>{this.scope.$apply((()=>{this.scope.questionAttempt.givenAnswer=e,this.givenAnswer=e,this.attemptIsDirty=!0,this.scope.$broadcast("bb-autosave-save-trigger-debounce")}))},this.scope.allyService=this.allyService.getReactService(this.scope),this.insertQuestionSpecificTemplate(Z)}initializeGivenAnswer(){const e=this.scope.$watch("questionAttempt.givenAnswer",(t=>{this.givenAnswer||(this.givenAnswer=t,e())}))}setDirtyAndUpdateGivenAnswer(e){return this.attemptIsDirty=e.givenAnswer!==this.givenAnswer,this.attemptIsDirty&&(e.givenAnswer=this.givenAnswer),e}persist(){return this.attemptIsDirty?super.persist():this.$q.resolve(null)}};se.$inject=[],se=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$q")),Object(a.c)(2,Object(j.b)("$injector")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)(c.serviceName)),Object(a.c)(6,Object(j.b)("element")),Object(a.c)(7,Object(j.b)(l.b)),Object(a.c)(8,Object(j.b)(u.serviceName)),Object(a.c)(9,Object(j.b)("scope")),Object(a.c)(10,Object(j.b)(b.b)),Object(a.c)(11,Object(j.b)(d.d)),Object(a.c)(12,Object(j.b)(A.b))],se);let ne=class extends o.f{constructor(e,t,s,n,i,a,o,r,c,l,u,b,d,p,m,h,g,v,w){super(e,s,n,i,a,o,r,c,l,u,b,d,p,m,h,g,v,w),this.$compile=e,this.$injector=t,this.$sce=s,this.$window=n,this.attrs=i,this.element=a,this.gradebookPermissionService=o,this.scope=r,this.timeout=c,this.localizeService=l,this.contextCourse=u,this.$ngRedux=b,this.scheduleTask=d,this.ltiService=p,this.CloudStorageIntegrationModalService=m,this.contextService=h,this.allyService=g,this.featureFlagService=v,this.fileUploadSettingsService=w,this.scope.allyService=this.allyService.getReactService(this.scope),this.insertQuestionSpecificTemplate(ee)}constructViewHelper(){}};ne.$inject=[],ne=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$injector")),Object(a.c)(2,Object(j.b)("$sce")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)("scope")),Object(a.c)(8,Object(j.b)(b.b)),Object(a.c)(9,Object(j.b)(u.serviceName)),Object(a.c)(10,Object(j.b)(p.e)),Object(a.c)(11,Object(j.b)("$ngRedux")),Object(a.c)(12,Object(j.b)(h.c)),Object(a.c)(13,Object(j.b)(v.b)),Object(a.c)(14,Object(j.b)(g.b)),Object(a.c)(15,Object(j.b)(m.b)),Object(a.c)(16,Object(j.b)(A.b)),Object(a.c)(17,Object(j.b)(f.b)),Object(a.c)(18,Object(j.b)(q.b))],ne);let ie=class extends o.g{constructor(e,t,s,n,i,a,o,r,c,l,u,b){super(e,s,n,i,a,o,r,c,l,u),this.$compile=e,this.$injector=t,this.$sce=s,this.$window=n,this.attrs=i,this.element=a,this.gradebookPermissionService=o,this.scope=r,this.timeout=c,this.ultraState=l,this.localizeService=u,this.allyService=b,this.scope.allyService=this.allyService.getReactService(this.scope),this.insertQuestionSpecificTemplate(ee)}};ie.$inject=[],ie=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$injector")),Object(a.c)(2,Object(j.b)("$sce")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)("scope")),Object(a.c)(8,Object(j.b)(b.b)),Object(a.c)(9,Object(j.b)(d.d)),Object(a.c)(10,Object(j.b)(u.serviceName)),Object(a.c)(11,Object(j.b)(A.b))],ie);var ae=s("bd9L"),oe=s("fiT5"),re=s("StAH");class ce extends o.a{createQuestion(e,t,s){const n=super.createQuestion(e,t,s);return n.questionType=O.Qb.Hotspot,n}getAttemptAuthoringHandler(e,t,s){return this.$injector.instantiate(le,{attrs:s,element:t,scope:e})}getAttemptGradingHandler(e,t,s){return this.$injector.instantiate(ue,{attrs:s,element:t,scope:e})}getAttemptReviewHandler(e,t,s){return this.$injector.instantiate(be,{attrs:s,element:t,scope:e})}}let le=class extends o.e{constructor(e,t,s,n,i,a,o,r,c,l,u,b,d){super(e,n,i,a,o,r,c,l,u,b),this.$compile=e,this.$q=t,this.$injector=s,this.$window=n,this.attrs=i,this.CourseModel=a,this.element=o,this.gradebookPermissionService=r,this.localizeService=c,this.scope=l,this.timeout=u,this.ultraState=b,this.allyService=d,this.onAnswerChange=e=>{this.scope.$apply((()=>{this.scope.questionAttempt.givenAnswers=e,this.givenAnswer=e,this.attemptIsDirty=!0,this.scope.$broadcast(ae.a)}))},this.scope.allyService=this.allyService.getReactService(this.scope),this.insertQuestionSpecificTemplate(oe)}initializeGivenAnswer(){const e=this.scope.$watch("questionAttempt.givenAnswers",(t=>{this.givenAnswer||(this.givenAnswer=t,e())}))}setDirtyAndUpdateGivenAnswer(e){return this.attemptIsDirty=!this.givenAnswer||e.givenAnswers.some(((e,t)=>Object(C.G)(e.coordinates,this.givenAnswer[t].coordinates))),this.attemptIsDirty&&(e.givenAnswers=this.givenAnswer),e}};le.$inject=[],le=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$q")),Object(a.c)(2,Object(j.b)("$injector")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)(c.serviceName)),Object(a.c)(6,Object(j.b)("element")),Object(a.c)(7,Object(j.b)(l.b)),Object(a.c)(8,Object(j.b)(u.serviceName)),Object(a.c)(9,Object(j.b)("scope")),Object(a.c)(10,Object(j.b)(b.b)),Object(a.c)(11,Object(j.b)(d.d)),Object(a.c)(12,Object(j.b)(A.b))],le);let ue=class extends o.f{constructor(e,t,s,n,i,a,o,r,c,l,u,b,d,p,m,h,g,v,w){super(e,s,n,i,a,o,r,c,l,u,b,d,p,m,h,g,v,w),this.$compile=e,this.$injector=t,this.$sce=s,this.$window=n,this.attrs=i,this.element=a,this.gradebookPermissionService=o,this.scope=r,this.timeout=c,this.localizeService=l,this.contextCourse=u,this.$ngRedux=b,this.scheduleTask=d,this.ltiService=p,this.CloudStorageIntegrationModalService=m,this.contextService=h,this.allyService=g,this.featureFlagService=v,this.fileUploadSettingsService=w,this.isAttemptGradingView=!0,this.scope.allyService=this.allyService.getReactService(this.scope),this.insertQuestionSpecificTemplate(re)}constructViewHelper(){}};ue.$inject=[],ue=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$injector")),Object(a.c)(2,Object(j.b)("$sce")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)("scope")),Object(a.c)(8,Object(j.b)(b.b)),Object(a.c)(9,Object(j.b)(u.serviceName)),Object(a.c)(10,Object(j.b)(p.e)),Object(a.c)(11,Object(j.b)("$ngRedux")),Object(a.c)(12,Object(j.b)(h.c)),Object(a.c)(13,Object(j.b)(v.b)),Object(a.c)(14,Object(j.b)(g.b)),Object(a.c)(15,Object(j.b)(m.b)),Object(a.c)(16,Object(j.b)(A.b)),Object(a.c)(17,Object(j.b)(f.b)),Object(a.c)(18,Object(j.b)(q.b))],ue);let be=class extends o.g{constructor(e,t,s,n,i,a,o,r,c,l,u,b){super(e,s,n,i,a,o,r,c,l,u),this.$compile=e,this.$injector=t,this.$sce=s,this.$window=n,this.attrs=i,this.element=a,this.gradebookPermissionService=o,this.scope=r,this.timeout=c,this.ultraState=l,this.localizeService=u,this.allyService=b,this.scope.allyService=this.allyService.getReactService(this.scope),this.insertQuestionSpecificTemplate(re)}};be.$inject=[],be=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$injector")),Object(a.c)(2,Object(j.b)("$sce")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)("scope")),Object(a.c)(8,Object(j.b)(b.b)),Object(a.c)(9,Object(j.b)(d.d)),Object(a.c)(10,Object(j.b)(u.serviceName)),Object(a.c)(11,Object(j.b)(A.b))],be);class de{constructor(e,t){this.scope=e,this.questionAttempt=t,this.correctPairCount=this.calculateCorrectPairCount()}get totalPairCount(){return this.questionAttempt.question.prompts.length}calculateCorrectPairCount(){let e=0;return this.questionAttempt.question.prompts.forEach(((t,s)=>{t.matchingAnswerIndex===this.questionAttempt.givenAnswers[s]&&e++})),e}}de.$inject=["scope","questionAttempt"];var pe=s("1ZbL"),me=s("ERkP"),he=s("E1pj"),ge=s("GR+8"),ve=s("5MwF"),we=s("Q/M7"),Oe=s("0x+l"),je=s("VQ4P");const Ae=e=>{const{answeredCorrectly:t}=e,s=Object(je.a)(),n=t?"correct":"incorrect";return me.createElement("div",{className:"matching-attempt-review-pair__correctness-label"},s(`components.directives.assessment-question.status.${n}`))},fe=e=>{const{submittedAnswer:t,bbEditorPlugins:s,showTitle:n}=e,i=Object(je.a)();return me.createElement("div",null,n&&me.createElement("div",null,i("components.directives.assessment-question.matching.review.submitted-answer")),t?me.createElement(Qe,{plugins:s,bbml:t.answerText.rawText}):me.createElement("div",null,i("components.directives.assessment-question.matching.review.none-selected")))},qe=e=>{const{acceptableAnswer:t,bbEditorPlugins:s}=e,n=Object(je.a)();return me.createElement("div",null,me.createElement("div",null,n("components.directives.assessment-question.matching.review.acceptable-answer")),me.createElement(Qe,{plugins:s,bbml:t.answerText.rawText}))};var Ce=e=>{const{answers:t,allyService:s,bbEditorPlugins:n,givenAnswer:i,showResults:a,prompt:o,rootContentId:r}=e,c=void 0!==o.matchingAnswerIndex&&a,l=i===o.matchingAnswerIndex;let u;u=c?l?"correct":"incorrect":"ungraded";const b=l?me.createElement(Oe.Complete,{className:"matching-attempt-review-pair__correctness-icon js-correct-icon"}):me.createElement(Oe.Clear,{className:"matching-attempt-review-pair__correctness-icon js-incorrect-icon"});return me.createElement("div",{className:"matching-attempt-review-pair"},me.createElement("div",{className:"matching-attempt-review-pair__prompt"},me.createElement(Qe,{plugins:n,bbml:o.promptText.rawText,allyService:s,rootContentId:r})),me.createElement("div",{className:`matching-attempt-review-pair__answer matching-attempt-review-pair--${u}`},c&&b,me.createElement("div",null,c&&me.createElement(Ae,{answeredCorrectly:l}),(!l||!c)&&me.createElement(fe,{submittedAnswer:t[i],bbEditorPlugins:n,showTitle:c}),c&&me.createElement(qe,{acceptableAnswer:t[o.matchingAnswerIndex],bbEditorPlugins:n}))))},Se=s("MC1S"),xe=s("EGyI");class ye extends me.Component{constructor(){super(...arguments),this.onChange=e=>{const{onChange:t,index:s}=this.props;t(s,e.key)}}onRichContentClick(e){"A"===e.target.nodeName&&e.stopPropagation()}render(){const{answers:e,bbEditorPlugins:t,givenAnswer:s,prompt:n,questionIndex:i,UltraWindowSize:a,t:o}=this.props,r=me.createElement("div",null,me.createElement("div",{className:"sr-only"},o("components.directives.assessment-question.question-title",{index:i},{noWrap:!0})),a.isSmallBreakpoint()&&me.createElement("div",{className:"matching-attempt-authoring-pair__prompt-label",role:"presentation"},o("components.directives.assessment-question.matching.headers.prompt")),me.createElement("div",{className:"matching-attempt-authoring-pair__prompt"},me.createElement(Qe,{bbml:n.promptText.rawText,plugins:t,allyService:this.props.allyService,rootContentId:this.props.rootContentId})),a.isSmallBreakpoint()&&me.createElement("div",{className:"matching-attempt-authoring-pair__answer-label",role:"presentation"},o("components.directives.assessment-question.matching.headers.answer"))),c=e.map(((e,s)=>({key:s,content:me.createElement(Qe,{plugins:t,bbml:e.answerText.rawText,allyService:this.props.allyService,rootContentId:this.props.rootContentId})})));return me.createElement("div",{className:"matching-attempt-authoring-pair"},me.createElement(Se.RichDropdown,{calloutProps:{className:"matching-answer-rich-dropdown",directionalHintFixed:!1},defaultSelectedKey:s,label:r,onChanged:this.onChange,options:c,placeHolder:o("components.directives.assessment-question.matching.answer-dropdown-placeholder"),analyticsId:"components.directives.assessmentQuestion.matching.richDropdown"}))}}var $e=Object(he.windowResizingResponsiveComponentWrapper)(Object(xe.a)(ye));const Qe=({bbml:e,plugins:t,rootContentId:s,allyService:n})=>{const i={service:n,indexMap:new Map};return me.createElement(w.BbEditor,{bbml:e,isReadOnly:!0,plugins:t,rootContentId:s,ally:i})};class Ee extends me.Component{constructor(e){super(e),this.givenAnswers=[],this.context=this.props[m.b],this.contextCourse=this.props[p.e],this.toolbarPlugins=[Object(w.link)(),Object(w.image)(),Object(w.video)()],this.onChange=(e,t)=>{this.givenAnswers[e]=t,this.props.onChange(this.givenAnswers)};const{localize:{locale:t}}=e;this.givenAnswers=e.givenAnswers;const s={apiBasePath:Object(we.c)(ve.a.apiBasePath),courseId:this.contextCourse.courseId,xsrfToken:this.context.xsrfToken,locale:t};this.toolbarPlugins.push(Object(w.math)({...s})),this.toolbarPlugins.push(Object(w.insertLocalFile)({apiBasePath:Object(we.c)(ve.a.apiBasePath),xsrfToken:this.context.xsrfToken})),this.props.pluginsConfig&&this.props.pluginsConfig.contentMarket&&this.toolbarPlugins.push(Object(w.contentMarket)({...this.props.pluginsConfig.contentMarket,...s})),this.allyService=this.props.ally.getReactService(this.props.$scope)}render(){const{answers:e,givenAnswers:t,prompts:s,questionIndex:n,UltraWindowSize:i,localize:{translate:a}}=this.props;let o;this.props.ultraState&&this.props.ultraState.getCurrentResolvedValues&&this.props.ultraState.getCurrentResolvedValues().currentContent&&(o=this.props.ultraState.getCurrentResolvedValues().currentContent.id);const r=null==s?void 0:s.map(((s,a)=>me.createElement("li",{key:s.id,className:"matching-attempt__list-item"},me.createElement(ke,{answers:e,bbEditorPlugins:this.toolbarPlugins,index:a,givenAnswer:t[a],showResults:this.props.showResults,onChange:this.props.onChange&&this.onChange,questionIndex:n,prompt:s,UltraWindowSize:i,allyService:this.allyService,rootContentId:o})))),c=!!(null==s?void 0:s.find((e=>void 0!==e.matchingAnswerIndex)))?"components.directives.assessment-question.matching.headers.answers":"components.directives.assessment-question.matching.headers.submitted-answers";return me.createElement("div",{className:"matching-attempt__pairs"},!i.isSmallBreakpoint()&&me.createElement("div",{className:"matching-attempt__column-titles-container"},me.createElement("div",{className:"matching-attempt__column-title"},a("components.directives.assessment-question.matching.headers.prompts")),me.createElement("div",{className:"matching-attempt__column-title"},a(c))),me.createElement("ol",{className:"matching-attempt__list"},r))}}class ke extends me.Component{render(){const{onChange:e}=this.props;return null!=e?me.createElement($e,{...this.props,onChange:this.props.onChange}):me.createElement(Ce,{...this.props})}}var Te=Object(he.windowResizingResponsiveComponentWrapper)(Object(ge.a)(Ee)),Ie=s("/qTg"),Re=s("afiT");const Pe="ultra.components.directives.assessment.assessment-question.question-handlers.matching-question-handler";class _e extends o.a{createQuestion(e,t,s){const n=super.createQuestion(e,t,s);return n.questionType=O.Qb.Matching,n}getAttemptAuthoringHandler(e,t,s){return this.$injector.instantiate(Fe,{attrs:s,element:t,scope:e})}getAttemptGradingHandler(e,t,s){return this.$injector.instantiate(Me,{attrs:s,element:t,scope:e})}getAttemptReviewHandler(e,t,s){return this.$injector.instantiate(Le,{attrs:s,element:t,scope:e})}}let Fe=class extends o.e{constructor(e,t,s,n,i,a,o,r,c,l){if(super(e,t,s,n,i,a,o,r,c,l),this.$compile=e,this.$window=t,this.attrs=s,this.CourseModel=n,this.element=i,this.gradebookPermissionService=a,this.localizeService=o,this.scope=r,this.timeout=c,this.ultraState=l,this.onAnswersChange=e=>{this.scope.questionAttempt.givenAnswers=e,this.givenAnswer=e,this.attemptIsDirty=!0,this.scope.$broadcast("bb-autosave-save-trigger-debounce")},!r.questionAttempt)throw new Error("Question attempt must be provided in attempt authoring mode.");this.insertQuestionSpecificTemplate(Ie)}initializeGivenAnswer(){T.isEmpty(this.scope.questionAttempt.givenAnswers)&&T.times(this.scope.questionAttempt.question.prompts.length,(()=>{this.scope.questionAttempt.givenAnswers.push(null)})),this.givenAnswer=this.scope.questionAttempt.givenAnswers}setDirtyAndUpdateGivenAnswer(e){return this.attemptIsDirty=!T.isEqual(e.givenAnswers,this.givenAnswer),e.givenAnswers=this.givenAnswer,e}};Fe.$inject=[],Fe=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$window")),Object(a.c)(2,Object(j.b)("attrs")),Object(a.c)(3,Object(j.b)(c.serviceName)),Object(a.c)(4,Object(j.b)("element")),Object(a.c)(5,Object(j.b)(l.b)),Object(a.c)(6,Object(j.b)(u.serviceName)),Object(a.c)(7,Object(j.b)("scope")),Object(a.c)(8,Object(j.b)(b.b)),Object(a.c)(9,Object(j.b)(d.d))],Fe);let Me=class extends o.f{constructor(e,t,s,n,i,a,o,r,c,l,u,b,d,p,m,h,g,v,w){if(super(e,s,n,i,a,o,r,c,l,u,b,m,d,p,h,g,v,w),this.$compile=e,this.$injector=t,this.$sce=s,this.$window=n,this.attrs=i,this.element=a,this.gradebookPermissionService=o,this.scope=r,this.timeout=c,this.localizeService=l,this.contextCourse=u,this.$ngRedux=b,this.ltiService=d,this.CloudStorageIntegrationModalService=p,this.scheduleTask=m,this.contextService=h,this.allyService=g,this.featureFlagService=v,this.fileUploadSettingsService=w,!r.gradedQuestionAttempt)throw new Error("Graded Question attempt must be provided in attempt grading mode.");this.insertQuestionSpecificTemplate(Re),this.constructViewHelper()}constructViewHelper(){this.viewHelper=this.$injector.instantiate(de,{questionAttempt:this.questionAttempt,scope:this.scope})}};Me.$inject=[],Me=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$injector")),Object(a.c)(2,Object(j.b)("$sce")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)("scope")),Object(a.c)(8,Object(j.b)(b.b)),Object(a.c)(9,Object(j.b)(u.serviceName)),Object(a.c)(10,Object(j.b)(p.e)),Object(a.c)(11,Object(j.b)("$ngRedux")),Object(a.c)(12,Object(j.b)(v.b)),Object(a.c)(13,Object(j.b)(g.b)),Object(a.c)(14,Object(j.b)(h.c)),Object(a.c)(15,Object(j.b)(m.b)),Object(a.c)(16,Object(j.b)(A.b)),Object(a.c)(17,Object(j.b)(f.b)),Object(a.c)(18,Object(j.b)(q.b))],Me);let Le=class extends o.g{constructor(e,t,s,n,i,a,o,r,c,l,u){if(super(e,s,n,i,a,o,c,l,u,r),this.$compile=e,this.$injector=t,this.$sce=s,this.$window=n,this.attrs=i,this.element=a,this.gradebookPermissionService=o,this.localizeService=r,this.scope=c,this.timeout=l,this.ultraState=u,!c.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");this.insertQuestionSpecificTemplate(Re),this.viewHelper=t.instantiate(de,{questionAttempt:this.questionAttempt,scope:c})}};Le.$inject=[],Le=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$injector")),Object(a.c)(2,Object(j.b)("$sce")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)(u.serviceName)),Object(a.c)(8,Object(j.b)("scope")),Object(a.c)(9,Object(j.b)(b.b)),Object(a.c)(10,Object(j.b)(d.d))],Le);const Ne={Class:Te,bindingNames:["answers","givenAnswers","showResults","onChange","prompts","questionIndex","pluginsConfig"],injectNames:["$scope",m.b,u.serviceName,p.e,d.d,A.b],renderLocalized:!0,withThemeProvider:!1};n.module(Pe,[]).component("bbMatchingAttempt",Object(pe.a)(Ne));var De=s("+O05"),He=(s("xXFZ"),s("2MQt"),s("uEsA"),s("LRgG"),s("gORw"),s("dV61"),s("+sRu")),Ge=s("Xq/A"),Be=s("Fdwu");let Ve=class{constructor(e,t,s,n,i,a){this.questionAttempt=e,this.showCorrectAnswer=t,this.isCorrect=s,this.scope=n,this.bbLocalize=i,this.bbmlEditor=a,this.correctAnswers=[],this.setupCorrectAnswers(),this.hideAnswerOptions=this.isCorrect}isOnlyPartialCredit(){return!this.questionAttempt.correct&&this.questionAttempt.partiallyCorrect}toggleAnswerOptions(){this.hideAnswerOptions=!this.hideAnswerOptions}showIncorrectIndicator(e){var t;const s=this.questionAttempt.givenAnswer[e],n=null===(t=this.questionAttempt.question.answers[e])||void 0===t?void 0:t.correctAnswer;return this.showCorrectAnswer&&s&&!n}getTruncatedAnswerText(e){return I.f(e,25)}setupCorrectAnswers(){return this.questionAttempt.question.answers.forEach(((e,t)=>{if(e.correctAnswer){const s=this.bbmlEditor.convertBbMLToContentBlocks(e.answerText.rawText).contentBlocks[0];this.correctAnswers.push({answer:e,index:t,displayText:s?s.textBlock.replace(Be.a,""):""})}})),this.formatAnswerString(),this.correctAnswers}formatAnswerString(){const e=[];this.correctAnswers.forEach((t=>{const s="("+this.getOptionLabelByIndex(t.index)+") "+this.getTruncatedAnswerText(t.displayText);e.push(s)})),this.bbLocalize.formatItems(e,e.length,null,!1,{noWrap:!0}).then((e=>{e="<strong>"+e+"</strong>",this.isCorrect?this.formattedAnswerString=e:this.formattedAnswerString=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.assessment-question.multiple-answer.review.correct-answer.plural",params:{count:this.correctAnswers.length,answer:e},noWrap:!0,noEscape:!0})}))}getOptionLabelByIndex(e){return String.fromCharCode(65+e)}};Ve=Object(a.a)([Object(a.c)(0,Object(j.b)("questionAttempt")),Object(a.c)(1,Object(j.b)("showCorrectAnswer")),Object(a.c)(2,Object(j.b)("isCorrect")),Object(a.c)(3,Object(j.b)("scope")),Object(a.c)(4,Object(j.b)(u.serviceName)),Object(a.c)(5,Object(j.b)(Ge.c))],Ve);var ze,Ue=s("LQXi"),We=s("I5V3");class Ke extends o.a{createQuestion(e,t,s){const n=super.createQuestion(e,t,s);return n.questionType=O.Qb.Multiple,n.singleCorrectAnswer=!0,n}getAttemptAuthoringHandler(e,t,s){return this.$injector.instantiate(Je,{attrs:s,element:t,scope:e})}getAttemptGradingHandler(e,t,s){return this.$injector.instantiate(Ye,{attrs:s,element:t,scope:e})}getAttemptReviewHandler(e,t,s){return this.$injector.instantiate(Xe,{attrs:s,element:t,scope:e})}}!function(e){e.NoPartialCredit="NO_PARTIAL_CREDIT",e.PartialCreditNoPenalty="PARTIAL_CREDIT_NO_PENALTY",e.PartialCreditWithPenalty="PARTIAL_CREDIT_WITH_PENALTY"}(ze||(ze={}));let Je=class extends o.e{constructor(e,t,s,n,i,a,o,r,c,l){if(super(e,t,s,n,i,a,o,r,c,l),this.$compile=e,this.$window=t,this.attrs=s,this.CourseModel=n,this.element=i,this.gradebookPermissionService=a,this.localizeService=o,this.scope=r,this.timeout=c,this.ultraState=l,!r.questionAttempt)throw new Error("Question attempt must be provided in attempt authoring mode.");this.insertQuestionSpecificTemplate(Ue)}onSingleAnswerInputChanged(e){this.givenAnswer=this.givenAnswer.map(((t,s)=>e===s)),this.scope.questionAttempt.givenAnswer=this.givenAnswer,this.attemptIsDirty=!0,this.scope.$broadcast(ae.a)}initializeGivenAnswer(){T.isEmpty(this.scope.questionAttempt.givenAnswer)&&T.times(this.scope.questionAttempt.question.answersCount,(()=>{this.scope.questionAttempt.givenAnswer.push(!1)})),this.givenAnswer=this.scope.questionAttempt.givenAnswer,this.scope.$watchCollection("assessmentQuestion.givenAnswer",(()=>{this.scope.questionAttempt.givenAnswer=this.givenAnswer}))}setDirtyAndUpdateGivenAnswer(e){return this.attemptIsDirty=!T.isEqual(e.givenAnswer,this.givenAnswer),this.attemptIsDirty&&(e.givenAnswer=this.givenAnswer),e}};Je.$inject=[],Je=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$window")),Object(a.c)(2,Object(j.b)("attrs")),Object(a.c)(3,Object(j.b)(c.serviceName)),Object(a.c)(4,Object(j.b)("element")),Object(a.c)(5,Object(j.b)(l.b)),Object(a.c)(6,Object(j.b)(u.serviceName)),Object(a.c)(7,Object(j.b)("scope")),Object(a.c)(8,Object(j.b)(b.b)),Object(a.c)(9,Object(j.b)(d.d))],Je);let Ye=class extends o.f{constructor(e,t,s,n,i,a,o,r,c,l,u,b,d,p,m,h,g,v,w){if(super(e,s,n,i,a,o,r,c,l,u,b,m,d,p,h,g,v,w),this.$compile=e,this.$injector=t,this.$sce=s,this.$window=n,this.attrs=i,this.element=a,this.gradebookPermissionService=o,this.scope=r,this.timeout=c,this.localizeService=l,this.contextCourse=u,this.$ngRedux=b,this.ltiService=d,this.CloudStorageIntegrationModalService=p,this.scheduleTask=m,this.contextService=h,this.allyService=g,this.featureFlagService=v,this.fileUploadSettingsService=w,!r.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");this.insertQuestionSpecificTemplate(We),this.constructViewHelper()}showAnswerOptions(){return!this.viewHelper.hideAnswerOptions}getAnswerChoiceStyles(e){const t=this.questionAttempt.givenAnswer[e],s=this.questionAttempt.question.answers[e].correctAnswer;return this.getAnswerStyles(t,s,!0)}constructViewHelper(){this.viewHelper=this.$injector.instantiate(Ve,{questionAttempt:this.questionAttempt,showCorrectAnswer:!0,isCorrect:this.isCorrect(),scope:this.scope})}};Ye.$inject=[],Ye=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$injector")),Object(a.c)(2,Object(j.b)("$sce")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)("scope")),Object(a.c)(8,Object(j.b)(b.b)),Object(a.c)(9,Object(j.b)(u.serviceName)),Object(a.c)(10,Object(j.b)(p.e)),Object(a.c)(11,Object(j.b)("$ngRedux")),Object(a.c)(12,Object(j.b)(v.b)),Object(a.c)(13,Object(j.b)(g.b)),Object(a.c)(14,Object(j.b)(h.c)),Object(a.c)(15,Object(j.b)(m.b)),Object(a.c)(16,Object(j.b)(A.b)),Object(a.c)(17,Object(j.b)(f.b)),Object(a.c)(18,Object(j.b)(q.b))],Ye);let Xe=class extends o.g{constructor(e,t,s,n,i,a,o,r,c,l,u){if(super(e,s,n,i,a,o,c,l,u,r),this.$compile=e,this.$injector=t,this.$sce=s,this.$window=n,this.attrs=i,this.element=a,this.gradebookPermissionService=o,this.localizeService=r,this.scope=c,this.timeout=l,this.ultraState=u,!c.gradedQuestionAttempt)throw new Error("Question attempt must be provided in attempt grading mode.");this.insertQuestionSpecificTemplate(We),this.viewHelper=t.instantiate(Ve,{questionAttempt:this.questionAttempt,showCorrectAnswer:this.canShowCorrectAnswerRelatedDetail(),isCorrect:this.isCorrect(),scope:c})}getAnswerChoiceStyles(e){const t=this.questionAttempt.givenAnswer[e];if(!De.a.studentCanViewAttemptResults(this.attempt))return t?`${He.a.IsSelected} ${He.a.AnswerSelectedNotPosted}`:He.a.AnswerNotSelected;const s=this.questionAttempt.question.answers[e].correctAnswer,n=this.canShowCorrectAnswerRelatedDetail();return this.getAnswerStyles(t,s,n)}showAnswerOptions(){return!De.a.studentCanViewAttemptResults(this.attempt)||!this.viewHelper.hideAnswerOptions||this.canShowCorrectAnswerRelatedDetail()&&!this.canShowQuestionScoreRelatedDetail()}};Xe.$inject=[],Xe=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$injector")),Object(a.c)(2,Object(j.b)("$sce")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)(u.serviceName)),Object(a.c)(8,Object(j.b)("scope")),Object(a.c)(9,Object(j.b)(b.b)),Object(a.c)(10,Object(j.b)(d.d))],Xe);var Ze,et=s("r8DE"),tt=s("nvgb"),st=s("APyD"),nt=s("dEnf");!function(e){e.FileAttachment="presentation-file-attachment",e.FileInline="presentation-file-inline",e.FileInlineAudio="presentation-file-inline-audio",e.Text="presentation-text"}(Ze||(Ze={}));class it extends o.a{createQuestion(e,t,s){const n=super.createQuestion(e,t,s);return n.questionType=O.Qb.PresentationOnly,n.subType=s?s.subType:O.Pb.Text,s&&s.file&&(n.initialUploadFile=s.file),n}getQuestionReviewHandler(e,t,s){return this.$injector.instantiate(at,{attrs:s,element:t,scope:e})}getAttemptAuthoringHandler(e,t,s){return this.$injector.instantiate(ot,{attrs:s,element:t,scope:e})}getAttemptGradingHandler(e,t,s){return this.$injector.instantiate(rt,{attrs:s,element:t,scope:e})}getAttemptReviewHandler(e,t,s){return this.$injector.instantiate(ct,{attrs:s,element:t,scope:e})}}let at=class extends o.h{constructor(e,t,s,n,i,a,o,r,c,l){if(super(e,t,s,n,i,a,r,c,o,l,{hasPoints:!1,hasQuestionCountTitle:!1,points:0,showQuestionControls:!1}),this.$compile=e,this.$sce=t,this.$window=s,this.attrs=n,this.element=i,this.gradebookPermissionService=a,this.localizeService=o,this.scope=r,this.timeout=c,this.ultraState=l,!r.question)throw new Error("Question must be provided in question review mode.");this.insertQuestionSpecificTemplate(et)}};at.$inject=[],at=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$sce")),Object(a.c)(2,Object(j.b)("$window")),Object(a.c)(3,Object(j.b)("attrs")),Object(a.c)(4,Object(j.b)("element")),Object(a.c)(5,Object(j.b)(l.b)),Object(a.c)(6,Object(j.b)(u.serviceName)),Object(a.c)(7,Object(j.b)("scope")),Object(a.c)(8,Object(j.b)(b.b)),Object(a.c)(9,Object(j.b)(d.d))],at);let ot=class extends o.e{constructor(e,t,s,n,i,a,o,r,c,l){if(super(e,t,s,n,i,a,o,r,c,l,{hasPoints:!1,hasQuestionCountTitle:!1,points:0,showQuestionControls:!1}),this.$compile=e,this.$window=t,this.attrs=s,this.CourseModel=n,this.element=i,this.gradebookPermissionService=a,this.localizeService=o,this.scope=r,this.timeout=c,this.ultraState=l,!r.questionAttempt)throw new Error("Question attempt must be provided in attempt authoring mode.");this.insertQuestionSpecificTemplate(tt)}initializeGivenAnswer(){}setDirtyAndUpdateGivenAnswer(){}};ot.$inject=[],ot=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$window")),Object(a.c)(2,Object(j.b)("attrs")),Object(a.c)(3,Object(j.b)(c.serviceName)),Object(a.c)(4,Object(j.b)("element")),Object(a.c)(5,Object(j.b)(l.b)),Object(a.c)(6,Object(j.b)(u.serviceName)),Object(a.c)(7,Object(j.b)("scope")),Object(a.c)(8,Object(j.b)(b.b)),Object(a.c)(9,Object(j.b)(d.d))],ot);let rt=class extends o.f{constructor(e,t,s,n,i,a,o,r,c,l,u,b,d,p,m,h,g,v){if(super(e,t,s,n,i,a,o,r,c,l,u,p,b,d,m,h,g,v,{hasPoints:!1,hasQuestionCountTitle:!1,points:0,showQuestionControls:!1}),this.$compile=e,this.$sce=t,this.$window=s,this.attrs=n,this.element=i,this.gradebookPermissionService=a,this.scope=o,this.timeout=r,this.localizeService=c,this.contextCourse=l,this.$ngRedux=u,this.ltiService=b,this.CloudStorageIntegrationModalService=d,this.scheduleTask=p,this.contextService=m,this.allyService=h,this.featureFlagService=g,this.fileUploadSettingsService=v,!o.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");this.insertQuestionSpecificTemplate(st)}constructViewHelper(){}};rt.$inject=[],rt=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$sce")),Object(a.c)(2,Object(j.b)("$window")),Object(a.c)(3,Object(j.b)("attrs")),Object(a.c)(4,Object(j.b)("element")),Object(a.c)(5,Object(j.b)(l.b)),Object(a.c)(6,Object(j.b)("scope")),Object(a.c)(7,Object(j.b)(b.b)),Object(a.c)(8,Object(j.b)(u.serviceName)),Object(a.c)(9,Object(j.b)(p.e)),Object(a.c)(10,Object(j.b)("$ngRedux")),Object(a.c)(11,Object(j.b)(v.b)),Object(a.c)(12,Object(j.b)(g.b)),Object(a.c)(13,Object(j.b)(h.c)),Object(a.c)(14,Object(j.b)(m.b)),Object(a.c)(15,Object(j.b)(A.b)),Object(a.c)(16,Object(j.b)(f.b)),Object(a.c)(17,Object(j.b)(q.b))],rt);let ct=class extends o.g{constructor(e,t,s,n,i,a,o,r,c,l){if(super(e,t,s,n,i,a,r,c,l,o,{hasPoints:!1,hasQuestionCountTitle:!1,points:0,showQuestionControls:!1}),this.$compile=e,this.$sce=t,this.$window=s,this.attrs=n,this.element=i,this.gradebookPermissionService=a,this.localizeService=o,this.scope=r,this.timeout=c,this.ultraState=l,!r.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");this.insertQuestionSpecificTemplate(nt)}};ct.$inject=[],ct=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$sce")),Object(a.c)(2,Object(j.b)("$window")),Object(a.c)(3,Object(j.b)("attrs")),Object(a.c)(4,Object(j.b)("element")),Object(a.c)(5,Object(j.b)(l.b)),Object(a.c)(6,Object(j.b)(u.serviceName)),Object(a.c)(7,Object(j.b)("scope")),Object(a.c)(8,Object(j.b)(b.b)),Object(a.c)(9,Object(j.b)(d.d))],ct);class lt{constructor(e,t,s,n,i){this.scope=e,this.bbLocalize=t,this.question=s,this.questionAttempt=n,this.showCorrectAnswer=i,this.setAnswerStringLabels()}setAnswerStringLabels(){this.hasUserEnteredLabels()?(this.trueAnswerOptionLabel=this.question.userEnteredCorrectAnswerLabel,this.falseAnswerOptionLabel=this.question.userEnteredIncorrectAnswerLabel):(this.trueAnswerOptionLabel=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:`components.directives.assessment-question.true-false.answer-type.${this.question.answerType}.true.label`}),this.falseAnswerOptionLabel=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:`components.directives.assessment-question.true-false.answer-type.${this.question.answerType}.false.label`}))}isAnswerChoiceCorrect(e){return this.questionAttempt.question.answer===e}isAnswerChoiceSelected(e){return this.questionAttempt.givenAnswer===e}showIncorrectIndicator(e){const t=this.isAnswerChoiceSelected(e),s=this.isAnswerChoiceCorrect(e);return this.showCorrectAnswer&&t&&!s}hasUserEnteredLabels(){return this.question.answerType===O.hc.UserEnteredLabels}get answerDescriptionKey(){return this.question.answer?"components.directives.assessment-question.true-false.review.description-true":"components.directives.assessment-question.true-false.review.description-false"}}lt.$inject=["scope",u.serviceName,"question","questionAttempt","showCorrectAnswer"];s("U+0H");var ut=s("Ee/I"),bt=s("ys4f");class dt extends o.a{createQuestion(e,t,s){const n=super.createQuestion(e,t,s);return n.questionType=O.Qb.Either,n.answer=!0,n.answerType=O.hc.TrueFalse,n}getAttemptAuthoringHandler(e,t,s){return this.$injector.instantiate(pt,{attrs:s,element:t,scope:e})}getAttemptGradingHandler(e,t,s){return this.$injector.instantiate(mt,{attrs:s,element:t,scope:e})}getAttemptReviewHandler(e,t,s){return this.$injector.instantiate(ht,{attrs:s,element:t,scope:e})}}let pt=class extends o.e{constructor(e,t,s,n,i,a,o,r,c,l,u){if(super(e,s,n,i,a,o,r,c,l,u),this.$compile=e,this.$injector=t,this.$window=s,this.attrs=n,this.CourseModel=i,this.element=a,this.gradebookPermissionService=o,this.localizeService=r,this.scope=c,this.timeout=l,this.ultraState=u,!c.questionAttempt)throw new Error("Question attempt must be provided in attempt authoring mode.");this.scope.$watch((()=>this.scope.questionAttempt.givenAnswer),((e,t)=>{e!==t&&T.isUndefined(t)&&this.getCurrentForm()[this.getFormInputName()].$setDirty(!0)})),this.insertQuestionSpecificTemplate(ut),this.viewHelper=t.instantiate(lt,{question:this.scope.questionAttempt.question,questionAttempt:null,showCorrectAnswer:null,scope:c})}getFormInputName(){return`${this.elementId}true-false-answers-choice`}initializeGivenAnswer(){this.givenAnswer=this.scope.questionAttempt.givenAnswer,this.scope.$watch("assessmentQuestion.givenAnswer",(()=>{this.scope.questionAttempt.givenAnswer=this.givenAnswer}))}setDirtyAndUpdateGivenAnswer(e){return this.attemptIsDirty=e.givenAnswer!==this.givenAnswer,e.givenAnswer=this.givenAnswer,e}};pt.$inject=[],pt=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$injector")),Object(a.c)(2,Object(j.b)("$window")),Object(a.c)(3,Object(j.b)("attrs")),Object(a.c)(4,Object(j.b)(c.serviceName)),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)(u.serviceName)),Object(a.c)(8,Object(j.b)("scope")),Object(a.c)(9,Object(j.b)(b.b)),Object(a.c)(10,Object(j.b)(d.d))],pt);let mt=class extends o.f{constructor(e,t,s,n,i,a,o,r,c,l,u,b,d,p,m,h,g,v,w){if(super(e,s,n,i,a,o,r,c,l,u,b,m,d,p,h,g,v,w),this.$compile=e,this.$injector=t,this.$sce=s,this.$window=n,this.attrs=i,this.element=a,this.gradebookPermissionService=o,this.scope=r,this.timeout=c,this.localizeService=l,this.contextCourse=u,this.$ngRedux=b,this.ltiService=d,this.CloudStorageIntegrationModalService=p,this.scheduleTask=m,this.contextService=h,this.allyService=g,this.featureFlagService=v,this.fileUploadSettingsService=w,!r.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");this.insertQuestionSpecificTemplate(bt),this.constructViewHelper()}getAnswerChoiceStyles(e){const t=this.viewHelper.isAnswerChoiceSelected(e),s=this.viewHelper.isAnswerChoiceCorrect(e);return this.getAnswerStyles(t,s,!0)}constructViewHelper(){this.viewHelper=this.$injector.instantiate(lt,{question:this.questionAttempt.question,questionAttempt:this.questionAttempt,showCorrectAnswer:!0,scope:this.scope})}};mt.$inject=[],mt=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$injector")),Object(a.c)(2,Object(j.b)("$sce")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)("scope")),Object(a.c)(8,Object(j.b)(b.b)),Object(a.c)(9,Object(j.b)(u.serviceName)),Object(a.c)(10,Object(j.b)(p.e)),Object(a.c)(11,Object(j.b)("$ngRedux")),Object(a.c)(12,Object(j.b)(v.b)),Object(a.c)(13,Object(j.b)(g.b)),Object(a.c)(14,Object(j.b)(h.c)),Object(a.c)(15,Object(j.b)(m.b)),Object(a.c)(16,Object(j.b)(A.b)),Object(a.c)(17,Object(j.b)(f.b)),Object(a.c)(18,Object(j.b)(q.b))],mt);let ht=class extends o.g{constructor(e,t,s,n,i,a,o,r,c,l,u){if(super(e,s,n,i,a,o,c,l,u,r),this.$compile=e,this.$injector=t,this.$sce=s,this.$window=n,this.attrs=i,this.element=a,this.gradebookPermissionService=o,this.localizeService=r,this.scope=c,this.timeout=l,this.ultraState=u,!c.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");this.insertQuestionSpecificTemplate(bt),this.viewHelper=t.instantiate(lt,{question:this.questionAttempt.question,questionAttempt:this.questionAttempt,showCorrectAnswer:this.canShowCorrectAnswerRelatedDetail(),scope:c})}getAnswerChoiceStyles(e){const t=this.viewHelper.isAnswerChoiceSelected(e);if(!De.a.studentCanViewAttemptResults(this.attempt))return t?`${He.a.IsSelected} ${He.a.AnswerSelectedNotPosted}`:He.a.AnswerNotSelected;const s=this.viewHelper.isAnswerChoiceCorrect(e),n=this.canShowCorrectAnswerRelatedDetail();return this.getAnswerStyles(t,s,n)}};ht.$inject=[],ht=Object(a.a)([Object(a.c)(0,Object(j.b)("$compile")),Object(a.c)(1,Object(j.b)("$injector")),Object(a.c)(2,Object(j.b)("$sce")),Object(a.c)(3,Object(j.b)("$window")),Object(a.c)(4,Object(j.b)("attrs")),Object(a.c)(5,Object(j.b)("element")),Object(a.c)(6,Object(j.b)(l.b)),Object(a.c)(7,Object(j.b)(u.serviceName)),Object(a.c)(8,Object(j.b)("scope")),Object(a.c)(9,Object(j.b)(b.b)),Object(a.c)(10,Object(j.b)(d.d))],ht),s.d(t,"a",(function(){return gt})),s.d(t,"b",(function(){return vt}));const gt="ultra.components.directives.assessment.assessment-question.question-handlers",vt="questionFactory";n.module(gt,[i.a,u.moduleName,Pe,h.b]).factory(vt,["$injector",u.serviceName,(e,t)=>{const s=t.loadBundle("components/directives/assessment/assessment-question");return{getQuestionHandler:(t,n,i)=>s.then((()=>{let s;s=t.gradedQuestionAttempt?t.gradedQuestionAttempt.questionAttempt.questionType:t.question?t.question.questionType:t.questionAttempt.questionType;return function(t){switch(t){case O.Qb.Essay:return e.instantiate($);case O.Qb.PresentationOnly:return e.instantiate(it);case O.Qb.Multiple:return e.instantiate(Ke);case O.Qb.Either:return e.instantiate(dt);case O.Qb.FIMB:return e.instantiate(L);case O.Qb.Matching:return e.instantiate(_e);case O.Qb.CalculatedFormula:return e.instantiate(K);case O.Qb.CalculatedNumeric:return e.instantiate(te);case O.Qb.Hotspot:return e.instantiate(ce);default:throw new Error("Unsupported question type:"+t)}}(s).getHandlerByMode(t,n,i)}))}}])},fiT5:function(e,t){e.exports='<div class="hotspot-question-container hotspot-attempt-authoring guidance-wrapper">\n  <bb-question-attempt\n    question="::questionAttempt.question"\n    given-answer="assessmentQuestion.givenAnswer"\n    question-number="::questionAttempt.visibleQuestionNumber"\n    on-answer-change="::assessmentQuestion.onAnswerChange"\n    ally-service="::allyService"\n    content-id="::contentId"\n    plugins-config="::automatedFeedbackEditorPluginOptions"\n  ></bb-question-attempt>\n</div>\n'},hG4E:function(e,t){e.exports='<div id="{{::bbmlEditor.bbmlEditorId}}" class="freeform-response-editor js-bbml-editor">\n  <div ng-show="bbmlEditor.showOverflowMenu()" class="content-item-controls overflow-menu-container" bb-foundation-defer>\n    <bb-overflow-menu\n      ng-if="bbmlEditor.overflowMenuItems"\n      element-id="{{\'overflow-menu\' + bbmlEditor.bbmlEditorId}}"\n      menu-items="bbmlEditor.overflowMenuItems"\n      analytics-id-tag-prefix="components.directives.attempt-canvas.freeform-response.overflowMenu">\n    </bb-overflow-menu>\n  </div>\n  <form bb-autosave\n        save-func="bbmlEditor.save()"\n        auto-save-context-id="freeform"\n        auto-save-context-area="{{::autoSaveContextArea}}"\n        validation-func="bbmlEditor.isValid()"\n        use-save-numbers="true"\n        novalidate\n        name="editorForm">\n    <bb-rich-text-editor\n      ng-class="{\'bb-editor-read-only-with-overflow-menu\': bbmlEditor.showOverflowMenu()}"\n      class="bb-text-editor-controls-wrapper"\n      name="responseEditor"\n      ng-model="bbmlEditor.rawText"\n      is-toolbar-hidden="!bbmlEditor.isEditing"\n      is-disabled="bbmlEditor.isDisabled"\n      on-blur="bbmlEditor.onBlur()"\n      on-focus="bbmlEditor.focusEditor()"\n      on-change="bbmlEditor.onChange"\n      on-new-attachment-save-pressed="bbmlEditor.onNewAttachmentSaving()"\n      plugin-options="bbmlEditor.pluginOptions"\n      show-word-count="isPrivileged"\n      expand-inline-files-on-load="expandInlineFilesOnLoad"\n      editor-placeholder-key="{{::bbmlEditor.scope.textEditorPlaceholderKey}}"\n    ></bb-rich-text-editor>\n  </form>\n</div>\n'},iJ4p:function(e,t){e.exports='<bb-rich-text-editor\n  plugin-options="{\'attachment\': true, \'math\': true, \'contentMarket\': true}"\n  ng-model="assessmentQuestion.questionAttempt.question.questionText.rawText"\n  supports-inline-document-render="true"\n  is-read-only="true">\n</bb-rich-text-editor>\n\n<bb-question-answer-status was-late="::assessmentQuestion.wasAnsweredLate()"\n                           hide-correctness-text="true"\n                           class="essay-attention">\n</bb-question-answer-status>\n<div class="panel">\n  <span class="answer-panel-heading" bb-translate>components.directives.assessment-question.essay.answer-header</span>\n  <bb-rich-text-editor\n    plugin-options="{\'attachment\': true, \'math\': true}"\n    ng-model="assessmentQuestion.questionAttempt.givenAnswer.rawText"\n    supports-inline-document-render="false"\n    is-read-only="true">\n  </bb-rich-text-editor>\n</div>\n<bb-model-answer\n  disable-focus="false"\n  course-id="assessmentQuestion.contextCourse.courseId"\n  is-read-only="true"\n  model-answer-mode="assessmentQuestion.modelAnswerMode"\n  question="assessmentQuestion.questionAttempt.question"\n  refresh-bbml="true"\n></bb-model-answer>\n'},ihlU:function(e,t,s){"use strict";var n=s("D57K"),i=s("Llzl"),a=s("IbyE"),o=s("e0uO"),r=s("e6qG"),c=s("jWRJ"),l=s("Xq/A"),u=s("YHe3"),b=s("jbaE"),d=s("pjml"),p=s("lEL+"),m=s("e6jQ"),h=s("0JpG"),g=s("JNtI"),v=s("g66W"),w=s("QJ+g"),O=s("hG4E"),j=s("cH8o"),A=s("ERsv"),f=s("aHpC"),q=s("Y/dt"),C=s("bd9L");const S="ultra.components.directives.freeformResponseEditor";let x=class{constructor(e,t,s,n,i,a,o,r,c,l){this.$compile=e,this.element=t,this.$q=s,this.$rootScope=n,this.attrs=i,this.scope=a,this._bbMLEditorService=o,this.bbLocalize=r,this.timeout=c,this.proctoringService=l,this.isEditing=!1,this.isSaving=!1,this.isInitializing=!0,this.isRTELoaded=!1,this.isRetryPending=!1,this.isNewAttachmentSaving=!1,this.isDisabled=!1,this.textEditorPlaceholderKey="",this.onChange=e=>{this.toBbML=e},this.onNewAttachmentSaving=()=>{this.isNewAttachmentSaving=!0},this.insertDocumentEditorTemplate=e=>{this.element.find(".freeform-response-editor-template").prepend(this.$compile(this.template)(this.scope))},this.bbmlEditorId="BBML_Editor_ID_"+m.b(),this.toBbML=Object(A.generateToBbML)((()=>{var e;return"function"==typeof this.scope.bbml?this.scope.bbml().rawText:null!==(e=this.scope.bbml.rawText)&&void 0!==e?e:""})),a.textEditorPlaceholderKey=a.textEditorPlaceholderKey||"",this.template=a.isPrivileged()?O:j,this.insertDocumentEditorTemplate(t),this.overflowMenuItems=this.getOverflowMenuItems(),a.isPrivileged&&a.isPrivileged()&&this.setUpForPrivilegedUser(),a.$on(q.f,(()=>{this.isRetryPending&&this.scope.$broadcast(C.a)})),this.pluginOptions=this.proctoringService.getSecureBbEditorOptions({attachment:!0,image:!0,math:!0,video:!0,contentMarket:!0}),this.initializeAndSetUpBbMLWatchers()}initializeAndSetUpBbMLWatchers(){this.scope.$watch("bbml()",(e=>{null==e||this.bbML&&this.bbML.webLocation===e.webLocation&&!this.scope.isPrivileged()||(this.isRTELoaded&&!this.isNewAttachmentSaving||(this.rawText=e.rawText,this.isRTELoaded=!0,this.isNewAttachmentSaving=!1),this.bbML=e)})),this.scope.$watch("bbmlEditor.rawText",(()=>{this.isInitializing||this.isSaving?this.isInitializing=!1:this.bbML.rawText=this.rawText}))}get truncatedViewValue(){return this._truncatedViewValue}set truncatedViewValue(e){const t=this.element.find(".bb-editor"),s=t.length?t.text():void 0;this._truncatedViewValue=v.f(s,100)}onBlur(){this.isEditing=!1}focusEditor(){this.isEditing=!0,this.timeout((()=>{this.element.find(".bb-editor").first().focus()}),this.scope,0)}activateEditor(){this.scope.editorForm.responseEditor.$setPristine(),this.focusEditor()}getOverflowMenuItems(){const e=[];e.push({labelKey:"global.edit",icon:"draw",show:()=>this.showEditButton(),onClick:()=>this.activateEditor(),ariaLabel:()=>this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.textEditor.overflowMenu.aria.edit",params:{truncatedText:this.truncatedViewValue},noWrap:!0})});const t={labelKey:"global.delete",icon:"trash",show:()=>this.showDeleteButton(),onClick:()=>this.onDelete(),ariaLabel:()=>this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.textEditor.overflowMenu.aria.delete",params:{truncatedText:this.truncatedViewValue},noWrap:!0})};return e.push(t),t.confirmationOptions={},t.confirmationOptions.lazyLoadTitleKeyAndInstructionsKey=()=>this.$q.when(g.a("content")),this.scope.choices&&(t.confirmationOptions.choices=this.scope.choices()),e}showOverflowMenu(){return!this.isEditing&&(!!this.showEditButton()||!!this.showDeleteButton())&&this.hasContent()}setUpForPrivilegedUser(){this.scope.$on(d.d.EVENT_BBML_EDITOR_FORCE_UPDATE,(()=>{this.save()})),this.scope.$watch("bbmlEditor.hasContent()",(e=>{this.scope.hasContent=e}))}matchesBbMLEditorId(e){return this.bbmlEditorId&&this.bbmlEditorId===e}save(e=!1){return!e&&this.isSaving||!this.scope.saveFunc?this.$q.resolve():(this.isNewAttachmentSaving&&(this.isDisabled=!0),this.isSaving=!0,this.$q.when(this.toBbML(!0)).then((e=>(this.bbML.rawText=e,this.scope.saveFunc()))).then((()=>{this.isRetryPending=!1,this.isSaving=!1,this.isDisabled=!1}),(e=>{throw this.isRetryPending=!0,this.isSaving=!1,this.isDisabled=!1,e})))}isValid(){return!0}hasContent(){var e,t;return(null===(t=null===(e=this.bbML)||void 0===e?void 0:e.rawText)||void 0===t?void 0:t.length)>0}onDelete(){this.rawText=""}showEditButton(){return this.scope.isPrivileged()}showDeleteButton(){return this.scope.isPrivileged()}};x=Object(n.a)([Object(n.c)(0,Object(f.b)("$compile")),Object(n.c)(1,Object(f.b)("element")),Object(n.c)(2,Object(f.b)("$q")),Object(n.c)(3,Object(f.b)("$rootScope")),Object(n.c)(4,Object(f.b)("attrs")),Object(n.c)(5,Object(f.b)("scope")),Object(n.c)(6,Object(f.b)(l.c)),Object(n.c)(7,Object(f.b)(h.serviceName)),Object(n.c)(8,Object(f.b)(p.b)),Object(n.c)(9,Object(f.b)(u.b))],x);class y{constructor(e){this.$injector=e,this.restrict="E",this.template=w,this.scope={bbml:"&",hasContent:"=?",isPrivileged:"&",saveFunc:"&?",autoSaveContextArea:"@?",textEditorPlaceholderKey:"<?",expandInlineFilesOnLoad:"<?",supportsInlineDocumentRender:"<?"},this.link=(e,t,s)=>{e.bbmlEditor=this.$injector.instantiate(x,{scope:e,element:t,attrs:s})}}}y.$inject=["$injector"],i.module(S,["ngSanitize",C.g,l.b,u.a,b.a,p.a]).directive("bbFreeformResponseEditor",["$injector",e=>e.instantiate(y)]);var $=s("TnpK"),Q=s("gkef"),E=s("fYJU"),k=s("Qbdf"),T=s("X455"),I=s("36CG"),R=s("Y+9S"),P=s("jhBu"),_=s("ZQFV"),F=s("5MwF"),M=s("Q/M7"),L=s("Fvsw"),N=s("DDBr"),D=s("n0bV"),H=s("yC9S"),G=s("oVrE"),B=s("9hUw"),V=s("R4kC"),z=s("jx5I"),U=s("D57O");const W="ultra.course.assessment.feedback.peer.singleOwner";let K=class{constructor(e,t,s,n,i,a,o,r,c,l,u,b){this.$scope=e,this.$ngRedux=t,this.context=s,this.contextCourse=n,this.contextUser=i,this.entitlementService=a,this.localize=o,this.peerReviewService=r,this.submissionListService=c,this.ultraStateService=l,this.delegatedAttemptAdapter=u,this.fileUploadSettingsService=b,this.isLoading=!0}$onInit(){this.feedbackListPayload={configProps:this.getFeedbackConfigProps(),secondaryGradersFeedback:[],analyticsId:"course.assessment.attempt.peerFeedbackByStudent"},this.peerReviewService.getOrCreatePeerContentFromColumn(this.column).then((e=>{this.peerReviewContentObject=e})),this.delegatedAttemptAdapter.loadDelegatedGradesByGrader({courseId:this.column.courseId,columnId:this.column.id,userId:this.attempt.userId}).then((e=>{this.peerReviewsGiven=e,this.buildPayload(),this.isLoading=!1}))}get column(){return this.ultraStateService.getCurrentResolvedValues().currentColumn}get course(){return this.contextCourse.course}buildPayload(){this.peerReviewsGiven.forEach(((e,t)=>{const{attemptId:s,stagedAttemptId:n,grader:i,feedbackToUser:a,attemptLastGradedDate:o,hasGraderFeedback:r,userBeingGraded:c}=e;r&&this.feedbackListPayload.secondaryGradersFeedback.push({id:n,attemptId:s,grader:Object(G.a)(i),userBeingGraded:Object(G.a)(c),showAnonymousWhenNoUserData:!0,rawTextFeedback:null==a?void 0:a.rawText,attemptLastGradedDate:o,late:this.isFeedbackLate(o,i),isFeedbackFromCurrentStudent:!0,listIndex:t+1})}))}getFeedbackConfigProps(){const{xsrfToken:e}=this.context,t=this.buildSecondaryFeedbackConfigProps();return{isOrganization:this.contextCourse.course.isOrganization,isPeerGrading:!0,currentUserHasEnterFeedbackEntitlement:this.hasEnterFeedbackEntitlement,secondaryFeedbackConfigProps:t,editorConfigProps:{xsrfToken:e,courseId:this.contextCourse.courseId,apiBasePath:M.c(F.a.apiBasePath),locale:this.localize.getLocale(this.$scope),fileUploadSettings:this.fileUploadSettingsService.getSettings()}}}get hasEnterFeedbackEntitlement(){return this.entitlementService.isEntitled(_.q.EnterFeedback,this.course.id)}buildSecondaryFeedbackConfigProps(){if(this.hasEnterFeedbackEntitlement)return;return{title:this.localize.translateSync({locale:this.localize.getLocale(this.$scope),key:"course.content.assessment.attempt.feedback.peerReview.self"})}}isFeedbackLate(e,t){var s;if(!e||!this.hasEnterFeedbackEntitlement)return!1;return!this.submissionListService.submissionList.rows.find((e=>e.membership.userId===t.id)).hasDueDateException&&(null===(s=this.peerReviewContentObject)||void 0===s?void 0:s.isAfterPeerReviewDueDate(e))}};K=Object(n.a)([Object(H.a)({moduleName:W,componentName:"bbPeerFeedbackByStudent",bindings:{attempt:"<"},template:U,requireModules:[L.a,k.b,E.a,P.a,N.a,h.moduleName,B.a,V.a,$.b,D.a,z.a]}),Object(n.c)(0,Object(f.b)("$scope")),Object(n.c)(1,Object(f.b)("$ngRedux")),Object(n.c)(2,Object(f.b)(L.b)),Object(n.c)(3,Object(f.b)(k.e)),Object(n.c)(4,Object(f.b)(E.b)),Object(n.c)(5,Object(f.b)(P.b)),Object(n.c)(6,Object(f.b)(h.serviceName)),Object(n.c)(7,Object(f.b)(B.b)),Object(n.c)(8,Object(f.b)(V.b)),Object(n.c)(9,Object(f.b)($.d)),Object(n.c)(10,Object(f.b)(D.b)),Object(n.c)(11,Object(f.b)(z.b))],K);var J=s("IaSh"),Y=s("ohO4"),X=s("1ZbL");const Z="ultra.components.directives.assessment-page-counts",ee={Class:J.f,bindingNames:["currentPage","totalPages"],renderLocalized:!0};i.module(Z,[]).component("bbAssessmentPageCounts",Object(X.a)(ee));var te=s("AuQm"),se=s("Y3OE"),ne=s("0V7O"),ie=s("HF29"),ae=s("FVIt");s.d(t,"a",(function(){return oe}));const oe="ultra.components.directives.assessment.attemptCanvas",re="components.directives.attempt-canvas.freeform-response.author.placeholder";var ce;!function(e){e.AssignmentContent="assignmentContent",e.SubmissionContent="submissionContent",e.PeerReviews="peerReviews"}(ce||(ce={}));let le=class{constructor(e,t,s,n,i,o,r,c,l,u,b,d,p){var m,h;this.scope=e,this.element=t,this.$q=s,this.$ngRedux=n,this.ultraState=i,this.windowSizeService=o,this.contextUser=r,this.contextContent=c,this.contextCourse=l,this.currentCourseMembership=u,this.entitlementService=b,this.featureFlagService=d,this.timeout=p,this.customCategory="",this.assessmentId="",this.attemptCanvasRegion=ce,this.accordionRegions={[ce.AssignmentContent]:!0,[ce.SubmissionContent]:!0,[ce.PeerReviews]:!0};const{currentContent:g}=this.ultraState.getCurrentResolvedValues();if(this.displayStudentSubmission=(null===(h=null===(m=null==g?void 0:g.getDeployedAssessment())||void 0===m?void 0:m.deploymentSettings)||void 0===h?void 0:h.allowStudentSubmission)||!1,this.canModifyGradebook&&!this.isCurrentCourseComplete){const e=c.content;e&&e.contentDetail&&(this.assessmentId=e.contentDetail[se.a.TestLink.toString()].test.assessment.id,this.$ngRedux.dispatch(a.X.content.loadContents({courseId:e.courseId,contentId:i.params.contentId})))}this.isSmallBreakpoint=o.isSmallBreakpoint(),this.scope.$on("window-resize",(()=>{this.isSmallBreakpoint=o.isSmallBreakpoint()})),e.gradebookCategory()&&!e.gradebookCategory().isUserDefined?this.headerKey="components.directives.attempt-canvas.header."+e.gradebookCategory().title:(this.customCategory=e.gradebookCategory()&&e.gradebookCategory().title,this.headerKey="components.directives.attempt-canvas.header.custom"),this.scope.attempt&&!this.scope.attempt.studentSubmission&&this.displayStudentSubmission&&(this.scope.attempt.studentSubmission={}),this.scope.gradedQuestionAttempts&&this.scope.$watch("gradedQuestionAttempts()",(e=>{this.gradedQuestionAttempts=e})),!this.currentCourseMembership.isStudentMembership()&&this.hasOnlyPresentationQuestions()&&(this.accordionRegions[ce.AssignmentContent]=!1)}get showPageCountHeader(){var e,t;return(null===(e=this.questionAttemptView)||void 0===e?void 0:e.totalPageCount)>0&&(null===(t=this.questionAttemptView)||void 0===t?void 0:t.currentPageCount)>0}get totalPagesCount(){var e;return null===(e=this.questionAttemptView)||void 0===e?void 0:e.totalPageCount}get currentPageCount(){var e;return null===(e=this.questionAttemptView)||void 0===e?void 0:e.currentPageCount}get isPeerReviewer(){var e,t;return null===(t=(e=this.scope).peerReviewer)||void 0===t?void 0:t.call(e)}get isCurrentCourseComplete(){return this.contextCourse.course.isComplete()}get questionAttemptView(){return this.scope.questionAttemptView}get toolAttemptDetail(){var e;const t=(null===(e=this.column)||void 0===e?void 0:e.scoreProviderHandle.toString())||a.Q.Test.toString();if(!this._toolAttemptDetail&&this.scope.attempt){const e=this.scope.attempt;e.attempts&&e.attempts.length>0?this._toolAttemptDetail=e.attempts[0].toolAttemptDetail[t]:this._toolAttemptDetail=e.getToolAttemptDetailItem(a.Q.parse(t))}return this._toolAttemptDetail}get column(){const{currentColumn:e}=this.ultraState.getCurrentResolvedValues();return e}get content(){const{currentContent:e}=this.ultraState.getCurrentResolvedValues();return e}get canShowPeerFeedbackByStudent(){var e;const{currentContent:t}=this.ultraState.getCurrentResolvedValues();if(!(null===(e=this.column)||void 0===e?void 0:e.peerGrading)||(null==t?void 0:t.isGroupContent))return!1;if(this.canEnterGrades)return!0;const s=this.scope.attempt;return this.contextUser.userId===s.userId}get autoSaveContextArea(){return te.c.Assessments}get canModifyGradebook(){return this.entitlementService.isEntitled(_.q.ModifyGradebook)}get canEnterGrades(){return this.entitlementService.isEntitled(_.q.EnterItemGrades)}textEditorOptions(){return{placeholderKey:re}}fileEditorOptions(){return{showViewButton:()=>this.scope.canvasType()===this.GradingMode()||this.scope.canvasType()===this.ReviewMode()}}isAccordionRegionActive(e){return this.accordionRegions[e]}toggleAccordionRegions(e){this.accordionRegions[e]=!this.accordionRegions[e]}studentSubmission(){return this.scope.attempt.studentSubmission}navigateNext(){var e,t;!1!==(null===(t=(e=this.scope).onNavigationAvailable)||void 0===t?void 0:t.call(e))&&(this.scope.$broadcast(q.f),this.questionAttemptView.navigateNext())}save(){if(this.scope.attempt.$pk){const e=this.scope.attempt.toolAttemptDetail;return e&&e["resource/x-bb-assessment"]&&e["resource/x-bb-assessment"].questionAttempts&&e["resource/x-bb-assessment"].questionAttempts.forEach((e=>{e.question&&e.question.alignedGoals&&(e.question.alignedGoals=[])})),this.scope.attempt.$patch().$asPromise()}return this.$q.resolve(this.scope.attempt)}getFreeformResponseBundleKey(e="header"){if(!this.hasQuestions())return"";let t;switch(this.scope.canvasType()){case o.a.AttemptAuthoring:t="author";break;case o.a.AttemptGrading:t="grade";break;case o.a.AttemptReview:t="review"}return`components.directives.attempt-canvas.freeform-response.${t}.${e}.${this.hasOnlyPresentationQuestions()?"submission":"additional-content"}`}hasQuestions(){var e,t;return!!(null===(t=null===(e=this.toolAttemptDetail)||void 0===e?void 0:e.assessment)||void 0===t?void 0:t.questionCount)}hasOnlyPresentationQuestions(){var e;return!!(null===(e=this.toolAttemptDetail)||void 0===e?void 0:e.assessment)&&!this.toolAttemptDetail.assessment.hasAnswerableQuestions}get showQuestionFilterMessage(){var e,t;return!(!(null===(e=this.questionAttemptView)||void 0===e?void 0:e.isFilterable())||0!==(null===(t=this.questionAttemptView)||void 0===t?void 0:t.questionsMatchingFilterCount))}persist(){return this.scope.$broadcast(d.d.EVENT_BBML_EDITOR_FORCE_UPDATE),this.$q.when(this.scope.attempt)}get isBacktrackingProhibited(){var e,t,s,n,i;return null!==(i=null===(n=null===(s=null===(t=null===(e=this.content)||void 0===e?void 0:e.getDeployedAssessment)||void 0===t?void 0:t.call(e))||void 0===s?void 0:s.deploymentSettings)||void 0===n?void 0:n.isBacktrackingProhibited)&&void 0!==i&&i}get isContinueVisible(){var e,t,s;return null!==(s=(null===(e=this.questionAttemptView)||void 0===e?void 0:e.isPageable())&&!(null===(t=this.questionAttemptView)||void 0===t?void 0:t.isLastPage()))&&void 0!==s&&s}get isFilterToUnansweredVisible(){var e,t,s,n,i;return null!==(i=(null===(e=this.questionAttemptView)||void 0===e?void 0:e.isPageable())&&(null===(t=this.questionAttemptView)||void 0===t?void 0:t.isLastPage())&&(null===(s=this.questionAttemptView)||void 0===s?void 0:s.unansweredQuestionCount)>0&&!(null===(n=this.questionAttemptView)||void 0===n?void 0:n.hasUnansweredFilterApplied())&&!this.isBacktrackingProhibited)&&void 0!==i&&i}filterToUnanswered(){var e,t,s;!1!==(null===(t=(e=this.scope).onNavigationAvailable)||void 0===t?void 0:t.call(e))&&(null===(s=this.questionAttemptView)||void 0===s||s.onFilterChanged({status:J.A.Unanswered},!0))}GradingMode(){return o.a.AttemptGrading}ReviewMode(){return o.a.AttemptReview}AttemptMode(){return o.a.AttemptAuthoring}getFreeformPlaceholderBundleKey(){return re}displayFreeformResponse(){var e,t,s;return!!this.displayStudentSubmission&&(!(null===(e=this.questionAttemptView)||void 0===e?void 0:e.hasFilterApplied())&&(!(null===(t=this.questionAttemptView)||void 0===t?void 0:t.isPageable())||!!(null===(s=this.questionAttemptView)||void 0===s?void 0:s.isLastPage())))}};le=Object(n.a)([Object(n.c)(0,Object(f.b)("scope")),Object(n.c)(1,Object(f.b)("element")),Object(n.c)(2,Object(f.b)("$q")),Object(n.c)(3,Object(f.b)("$ngRedux")),Object(n.c)(4,Object(f.b)($.d)),Object(n.c)(5,Object(f.b)(Q.b)),Object(n.c)(6,Object(f.b)(E.b)),Object(n.c)(7,Object(f.b)(I.g)),Object(n.c)(8,Object(f.b)(k.e)),Object(n.c)(9,Object(f.b)(T.d)),Object(n.c)(10,Object(f.b)(P.b)),Object(n.c)(11,Object(f.b)(Y.b)),Object(n.c)(12,Object(f.b)(p.b))],le);class ue{constructor(e,t,s){this.$compile=e,this.$injector=t,this.timeout=s,this.restrict="E",this.scope={attempt:"=",canvasType:"&",gradebookCategory:"&",gradedQuestionAttempts:"&",isAnyQuestionEditing:"=",onNavigationAvailable:"&?",peerReviewer:"&?",questionAttemptView:"<?"},this.link=(e,t,s)=>{const n=this.getTemplate(e),i=this.$compile(n)(e);t.append(i),e.attemptCanvas=this.$injector.instantiate(le,{scope:e,element:t,attrs:s}),Object(R.m)()&&this.timeout((()=>{e.$digest()}),e,0)}}getTemplate(e){switch(e.canvasType()){case o.a.AttemptAuthoring:return ne;case o.a.AttemptGrading:return ie;case o.a.AttemptReview:return ae;default:throw new Error("Invalid canvas type provided")}}}ue.$inject=["$compile","$injector",p.b],i.module(oe,[Z,c.a,d.N,S,r.a,$.b,Q.a,I.d,k.b,W,Y.a]).directive("bbAttemptCanvas",["$injector",e=>e.instantiate(ue)])},jWRJ:function(e,t,s){"use strict";var n=s("D57K"),i=s("Llzl"),a=s("e6qG"),o=s("0JpG"),r=s("1ZbL"),c=s("K9sL");const l="ultra.components.directives.assessment.asessmentQuestion.automatedQuestionFeedback",u={Class:c.b,bindingNames:["feedback","isCollapsible","editorPluginsOptions"],renderLocalized:!0};i.module(l,[o.moduleName]).component("bbAutomatedQuestionFeedback",Object(r.a)(u));var b=s("jbaE"),d=s("JNtI"),p=s("/qpZ"),m=(s("dY8P"),s("ZzYr")),h=s("o5Lu"),g=s("dd1C"),v=s("12mu"),w=s("nthy"),O=s("36CG"),j=s("fYJU"),A=s("kQ1d"),f=s("Y3OE");const q="ultra.components.directives.grade.pill",C={Class:s("ZQFV").H,renderLocalized:!0,withProvider:!0,bindingNames:["grade","pointsPossible","isDisabled","save"]};i.module(q,[o.moduleName]).component("bbUiQuestionGradePill",Object(r.a)(C));const S="ultra.components.directives.grade.questionGrade";class x{constructor(e,t,s,n,i,a){this.scope=e,this.$modal=t,this._gradeService=s,this.bbLocalize=n,this.contextUser=i,this.contextContent=a,this.bbLocalize.loadBundle("components/directives/grade/question-grade"),e.questionGrade=this,this.gradebookSettings=this._gradeService.loadDefaultGradebookSettings(),this.isStudent=this.contextUser.userModel.isStudent(),this.isAutoPostGrades=this.contextContent.content.contentDetail[f.a.TestLink.toString()].test.gradingColumn.autoPostGrades,this.pointsPossible=this.scope.gradedQuestionAttempt.questionAttempt.question.points,!this.isStudent&&this.scope.hideGrade()||e.$watch("gradedQuestionAttempt",(()=>{this.afterModelChange()})),this.save=this.save.bind(this)}inputChanged(e){return(!Number.isNaN(Number(this.initValue))||null!=e)&&((null!=this.initValue||!Number.isNaN(Number(e)))&&this.initValue!==e)}isGradeModified(e){return null!==this.initValue&&!i.equals(this.initValue,e)}isDisabled(){return!this.scope.isPrivileged()||this.scope.gradedQuestionAttempt.questionAttempt.question.fullCredit}sanitizeToModel(e){return null==e||Number.isNaN(Number(e))?"":e}save(e){this.inputChanged(e)&&(this.scope.gradedQuestionAttempt.ui&&this.scope.gradedQuestionAttempt.ui.isPosted&&!this.isAutoPostGrades?this.$modal.open({template:w,scope:this.scope}).result.then((()=>{this.scope.gradedQuestionAttempt.manualPoints=this.sanitizeToModel(e),this.doSave(e)}),(()=>{})):(this.scope.gradedQuestionAttempt.manualPoints=this.sanitizeToModel(e),this.doSave(e)))}doSave(e){this.scope.gradedQuestionAttempt.withParams({groupAttemptId:this.scope.gradedQuestionAttempt.ui.groupAttemptId}).$patch().$then((()=>{this.scope.$emit("bb-update-question-grade",this.scope.gradedQuestionAttempt),this.isGradeModified(e)&&this.scope.$root.$broadcast("QUESTION-GRADE-PILL-EDITED",this.contextContent.content.contentDetail[f.a.TestLink.toString()].test.gradingColumn.id,e),this.afterModelChange()}))}afterModelChange(){this.scope.gradedQuestionAttempt&&(this.isAutoGraded=this.scope.gradedQuestionAttempt.questionAttempt.question.isAutoGraded,this.initValue=this.scope.gradedQuestionAttempt.points)}}x.$inject=["scope","$modal",h.n,o.serviceName,j.b,O.g];class y{constructor(e,t){this.$compile=e,this.$injector=t,this.restrict="E",this.scope={gradedQuestionAttempt:"=",hideGrade:"&",inputId:"@",isPrivileged:"&"},this.link=(e,t,s)=>{t.append(this.$compile(A)(e)),e.questionGrade=this.$injector.instantiate(x,{scope:e,element:t,attrs:s})}}}y.$inject=["$compile","$injector"],i.module(S,["puElasticInput",m.a,h.m,g.a,v.a,q]).directive("bbQuestionGrade",["$injector",e=>e.instantiate(y)]);s("2MQt"),s("uEsA"),s("LRgG"),s("SHbF");var $=s("IaSh"),Q=s("3Uvi");const E="ultraUi.components.directives.grade.questionAnswerStatus";class k{constructor(e){this.scope=e}getCorrectnessIcon(){const e=this.scope.correctness&&this.scope.correctness();return this.scope.wasLate&&this.scope.wasLate()?"attention":$.y.Correct===e||$.y.FullCredit===e?"check-circle":$.y.Partial===e?"partial-credit":"close-circle"}shouldShowText(){return!(this.scope.hideCorrectnessText&&this.scope.hideCorrectnessText())}getCorrectnessTextKey(){if(this.scope.correctness){const e=this.scope.correctness&&this.scope.correctness();return $.y.Correct===e?"components.directives.assessment-question.status.correct":$.y.Partial===e?"components.directives.assessment-question.status.partial":$.y.FullCredit===e?"components.directives.assessment-question.status.full-credit":"components.directives.assessment-question.status.incorrect"}}getBackgroundClass(){const e=this.scope.correctness&&this.scope.correctness();return this.scope.wasLate&&this.scope.wasLate()?"question-answer-status--attention":$.y.Correct===e||$.y.FullCredit===e?"question-answer-status--correct":$.y.Partial===e?"question-answer-status--partial":"question-answer-status--incorrect"}}k.$inject=["scope"];class T{constructor(e){this.$injector=e,this.restrict="E",this.template=Q,this.transclude=!0,this.replace=!0,this.scope={hideCorrectnessText:"&?",wasLate:"&?",correctness:"&?",alignIconToTop:"&?"},this.link=e=>{e.questionAnswerStatus=this.$injector.instantiate(k,{scope:e})}}}T.$inject=["$injector"],i.module(E,[]).directive("bbQuestionAnswerStatus",["$injector",e=>e.instantiate(T)]);var I=s("lEL+"),R=s("TnpK"),P=s("cs5G"),_=s("ERkP"),F=s("zGdY"),M=s("4vxQ"),L=s("Agfx");const N=Object(L.makeStyles)((e=>Object(L.createStyles)({root:{},questionText:{marginBottom:"10px"},questionAnswerInputRoot:{"& input":{marginBottom:0,border:"none"}}})));var D=s("C+e0"),H=s("b2gR"),G=s("UJ5P"),B=s("GuFu");const V=Object(D.a)((e=>{const{question:t,givenAnswer:s,localize:n,onAnswerChange:i,questionNumber:a,pluginsConfig:o}=e,r=N(),c=n.translate("components.directives.assessment-question.placeholder.question",{questionIdentifier:a}),l=_.useCallback((e=>{i(e.target.value)}),[i]),u=Object(B.p)("feature.course.content.inline-render");return _.createElement("div",{className:r.root},_.createElement("div",{className:r.questionText},_.createElement(H.a,{editMode:G.a.INACTIVE,question:t,disableFocus:!1,ariaLabelledBy:"",placeholderText:"",supportsInlineDocumentRender:u,pluginsConfig:o})),_.createElement(M.a,{placeholder:n.translate("components.directives.assessment-question.calculated-numeric.placeholder.attempt"),analyticsId:"components.directives.assessment-question.calculated-numeric.calculated-numeric-attempt.answer-input",value:s,onChange:l,InputProps:{classes:{root:r.questionAnswerInputRoot},inputProps:{"aria-label":c,className:"js-calculated-numeric-attempt-answer-input"}}}))})),z=Object(L.makeStyles)((e=>Object(L.createStyles)({questionText:{marginBottom:"10px"}})));var U=e=>{const{question:t,givenAnswers:s,onAnswerChange:n,pluginsConfig:i}=e,a=z(),o=Object(B.p)("feature.course.content.inline-render");return _.createElement("div",null,_.createElement("div",{className:a.questionText},_.createElement($.B,{editMode:$.j.INACTIVE,question:t,disableFocus:!1,ariaLabelledBy:"",placeholderText:"",supportsInlineDocumentRender:o,pluginsConfig:i})),_.createElement($.m,{question:t,givenAnswers:s,onAnswerChange:n}))};const W="ultra.components.directives.assessment.assessmentQuestion.questionAttempt",K={Class:e=>{const{question:t,givenAnswer:s,onAnswerChange:n,questionNumber:i,pluginsConfig:a}=e;if(void 0===s)return null;const o=(()=>{switch(t.questionType){case F.Qb.CalculatedNumeric:return _.createElement(V,{question:t,givenAnswer:s,onAnswerChange:n,questionNumber:i,pluginsConfig:a});case F.Qb.Hotspot:return _.createElement(U,{question:t,givenAnswers:s,onAnswerChange:n,questionNumber:i,pluginsConfig:a});default:return null}})();return o?_.createElement($.b,{allyService:e.allyService,contentId:e.contentId},o):null},bindingNames:["question","questionNumber","givenAnswer","allyService","contentId","onAnswerChange","pluginsConfig"],renderLocalized:!0,withProvider:!0};i.module(W,[o.moduleName]).component("bbQuestionAttempt",Object(r.a)(K));var J=s("7O4Y"),Y=s("bJi+"),X=s("G52d");const Z=Object(L.makeStyles)((e=>Object(L.createStyles)({questionText:{marginBottom:"16px"},givenAnswer:{marginBottom:"16px"},givenAnswerLabel:{fontWeight:e.typography.fontWeightBold},correctnessWrapper:{padding:"8px 10px",backgroundColor:t=>t.attempt.correct?e.palette.success.light:e.palette.error.light},correctnessText:{fontWeight:e.typography.fontWeightBold},correctAnswerNumericValue:{fontWeight:e.typography.fontWeightBold}}))),ee=Object(D.a)((e=>{var t;const{currentLocale:s,localize:n,attempt:i,automatedFeedbackEditorPluginOptions:a,isAutomatedFeedbackCollapsible:o,babelfishFormatInstance:r}=e,l=Z(e),u=Object(B.p)("feature.course.content.inline-render"),b=_.createElement("span",{className:l.givenAnswerLabel},n.translate("components.directives.assessment-question.calculated-numeric.yourAnswer.prefix")),d=n.translate("components.directives.assessment-question.calculated-numeric.yourAnswer.full",{prefix:b,answer:i.givenAnswer}),p=Object(X.a)(s,i.question.answerValue,r),m=Object(X.a)(s,i.question.toleranceValue,r),h=i.correct?n.translate("components.directives.assessment-question.status.correct"):n.translate("components.directives.assessment-question.status.incorrect");let g;if(Object(X.b)(i.question)){const e=_.createElement("span",{className:l.correctAnswerNumericValue},n.translate("components.directives.assessment-question.calculated-numeric.review.correctAnswerWithTolerance.answerWithTolerance",{answer:p,tolerance:m}));g=n.translate("components.directives.assessment-question.calculated-numeric.review.correctAnswerWithTolerance.full",{answerWithTolerance:e})}else{const e=_.createElement("span",{className:l.correctAnswerNumericValue},p);g=n.translate("components.directives.assessment-question.calculated-numeric.review.correctAnswerWithoutTolerance",{answer:e})}return _.createElement("div",null,_.createElement("div",{className:l.questionText},_.createElement(Y.a,{editMode:G.a.INACTIVE,question:i.question,disableFocus:!1,ariaLabelledBy:"",placeholderText:"",supportsInlineDocumentRender:u,pluginsConfig:a})),_.createElement("div",{className:l.givenAnswer},d),i.isCorrectAnswersVisible&&_.createElement("div",{className:Object(J.a)(l.correctnessWrapper,"js-calculated-numeric-attempt-review-correctness-wrapper")},_.createElement("div",{className:Object(J.a)(l.correctnessText,"js-calculated-numeric-attempt-review-correctness-text")},h),_.createElement("div",{className:"js-calculated-numeric-attempt-review-correct-answer-text"},g)),i.automatedFeedback&&_.createElement(c.b,{feedback:null===(t=i.automatedFeedback)||void 0===t?void 0:t.rawText,editorPluginsOptions:a,isCollapsible:o}))}));var te=s("VQ4P");const se=Object(L.makeStyles)((e=>Object(L.createStyles)({questionText:{marginBottom:"16px"},optionsContainer:{paddingTop:"10px"},questionAnswerStatus:{marginTop:"12px",marginBottom:"2px"},explanatoryText:{marginTop:"16px",marginBottom:"6px"}})));var ne=s("tN4z");const ie=e=>{var t;const{attempt:s,isAutomatedFeedbackCollapsible:n,automatedFeedbackEditorPluginOptions:i,wasAnsweredLate:a,isAttemptGradingView:o,canShowCorrectAnswerRelatedDetail:r}=e,c=se(e),l=Object(te.a)(),u=Object(B.p)("feature.course.content.inline-render");return _.createElement("div",null,_.createElement("div",{className:c.questionText},_.createElement($.B,{editMode:$.j.INACTIVE,question:s.question,disableFocus:!1,ariaLabelledBy:"",placeholderText:"",supportsInlineDocumentRender:u,pluginsConfig:i})),_.createElement($.n,{question:s.question,givenAnswers:s.givenAnswers,isCorrectAnswersVisible:r}),o&&!s.question.displayShapesToStudents&&_.createElement(ne.AnalyticsTypography,{component:"label",variant:"body1",className:c.explanatoryText},l("components.directives.assessment-question.hotspot.explanatory-text.content")),_.createElement($.z,{wasAnsweredLate:a,rootClassName:c.questionAnswerStatus}),r&&_.createElement("div",{className:c.optionsContainer},_.createElement($.l,{question:s.question,givenAnswers:s.givenAnswers})),s.automatedFeedback&&_.createElement($.i,{feedback:null===(t=s.automatedFeedback)||void 0===t?void 0:t.rawText,editorPluginsOptions:i,isCollapsible:n}))},ae="ultra.components.directives.assessment.assessmentQuestion.questionAttemptReview",oe={Class:e=>{const{attempt:t,automatedFeedbackEditorPluginOptions:s,isAutomatedFeedbackCollapsible:n,wasAnsweredLate:i,isAttemptGradingView:a,canShowCorrectAnswerRelatedDetail:o}=e,r=(()=>{switch(t.question.questionType){case F.Qb.CalculatedNumeric:return _.createElement(ee,{attempt:t,automatedFeedbackEditorPluginOptions:s,isAutomatedFeedbackCollapsible:n});case F.Qb.Hotspot:return _.createElement(ie,{attempt:t,automatedFeedbackEditorPluginOptions:s,canShowCorrectAnswerRelatedDetail:o,isAttemptGradingView:a,isAutomatedFeedbackCollapsible:n,wasAnsweredLate:i});default:return null}})();return r?_.createElement($.b,{allyService:e.allyService,contentId:e.contentId},r):null},bindingNames:["allyService","contentId","attempt","automatedFeedbackEditorPluginOptions","isAutomatedFeedbackCollapsible","isAttemptGradingView","wasAnsweredLate","answerResult","canShowCorrectAnswerRelatedDetail"],renderLocalized:!0,withProvider:!0};i.module(ae,[o.moduleName]).component("bbQuestionAttemptReview",Object(r.a)(oe));var re=s("zYa8"),ce=s("Y3jw");const le="ultra.components.directives.bbUiIcon.medium.Kudos";Object(re.a)(ce.a,le,"bbUiIconMediumKudos");const ue="ultra.components.directives.assessments.modelAnswer",be={Class:$.u,renderLocalized:!0,bindingNames:["disableFocus","courseId","isReadOnly","modelAnswerMode","editorPlugins","onChange","pluginsConfig","question","refreshBbml","fileUploadSettings"]};i.module(ue,[o.moduleName]).component("bbModelAnswer",Object(r.a)(be));var de=s("vhkR"),pe=s("X8JP"),me=s("6fZB"),he=s("aHpC");s.d(t,"a",(function(){return ge}));const ge="ultra.components.directives.assessment.assessment-question";let ve=class{constructor(e,t,s,n){this.QuestionFactory=e,this.BbLtiService=t,this.cloudStorageIntegrationModalService=s,this.$q=n,this.restrict="E",this.scope={attempt:"=?",question:"=?",questionAttempt:"=?",gradedQuestionAttempt:"=?",mode:"&",index:"&",assessmentId:"&?",contentId:"<",isAnyQuestionEditing:"&?",isSmallBreakpoint:"=?"},this.link=(e,t,s)=>{if(e.question&&(e.questionAttempt||e.gradedQuestionAttempt)||!e.question&&!e.questionAttempt&&!e.gradedQuestionAttempt||e.gradedQuestionAttempt&&e.questionAttempt)throw new Error("Please provide a question or question attempt/graded question attempt");this.setEditorPluginOptions(e),this.setAutomatedFeedbackEditorPluginOptions(e),this.setAssessmentAndCloudEditorPluginOptions(e,t,s)}}setEditorPluginOptions(e){e.editorPluginOptions={attachment:!0,math:!0}}setAutomatedFeedbackEditorPluginOptions(e){e.automatedFeedbackEditorPluginOptions={contentMarket:this.BbLtiService.getEditorPluginOptions(e),insertYoutubeVideo:this.BbLtiService.getYoutubeEditorPluginOptions()}}setAssessmentAndCloudEditorPluginOptions(e,t,s){this.$q.all([this.QuestionFactory.getQuestionHandler(e,t,s),this.cloudStorageIntegrationModalService.initialize()]).then((([t])=>{if(e.assessmentQuestion=t,this.cloudStorageIntegrationModalService.isCloudServiceAvailable){const t=this.cloudStorageIntegrationModalService.getModalCallback(e);e.automatedFeedbackEditorPluginOptions.insertCloudStorageIntegrationFile={openCloudStorageIntegrationModal:()=>Object(me.a)(t())}}}))}};ve=Object(n.a)([Object(n.c)(0,Object(he.b)(a.b)),Object(n.c)(1,Object(he.b)(de.b)),Object(n.c)(2,Object(he.b)(pe.b)),Object(n.c)(3,Object(he.b)("$q"))],ve),i.module(ge,[l,b.a,d.b,p.a,o.moduleName,d.b,S,E,a.a,I.a,R.b,de.a,pe.a,P.a,W,ae,le,ue]).directive("bbAssessmentQuestion",["$q","$injector",(e,t)=>t.instantiate(ve)])},jbaE:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return f}));var n=s("D57K"),i=(s("ph44"),s("vhkR")),a=s("cs5G"),o=s("Llzl"),r=s("Fvsw"),c=s("Qbdf"),l=s("0JpG"),u=s("X8JP"),b=s("9hVN"),d=s("TnpK"),p=s("ohO4"),m=s("jx5I"),h=s("5MwF"),g=s("ERsv"),v=s("Q/M7"),w=s("pjml"),O=s("Y+9S"),j=s("aHpC"),A=s("x2Ev");const f="ultraUi.components.directives.editor.richTextEditor";let q=class{constructor(e,t,s,n,i,a,o,r,c,l,u,b,d,p,m,h,g){this.$q=e,this.$scope=t,this.element=s,this.attrs=n,this.controllers=i,this.bbEditorFactory=a,this.bbLocalize=o,this.bbContext=r,this.ltiService=c,this.CloudStorageIntegrationModalService=l,this.ContentCollectionService=u,this.AnnotationsModel=b,this.contextCourse=d,this.allyService=p,this.ultraState=m,this.featureFlagService=h,this.fileUploadSettingsService=g;const v=this.$scope.$watch("pluginOptions",(e=>{e&&(v(),this.initEditor())}));this.reactAllyService=this.allyService.getReactService(this.$scope),t.$on("$destroy",(()=>{t.editor&&t.editor.destroy()}))}initEditor(){let e=null,t=!1,s=null;const n=this.controllers.ngModel,i=n.$setPristine.bind(n);n.$viewChangeListeners.push((()=>{t||i()})),n.$setPristine=()=>{i(),s&&s(n.$modelValue)};const a=e=>{this.$scope.editor&&this.$scope.editor.update(e)};this.$scope.$watch((()=>n.$modelValue),(t=>{t!==e&&a({bbml:t})})),this.$scope.$watchGroup(["isDisabled","isReadOnly","isToolbarHidden","allyIndexMap"],(([e,t,s,n])=>{this.$scope.editor&&a({isDisabled:e,isReadOnly:t,isToolbarHidden:s,ally:{service:this.reactAllyService,indexMap:n}})}));const o=(e,t)=>void 0!==e?e:t,r=e=>{this.$scope.fileLocation=e.data?e.data.fileLocation:e.fileLocation,this.$scope.webLocation=e.data?e.data.webLocation:e.webLocation},c=i=>{var a,o;t=i.isDirty,s=i.setPristine;const r=i.toBbML();e!==r&&(e=r,null===(o=(a=this.$scope).onChange)||void 0===o||o.call(a,i.toBbML),n.$setViewValue(r))},l={placeholderText:this.bbLocalize.translate({locale:this.bbLocalize.getLocale(this.$scope),key:this.$scope.placeholder})};this.$scope.pluginOptions&&this.$scope.pluginOptions.attachment&&(l.cloudStorageIntegration=this.CloudStorageIntegrationModalService.initialize()),l.inlineRenderFfEnabled=this.featureFlagService.createWaiter("feature.course.content.inline-render"),this.$q.all(l).then((e=>{const t=[Object(g.customClass)()],{locale:s,babelfishInstance:i,babelfishFormatter:a,isRtl:l}=this.bbLocalize.getReactBabelfishParams(this.$scope);if(this.$scope.pluginOptions){!1!==this.$scope.pluginOptions.link&&t.push(Object(g.link)()),!1!==this.$scope.pluginOptions.image&&t.push(Object(g.image)()),!1!==this.$scope.pluginOptions.video&&t.push(Object(g.video)()),this.$scope.pluginOptions.math&&t.push(Object(g.math)({apiBasePath:Object(v.c)(h.a.apiBasePath),courseId:this.contextCourse.courseId,xsrfToken:this.bbContext.xsrfToken,locale:s})),this.$scope.pluginOptions.attachment&&t.push(Object(g.insertLocalFile)({apiBasePath:Object(v.c)(h.a.apiBasePath),xsrfToken:this.bbContext.xsrfToken,webLocation:this.$scope.webLocation||"",fileLocation:this.$scope.fileLocation||"",onUploadSuccess:r,buttonId:Object(O.m)()?"insertFile":"",supportsInlineDocumentRender:this.$scope.supportsInlineDocumentRender&&e.inlineRenderFfEnabled,fileUploadSettings:this.fileUploadSettingsService.getSettings(),onNewAttachmentSavePressed:this.$scope.onNewAttachmentSavePressed,courseId:this.contextCourse.courseId}));let n=!0;!1===this.$scope.pluginOptions.youtubeVideo&&(n=!1),n&&t.push(Object(g.insertYoutubeVideo)({apiBasePath:Object(v.c)(h.a.apiBasePath),getEmbedSrc:this.ltiService.configureAndInitInlineLaunch.bind(this.ltiService),xsrfToken:this.bbContext.xsrfToken,courseId:this.contextCourse.courseId})),this.$scope.pluginOptions.demoMashup&&t.push(Object(g.demoMashup)()),this.$scope.pluginOptions.attachment&&this.CloudStorageIntegrationModalService.isCloudServiceAvailable&&!Object(O.m)()&&t.push(Object(g.insertCloudStorageIntegrationFile)({openCloudStorageIntegrationModal:this.CloudStorageIntegrationModalService.getModalCallback(this.$scope),apiBasePath:Object(v.c)(h.a.apiBasePath),xsrfToken:this.bbContext.xsrfToken,webLocation:this.$scope.webLocation||"",fileLocation:this.$scope.fileLocation||"",fileUploadSettings:this.fileUploadSettingsService.getSettings(),onNewAttachmentSavePressed:this.$scope.onNewAttachmentSavePressed})),this.$scope.pluginOptions.contentCollection&&t.push(Object(g.contentCollection)({getOpenContentCollectionFunction:this.ContentCollectionService.getOpenContentCollectionFunction(this.$scope)})),this.$scope.pluginOptions.contentMarket&&t.push(Object(g.contentMarket)({apiBasePath:Object(v.c)(h.a.apiBasePath),getEmbedSrc:this.ltiService.configureAndInitInlineLaunch.bind(this.ltiService),noInsert:this.$scope.contentMarketIsReadOnly,openContentMarket:this.ltiService.getOpenContentMarketConf(this.$scope),xsrfToken:this.bbContext.xsrfToken}))}let u=this.$scope.rootContentId;!u&&this.ultraState&&this.ultraState.getCurrentResolvedValues&&this.ultraState.getCurrentResolvedValues().currentContent&&(u=this.ultraState.getCurrentResolvedValues().currentContent.id);const b={bbml:n.$modelValue||"",isDisabled:o(this.$scope.isDisabled,!1),isReadOnly:o(this.$scope.isReadOnly,!1),isToolbarHidden:o(this.$scope.isToolbarHidden,!1),isRtl:l,locale:s,expandInlineFilesOnLoad:this.$scope.expandInlineFilesOnLoad,supportsInlineDocumentRender:this.$scope.supportsInlineDocumentRender&&e.inlineRenderFfEnabled,babelfishInstance:i,babelfishFormatInstance:a,onChange:c,placeholder:e.placeholderText,plugins:t,editorId:this.$scope.editorId,ariaLabelledBy:this.$scope.editorAriaLabelledBy,ariaDescribedBy:this.$scope.editorAriaDescribedBy,showWordCount:this.$scope.showWordCount,ally:{service:this.reactAllyService,indexMap:this.$scope.allyIndexMap||new Map},rootContentId:u,...this.$scope.onFocus?{onFocus:()=>this.$scope.$applyAsync(this.$scope.onFocus)}:null,...this.$scope.onBlur?{onBlur:()=>this.$scope.$applyAsync(this.$scope.onBlur)}:null,...h.a.unitTesting?{mockLocalize:Object(A.a)()}:null};this.$scope.onBlur&&n.$setTouched(),this.$scope.editor=this.bbEditorFactory(this.element[0],b)}))}getOnDownloadWithAnnotations(){return t=>{const s=!!t.groupAttemptFileId,n=t.attemptFileId||t.groupAttemptFileId,i={systemInfo:this.bbContext.getSystemInfo().$asPromise(),annotations:this.AnnotationsModel.downloadWithAnnotations(n,s,this.contextCourse.courseId).$asPromise()};return this.$q.all(i).then((t=>{const s=t.systemInfo.annotationRendererUrl;if(!(s&&s.length>0))throw new Error("Annotation Service url is not defined.");{const n=e("#annotationIframe");null!==n&&n.remove();const i=e("#annotationForm");null!==i&&i.remove();const a=e(document.createElement("iframe"));a.attr("src","about:blank"),a.attr("id","annotationIframe"),a.attr("name","annotationIframe"),a.css("display","none");const o=e(document.createElement("form"));o.attr("target","annotationIframe"),o.attr("method","POST"),o.attr("action",s+"/annotation/token"),o.attr("id","annotationForm"),o.attr("name","annotationForm");const r=e(document.createElement("input"));r.attr("type","hidden"),r.attr("name","jwt"),r.attr("value",t.annotations.jwt),r.appendTo(o);const c=e("body");o.appendTo(c),a.appendTo(c),o.submit()}}))}}};q=Object(n.a)([Object(n.c)(0,Object(j.b)("$q")),Object(n.c)(1,Object(j.b)("scope")),Object(n.c)(2,Object(j.b)("element")),Object(n.c)(3,Object(j.b)("attrs")),Object(n.c)(4,Object(j.b)("controllers")),Object(n.c)(5,Object(j.b)("BbEditorFactory")),Object(n.c)(6,Object(j.b)(l.serviceName)),Object(n.c)(7,Object(j.b)(r.b)),Object(n.c)(8,Object(j.b)(i.b)),Object(n.c)(9,Object(j.b)(u.b)),Object(n.c)(10,Object(j.b)(b.b)),Object(n.c)(11,Object(j.b)(w.c.serviceName)),Object(n.c)(12,Object(j.b)(c.e)),Object(n.c)(13,Object(j.b)(a.b)),Object(n.c)(14,Object(j.b)(d.d)),Object(n.c)(15,Object(j.b)(p.b)),Object(n.c)(16,Object(j.b)(m.b))],q);class C{constructor(e){this.$injector=e,this.link=(e,t,s,n)=>{t.addClass("rich-text-editor"),e.richTextEditor=this.$injector.instantiate(q,{scope:e,element:t,attrs:s,controllers:n})},this.require={ngModel:"ngModel"},this.restrict="E",this.scope={contentMarketIsReadOnly:"<?",fileLocation:"=?",isDisabled:"<?",isReadOnly:"<?",isToolbarHidden:"<?",onChange:"<?",onBlur:"&?",onNewAttachmentSavePressed:"&?",onFocus:"&?",placeholder:"@?editorPlaceholderKey",pluginOptions:"<?",webLocation:"=?",editorId:"@?",editorAriaLabelledBy:"@?",editorAriaDescribedBy:"@?",showWordCount:"<?",allyIndexMap:"=?",rootContentId:"@?",expandInlineFilesOnLoad:"<?",supportsInlineDocumentRender:"<?"}}}C.$inject=["$injector"],o.module(f,[l.moduleName,r.a,u.a,b.a,i.a,a.a,m.a]).value("BbEditorFactory",g.BbEditorFactory).directive("bbRichTextEditor",["$injector",e=>e.instantiate(C)])}).call(this,s("71td"))},kQ1d:function(e,t){e.exports='<bb-ui-question-grade-pill\n  grade="questionGrade.initValue"\n  points-possible="questionGrade.pointsPossible"\n  is-disabled="questionGrade.isDisabled()"\n  save="questionGrade.save"\n  id="questionGrade.scope.inputId"\n>\n</bb-ui-question-grade-pill>\n'},nthy:function(e,t){e.exports='<bb-modal id="confirm-question-grade-save-modal"\n          class="notification"\n          modal-title-key="course.content.assessment.test.modal.repostSubmissionGradeAlert.title"\n          analytics-id-tag-prefix="course.content.assessment.test.modal.repostSubmissionGradeAlert">\n  <div name="modal-contents">\n    <p bb-translate course-org-token-resolver>course.content.assessment.test.modal.repostSubmissionGradeAlert.body</p>\n  </div>\n  <button name="modal-footer-button-primary" \n          class="button confirm-ok js-primary-button" \n          ng-click="$parent.$close()" \n          analytics-id="global.continue"\n          bb-translate>global.continue</button>\n  <button name="modal-footer-button-secondary" \n          class="button button--secondary confirm-cancel js-secondary-button" \n          ng-click="$parent.$dismiss()" \n          analytics-id="global.cancel"\n          bb-translate>global.cancel</button>\n</bb-modal>'},nvgb:function(e,t){e.exports='<div class="question-container">\n  <bb-rich-text-editor\n    ng-model="questionAttempt.question.questionText.rawText"\n    is-read-only="true"\n    supports-inline-document-render="true"\n    plugin-options="editorPluginOptions">\n  </bb-rich-text-editor>\n</div>\n'},oXbF:function(e,t){e.exports='<div class="calculated-numeric-question-container calculated-numeric-attempt-review">\n  <bb-question-attempt-review\n    ng-if="assessmentQuestion.questionAttempt.question && !assessmentQuestion.isEditing"\n    ally-service="::allyService"\n    content-id="::contentId"\n    attempt="::assessmentQuestion.questionAttempt"\n    automated-feedback-editor-plugin-options="::automatedFeedbackEditorPluginOptions"\n    is-automated-feedback-collapsible="::assessmentQuestion.allowCollapsingOfAutomatedFeedbackIfShown()"\n  ></bb-question-attempt-review>\n</div>\n'},ph44:function(e,t,s){},r8DE:function(e,t){e.exports='<div class="question-container">\n  <bb-rich-text-editor\n    ng-model="question.questionText.rawText"\n    supports-inline-document-render="true"\n    is-read-only="true"\n    plugin-options="editorPluginOptions">\n  </bb-rich-text-editor>\n</div>\n'},uEsA:function(e,t,s){var n=s("ziER"),i=s("5JeM"),a=new n({id:"icon-medium-close-circle",use:"icon-medium-close-circle-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-close-circle"><circle cx="12" cy="12" r="11" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M16 8l-8.005 7.9949M8 8l8 8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(a);e.exports=a},xXFZ:function(e,t,s){var n=s("ziER"),i=s("5JeM"),a=new n({id:"icon-custom-arrow-up",use:"icon-custom-arrow-up-usage",viewBox:"0 0 9 9",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 9" id="icon-custom-arrow-up"><path fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8 6.09L4.476 2.91 1 6.09" /></symbol>'});i.add(a);e.exports=a},ys4f:function(e,t){e.exports='<div class="true-false-attempt-review true-false">\n  <div class="true-false-question">\n    <bb-rich-text-editor\n      ng-model="assessmentQuestion.questionAttempt.question.questionText.rawText"\n      is-read-only="true"\n      supports-inline-document-render="true"\n      plugin-options="{\'attachment\': true, \'math\': true, \'contentMarket\': true}">\n    </bb-rich-text-editor>\n  </div>\n  \x3c!--In review as instructor or as student with posted grade--\x3e\n  <bb-question-answer-status\n    correctness="::assessmentQuestion.getAnswerResult()"\n    was-late="::assessmentQuestion.wasAnsweredLate()"\n    hide-correctness-text="true"\n    class="true-false-question-answer">\n    <div bb-translate="{{::assessmentQuestion.viewHelper.answerDescriptionKey}}"></div>\n  </bb-question-answer-status>\n  <div class="true-false-answers-container">\n    <ol class="true-false-answers">\n      <li class="true-false-answer-true {{::assessmentQuestion.getAnswerChoiceStyles(true)}}">\n        <div class="answer-circle" bb-translate>components.directives.assessment-question.true-false.abbreviated-true</div>\n        <input type="radio"\n                id="{{assessmentQuestion.elementId + \'true-false-answer-true\' }}"\n                name="{{assessmentQuestion.elementId + \'true-false-answers-choice\' }}"\n                aria-labelledby="{{assessmentQuestion.elementId + \'true-false-answer-true-label\' }}"\n                aria-describedby="{{(assessmentQuestion.canShowCorrectAnswerRelatedDetail() && assessmentQuestion.viewHelper.isAnswerChoiceCorrect(true)) ? \'correct-notification\': null }}"\n                ng-model="assessmentQuestion.questionAttempt.givenAnswer"\n                ng-value="true"\n                disabled\n                analytics-id="assessment.question.true.false.answer.givenAnswer.input.radio"/>\n        <label id="{{assessmentQuestion.elementId + \'true-false-answer-true-label\' }}"\n                for="{{assessmentQuestion.elementId + \'true-false-answer-true\' }}"\n                class="checkbox-label">\n          <span ng-if="assessmentQuestion.viewHelper.showIncorrectIndicator(true)"\n                class="correctness-label" bb-translate>\n            components.directives.assessment-question.true-false.incorrect-label\n          </span>\n          {{::assessmentQuestion.viewHelper.trueAnswerOptionLabel}}\n        </label>\n        <span id="correct-notification" class="correct-answer-text" ng-if="assessmentQuestion.canShowCorrectAnswerRelatedDetail() && assessmentQuestion.viewHelper.isAnswerChoiceCorrect(true)" bb-translate>components.directives.assessment-question.true-false.correct-label</span>\n      </li>\n      <li class="true-false-answer-false {{::assessmentQuestion.getAnswerChoiceStyles(false)}}">\n        <div class="answer-circle" bb-translate>components.directives.assessment-question.true-false.abbreviated-false</div>\n        <input type="radio"\n                id="{{assessmentQuestion.elementId + \'true-false-answer-false\' }}"\n                name="{{assessmentQuestion.elementId + \'true-false-answers-choice\' }}"\n                aria-labelledby="{{assessmentQuestion.elementId + \'true-false-answer-false-label\' }}"\n                aria-describedby="{{(assessmentQuestion.canShowCorrectAnswerRelatedDetail() && assessmentQuestion.viewHelper.isAnswerChoiceCorrect(false)) ? \'correct-notification\': null}}"\n                ng-model="assessmentQuestion.questionAttempt.givenAnswer"\n                ng-value="false"\n                disabled\n                analytics-id="assessment.question.true.false.answer.givenAnswer.input.radio"/>\n        <label id="{{assessmentQuestion.elementId + \'true-false-answer-false-label\' }}"\n                for="{{assessmentQuestion.elementId + \'true-false-answer-false\' }}"\n                class="checkbox-label">\n          <span ng-if="assessmentQuestion.viewHelper.showIncorrectIndicator(false)"\n                class="correctness-label" bb-translate>\n            components.directives.assessment-question.true-false.incorrect-label\n          </span>\n          {{::assessmentQuestion.viewHelper.falseAnswerOptionLabel}}\n        </label>\n        <span id="correct-notification" class="correct-answer-text" ng-if="assessmentQuestion.canShowCorrectAnswerRelatedDetail() && assessmentQuestion.viewHelper.isAnswerChoiceCorrect(false)" bb-translate>components.directives.assessment-question.true-false.correct-label</span>\n      </li>\n    </ol>\n  </div>\n  <bb-automated-question-feedback\n    feedback="assessmentQuestion.getAutomatedQuestionFeedback()"\n    is-collapsible="assessmentQuestion.allowCollapsingOfAutomatedFeedbackIfShown()"\n    editor-plugins-options="automatedFeedbackEditorPluginOptions"\n  />\n</div>\n'}}]);