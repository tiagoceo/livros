(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{Dr7i:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("zYa8"),i=s("UxPl");const a="ultra.components.directives.bbUiIcon.small.Started";Object(n.a)(i.a,a,"bbUiIconSmallStarted")},F2mp:function(e,t,s){"use strict";s.r(t);var n=s("Llzl"),i=s("mJUP"),a=s("iAHr"),r=s("Xcx3"),o=s("D57K"),c=s("VdDF"),l=s("Fvsw"),v=s("0JpG"),d=s("MoIS"),u=s("+g6d"),p=s("yC9S"),b=s("aHpC"),w=s("9hUw"),m=s("aPUy"),h=s("15AK"),g=s("bzJv"),R=s("zisU"),P=s("H9hP"),D=s("wAfT"),S=s("Dr7i"),O=s("tA/q"),f=s("ERkP"),j=s("1ZbL"),A=s("/n7R"),C=s("0x+l");const x="ultra.components.directives.content.assessment.assignedPeerGrading.tooltip",I={Class:({tooltipTitle:e})=>f.createElement(A.AnalyticsTooltip,{placement:"top",title:e,"aria-label":e,analyticsId:"components.directives.content.assessment.assignedPeerGrading.tooltip"},f.createElement(C.Attention,null)),bindingNames:["tooltipTitle"]};angular.module(x,[]).component("bbUiAssignedPeerGradingTooltip",Object(j.a)(I));var T=s("cghv"),U=s("zGdY");const L="ultra.features.course.content.assessment.assignedPeerGrading";let k=class{constructor(e,t,s,n,i){this.$scope=e,this.$q=t,this.localize=s,this.context=n,this.peerService=i,this.peerReviews=[],e.assignedPeerReviews=this,this.currentDate=this.context.getServerTime(),this.submissionDueDate=e.submissionDueDate&&c.a.parseStringToDate(e.submissionDueDate),this.peerReviewDueDate=e.peerReviewDueDate&&c.a.parseStringToDate(e.peerReviewDueDate)}$onInit(){this.$scope.$on(h.FEEDBACK_UPDATED,(()=>{this.createPeerReviewList()})),Object(m.b)(this.$scope,(()=>this.createPeerReviewList()))}$onChanges(){this.peerService.getOrCreatePeerContentWithAttemptsFromContent(this.content).then((e=>{this.peerReviewContentObject=e,this.createPeerReviewList()}))}createPeerReviewList(){this.peerReviews=new Array(this.peerReviewsPerStudent),this.peerReviews.fill(null),this.populatePeerReviews(this.peerReviewContentObject.reviewableAttempts),this.populatePeerReviews(this.peerReviewContentObject.deletedAttempts),this.callComponentUpdatedCallback()}populatePeerReviews(e){e.forEach((e=>{this.peerReviews[e.delegatedGraderOrder]=e}))}callComponentUpdatedCallback(){this.componentUpdatedCallback&&this.componentUpdatedCallback(this.isSubmissionComplete,this.isPeerReviewPeriodOpen,this.hasPeerReviewsAssigned,this.hasBeenAssignedAllPeerReviews,(()=>this.assignAndGoToNewPeerReview()))}get isPeerReviewPeriodOpen(){return!(!this.isSubmissionComplete||!this.hasEnoughPeerSubmissions())&&(this.isInPeerReviewWindow||this.isAfterPeerReviewWindow&&(this.allowLatePeerReviews||this.hasDueDateAccommodation))}assignAndGoToNewPeerReview(){var e;return null===(e=this.peerReviewContentObject)||void 0===e?void 0:e.assignNewPeerReview().then((e=>this.navigateToPeerReview(e.delegatedGraderOrder)))}navigateToPeerReview(e){var t;const s=null===(t=this.peerReviewContentObject)||void 0===t?void 0:t.getReviewableAttemptByDelegatedGraderOrder(e);return this.isPeerReviewDisabled(s)||this.isInPeerSubmissionWindow?this.$q.resolve():this.peerReviewContentObject.navigateToPeerReview(e).then((()=>this.callComponentUpdatedCallback()))}isPeerReviewComplete(e){return U.l.Completed===(null==e?void 0:e.status)}isPeerReviewStarted(e){return U.l.NeedsGrading===(null==e?void 0:e.status)}isPeerReviewSaved(e){return!!(null==e?void 0:e.attemptLastGradedDate)&&!this.isPeerReviewComplete(e)}isReviewedAttemptDeleted(e){return Boolean(null==e?void 0:e.deletedAttempt)}getPeerReviewStatus(e){return!this.isSubmissionComplete||this.isReviewedAttemptDeleted(e)?g.a.Unavailable:this.isPeerReviewComplete(e)?g.a.Completed:this.isPeerReviewLate(e)?g.a.PastDue:this.isPeerReviewStarted(e)?g.a.Started:this.isPeerReviewPeriodOpen?g.a.NotStarted:g.a.Unavailable}isPeerReviewDisabled(e){const t=this.getPeerReviewStatus(e);return t===g.a.Unavailable||t===g.a.NotStarted||t===g.a.PastDue&&!e}get allPeerReviewsComplete(){return!this.peerReviews.some((e=>!this.isPeerReviewComplete(e)))}get isInPeerSubmissionWindow(){return c.a.isWithinDateRange(this.currentDate,{end:this.submissionDueDate,start:null},!1)}get isInPeerReviewWindow(){return!this.isInPeerSubmissionWindow&&c.a.isWithinDateRange(this.currentDate,{end:this.peerReviewDueDate,start:null},!1)}get isAfterPeerReviewWindow(){return!(this.isInPeerSubmissionWindow||this.isInPeerReviewWindow)}isPeerReviewLate(e){return this.isPeerReviewComplete(e)?!c.a.isWithinDateRange(e.attemptLastGradedDate,{end:this.peerReviewDueDate,start:null},!0)&&!this.hasDueDateAccommodation:this.isAfterPeerReviewWindow&&!this.hasDueDateAccommodation}get hasPeerReviewsAssigned(){var e;return(null===(e=this.peerReviewContentObject)||void 0===e?void 0:e.reviewableAttempts.length)>=1}get hasBeenAssignedAllPeerReviews(){var e,t;return(null===(e=this.peerReviewContentObject)||void 0===e?void 0:e.reviewableAttempts.length)>=(null===(t=this.peerReviewContentObject)||void 0===t?void 0:t.numOfPeerReviewsToComplete)}get deployedAssessment(){var e;return(null===(e=this.content)||void 0===e?void 0:e.contentDetail)&&this.content.getDeployedAssessment()}hasEnoughPeerSubmissions(){var e,t;return null!==(t=null===(e=this.peerReviewContentObject)||void 0===e?void 0:e.hasEnoughSubmissionsForPeerAssessment)&&void 0!==t&&t}getDescriptionTextKey(){return this.allPeerReviewsComplete?"allReviewsCompleted":this.isInPeerSubmissionWindow?"duringSubmissionWindow":this.hasEnoughPeerSubmissions()?this.isSubmissionComplete?this.isInPeerReviewWindow?"duringReviewWindow."+(this.isSubmissionLate?"lateSubmission":"onTimeSubmission"):this.allowLatePeerReviews?"afterReviewWindow.lateReviewsAccepted":"afterReviewWindow.lateReviewsNotAccepted":(this.isInPeerReviewWindow?"duringReviewWindow":"afterReviewWindow")+".noSubmission":"notEnoughSubmissions"}getTooltipText(){return this.localize.translateSync({locale:this.localize.getLocale(this.$scope),key:"course.content.assessment.overview.assignedPeerReviews.peerSubmissionDeletedTooltip"})}};k=Object(o.a)([Object(p.a)({moduleName:L,componentName:"bbAssignedPeerGrading",template:T,bindings:{submissionDueDate:"<",peerReviewDueDate:"<",peerReviewsPerStudent:"<",allowLatePeerReviews:"<",hasDueDateAccommodation:"<",isSubmissionComplete:"<",isSubmissionLate:"<",content:"<",componentUpdatedCallback:"<?"},requireModules:[x,R.a,P.a,D.a,S.a,O.a,l.a,d.c,w.a,u.a]}),Object(o.c)(0,Object(b.b)("$scope")),Object(o.c)(1,Object(b.b)("$q")),Object(o.c)(2,Object(b.b)(v.serviceName)),Object(o.c)(3,Object(b.b)(l.b)),Object(o.c)(4,Object(b.b)(w.b))],k);var N=s("ihlU"),W=s("iq5i"),y=s("WfnG"),$=s("IiJs"),z=s("ap1t"),G=s("QyCV"),E=s("5Tom"),B=s("nYZ0"),Y=s("fYJU"),K=s("TnpK"),J=s("zYa8"),q=s("2QtM");const F="ultra.components.directives.bbUiIcon.large.Attention";Object(J.a)(q.a,F,"bbUiIconLargeAttention");var Z=s("Zy5h");const H="ultra.directives.group.group-student-enrollment-asmt-banner";let M=class extends E.a{constructor(e,t,s,n,i){super(e,t,s,n,i),this.scope=e,this.contentService=t,this.currentUserService=s,this.localize=n,this.ultraState=i,this.showBanner=!1,this.showBanner=!0}async openContentEnrollPanel(){await this.ultraState.leavePeekState(),this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id,fromView:this.fromView})}};M=Object(o.a)([Object(p.a)({moduleName:H,componentName:"bbGroupStudentEnrollmentAsmtBanner",template:Z,bindings:{content:"<",fromView:"@"},requireModules:[B.d,Y.a,v.moduleName,K.b,F]}),Object(o.c)(0,Object(b.b)("$scope")),Object(o.c)(1,Object(b.b)(B.f)),Object(o.c)(2,Object(b.b)(Y.b)),Object(o.c)(3,Object(b.b)(v.serviceName)),Object(o.c)(4,Object(b.b)(K.d))],M);var V=s("vhkR"),Q=s("u4ux"),_=s("6mvz"),X=s("p7NW"),ee=s("ftvW"),te=s("YHe3"),se=s("OvxF"),ne=s("zjPK"),ie=s("/qpZ"),ae=s("0+Qs"),re=s("lEL+"),oe=s("vDpp"),ce=s("jcim"),le=s("7eG8"),ve=s("IaSh");const de="ultra.features.course.content.banners.bbPeerReviewHasBeenDeletedBanner",ue={Class:ve.s,bindingNames:["assignAndNavigateToPeerReview","dismissBanner","hasEnoughSubmissionsForPeerAssessment","canRetrieveNewPeerReview"],renderLocalized:!0};n.module(de,[]).component("bbPeerReviewHasBeenDeletedBanner",Object(j.a)(ue));const pe="ultra.features.course.content.banners.bbTimeLimitOverriddenByDueDateBanner",be={Class:ve.F,renderLocalized:!0};n.module(pe,[]).component("bbTimeLimitOverriddenByDueDateBanner",Object(j.a)(be));var we=s("2lxm");s.d(t,"moduleName",(function(){return me}));const me="ultra.features.course.content.assessmentOverview";n.module(me,[a.a,L,N.a,se.a,W.a,y.a,$.a,ee.a,z.a,G.a,H,E.b,V.a,Q.b,w.a,ae.a,re.a,te.a,X.f,_.a,ie.a,ne.a,oe.a,ce.a,le.a,de,pe,we.a]).controller(r.controllerName,r.Controller).controller(i.controllerName,i.Controller)},H9hP:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("zYa8"),i=s("ULah");const a="ultra.components.directives.bbUiIcon.small.Complete";Object(n.a)(i.a,a,"bbUiIconSmallComplete")},WfnG:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("zYa8"),i=s("cdNx");const a="ultra.components.directives.bbUiIcon.large.Kudos";Object(n.a)(i.a,a,"bbUiIconLargeKudos")},Zy5h:function(e,t){e.exports='<div ng-if="$ctrl.showBanner" class="group-student-enrollment-asmt-banner">\n  <bb-ui-icon-large-attention color="primary" class-name="attention-icon"></bb-ui-icon-large-attention>\n  <div class="banner-text">\n    <span bb-translate>components.directives.content.assessment.group-student-enrollment-asmt-banner.available-to-groups</span>\n    <a ng-if="$ctrl.isOpenEnrollment()" href="javascript:void(0);" ng-click="$ctrl.openContentEnrollPanel()" analytics-id="components.directives.content.assessment.open.content.enroll.panel.link">\n      <span bb-translate>components.directives.content.assessment.group-student-enrollment-asmt-banner.enroll-to-participate</span>\n    </a>\n  </div>\n</div>\n'},cghv:function(e,t){e.exports=' <div class="assigned-peer-reviews row collapse">\n  <div class="small-12 columns title">\n    <h2 bb-translate>course.content.assessment.overview.assignedPeerReviews.title</h2>\n  </div>\n   <div class="columns description">\n     <span bb-translate\n           translate-values="{datetime: assignedPeerReviews.submissionDueDate}">course.content.assessment.overview.assignedPeerReviews.description.{{assignedPeerReviews.getDescriptionTextKey()}}</span>\n   </div>\n  <div class="columns list">\n    <ul class="row">\n      <li ng-repeat="peerReview in assignedPeerReviews.peerReviews track by $index" class="item">\n        <div ng-class="{disabled: !assignedPeerReviews.isPeerReviewPeriodOpen}">\n          <span ng-if="!assignedPeerReviews.isInPeerSubmissionWindow" ng-switch on="assignedPeerReviews.getPeerReviewStatus(peerReview)">\n            <div ng-switch-default>\n              \x3c!-- reviewed submission was deleted --\x3e\n              <bb-ui-assigned-peer-grading-tooltip ng-if="assignedPeerReviews.isReviewedAttemptDeleted(peerReview)"\n                                                   class="peer-review-icon unavailable submission-deleted"\n                                                   tooltip-title="::assignedPeerReviews.getTooltipText()">\n              </bb-ui-assigned-peer-grading-tooltip>\n              \x3c!-- peer review otherwise unavailable --\x3e\n              <bb-ui-icon-small-lock ng-if="!assignedPeerReviews.isReviewedAttemptDeleted(peerReview)"\n                                     class="peer-review-icon unavailable">\n              </bb-ui-icon-small-lock>\n            </div>\n            \x3c!-- peer review not started --\x3e\n            <bb-ui-icon-small-unlocked ng-switch-when="NotStarted" class="peer-review-icon not-started"></bb-ui-icon-small-unlocked>\n            \x3c!-- peer review late --\x3e\n            <bb-ui-icon-small-attention ng-switch-when="PastDue"\n                                        class="peer-review-icon past-due"\n                                        ng-class="{draft: assignedPeerReviews.isPeerReviewSaved(peerReview)}">\n            </bb-ui-icon-small-attention>\n            \x3c!-- peer review started--\x3e\n            <bb-ui-icon-small-started ng-switch-when="Started" class="peer-review-icon started"></bb-ui-icon-small-started>\n            \x3c!-- peer review complete --\x3e\n            <bb-ui-icon-small-complete ng-switch-when="Completed" class="peer-review-icon completed"></bb-ui-icon-small-complete>\n          </span>\n          <span ng-if="assignedPeerReviews.isInPeerSubmissionWindow">\n            <bb-ui-icon-small-lock class="peer-review-icon unavailable"></bb-ui-icon-small-lock>\n          </span>\n          <div ng-if="assignedPeerReviews.isPeerReviewDisabled(peerReview)"\n               ng-switch on="assignedPeerReviews.getPeerReviewStatus(peerReview)"\n               class="peer-review-text">\n            <span class="peer-review-number"\n                  bb-translate\n                  translate-values="{peerReviewIndex: {{$index + 1}}}">course.content.assessment.overview.assignedPeerReviews.submissionLabel</span>&nbsp;\n            <span ng-switch-when="NotStarted" class="peer-review-status not-started" bb-translate>course.content.assessment.overview.assignedPeerReviews.start</span>\n            <span ng-switch-when="PastDue" class="peer-review-status past-due" bb-translate>course.content.assessment.overview.pastDue</span>\n            <span ng-switch-default class="peer-review-status unavailable" bb-translate>course.content.assessment.overview.assignedPeerReviews.unavailable</span>\n          </div>\n          <a ng-if="!assignedPeerReviews.isPeerReviewDisabled(peerReview)"\n             class="peer-review-link"\n             ng-class="{disabled: !assignedPeerReviews.isPeerReviewPeriodOpen}"\n             ng-switch on="assignedPeerReviews.getPeerReviewStatus(peerReview)"\n             analytics-id="course.content.assessment.peer.assessment.peer.review.button"\n             ng-click="assignedPeerReviews.navigateToPeerReview($index)"\n             href="javascript:void(0);"\n            >\n            <span class="peer-review-number"\n                  bb-translate\n                  translate-values="{peerReviewIndex: {{$index + 1}}}">course.content.assessment.overview.assignedPeerReviews.submissionLabel</span>&nbsp;\n            \x3c!-- peer review late --\x3e\n            <span ng-switch-when="PastDue">\n              <span class="peer-review-status past-due" bb-translate>course.content.assessment.overview.pastDue</span>\n              <span class="peer-review-status draft"\n                    ng-if="assignedPeerReviews.isPeerReviewSaved(peerReview)"\n                    bb-translate\n                    translate-values="{datetime: peerReview.attemptLastGradedDate}">course.content.assessment.overview.assignedPeerReviews.draft</span>\n            </span>\n            \x3c!-- peer review started--\x3e\n            <span ng-switch-when="Started">\n              <span bb-translate class="peer-review-status started"\n                    ng-if="!assignedPeerReviews.isPeerReviewSaved(peerReview)">course.content.assessment.overview.assignedPeerReviews.started</span>\n              <span bb-translate class="peer-review-status saved"\n                    ng-if="assignedPeerReviews.isPeerReviewSaved(peerReview)"\n                    translate-values="{datetime: peerReview.attemptLastGradedDate}">course.content.assessment.overview.assignedPeerReviews.draft</span>\n            </span>\n            \x3c!-- peer review complete --\x3e\n            <span ng-switch-when="Completed">\n              <span class="peer-review-status completed" ng-class="{\'vertical-bar\' : assignedPeerReviews.isPeerReviewLate(peerReview) }" bb-translate>course.content.assessment.overview.assignedPeerReviews.complete</span>\n              <span ng-if="assignedPeerReviews.isPeerReviewLate(peerReview)" class="peer-review-status late" bb-translate>course.content.assessment.overview.late</span>\n            </span>\n          </a>\n        </div>\n      </li>\n    </ul>\n  </div>\n</div>\n'},mJUP:function(e,t,s){"use strict";s.r(t),s.d(t,"controllerName",(function(){return d})),s.d(t,"AssessmentAttemptController",(function(){return u})),s.d(t,"Controller",(function(){return p}));var n=s("D57K"),i=(s("s5UK"),s("xjJw"),s("ZKRZ"),s("dpCN"),s("JbSi"),s("TR8k"),s("D1Wg"),s("sZYy"),s("v0wN"),s("QhTW"),s("w9Zy")),a=s("TnpK"),r=s("Y+9S"),o=s("rNTV");s.d(t,"template",(function(){return o}));var c=s("nmzr"),l=s("0JpG"),v=s("aHpC");const d="ultra.features.course.content.assessment.attempt.assessmentAttempt.controller";let u=class{constructor(e,t,s,n,i,a,o,c){this.$rootScope=e,this.$scope=t,this.attempt=s,this.contentData=n,this.course=i,this.bbOffcanvas=a,this.ultraState=o,this.bbLocalize=c,t.assessmentAttempt=this,Object(r.m)()&&this.notifyMobileApp()}notifyMobileApp(){const e=this.bbLocalize.getLocale(this.$scope),t=this.bbLocalize.translateSync({key:this.contentData.gradingColumn.gradebookCategory.title,locale:e}),s={type:r.c.AttemptOpened,status:r.b.Success,contentId:this.contentData.courseContent.id,pageTitle:t,permission:{showDetail:!0}},n=Object(r.q)(s);n.response.subscribe((e=>{e.event===r.a.GotoDetail&&this.ultraState.goPeekState(c.c.ASSESSMENT_DETAILS)})),this.$scope.$on("$destroy",(()=>{Object(r.f)(n.correlationId)}))}returnToOverview(){return this.ultraState.goPeekState("assessment.overview").then((()=>{this.bbOffcanvas.shrinkTopPanel(),this.$rootScope.$broadcast("bb-assessment-attempt-save",this.attempt,this.contentData.gradingColumn.id,!!this.contentData.courseContent.isGroupContent)}))}};u=Object(n.a)([Object(n.c)(0,Object(v.b)("$rootScope")),Object(n.c)(1,Object(v.b)("$scope")),Object(n.c)(2,Object(v.b)("attempt")),Object(n.c)(3,Object(v.b)("contentData")),Object(n.c)(4,Object(v.b)("currentCourse")),Object(n.c)(5,Object(v.b)(i.e)),Object(n.c)(6,Object(v.b)(a.d)),Object(n.c)(7,Object(v.b)(l.serviceName))],u);class p extends u{}},rNTV:function(e,t){e.exports='<div>\n  <bb-assessment-attempt\n    attempt="assessmentAttempt.attempt"\n    content-data="assessmentAttempt.contentData"\n    course="assessmentAttempt.course"\n    redirect="assessmentAttempt.returnToOverview()"\n  ></bb-assessment-attempt>\n\n  <div ui-view="assessment-attempt-peek"></div>\n</div>\n'},"tA/q":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("zYa8"),i=s("sY4P");const a="ultra.components.directives.bbUiIcon.small.Unlocked";Object(n.a)(i.a,a,"bbUiIconSmallUnlocked")},vDpp:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("zYa8"),i=s("QACz");const a="ultra.components.directives.bbUiIcon.medium.ProctorShield";Object(n.a)(i.a,a,"bbUiIconMediumProctorShield")},wAfT:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("zYa8"),i=s("GAfu");const a="ultra.components.directives.bbUiIcon.small.Lock";Object(n.a)(i.a,a,"bbUiIconSmallLock")},zisU:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("zYa8"),i=s("7NIW");const a="ultra.components.directives.bbUiIcon.small.Attention";Object(n.a)(i.a,a,"bbUiIconSmallAttention")}}]);