(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{DiuX:function(e,t){e.exports='<svg width="38" height="38" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="19" cy="19" r="18" fill="#007D2C" stroke="#fff" stroke-width="2"/><path d="M11 21.125 16.6 26 27 13" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>'},IArP:function(e,t,s){"use strict";var n=s("ERkP"),i=s("nsO7"),a=s("tN4z"),o=s("flm2"),r=s("sEjo"),l=s("hgFh"),c=s("8jBL"),u=s("VQ4P"),d=s("zGdY");function m(e){const{importStatusInfo:t,openImportDetailsPanel:s,dismissImportStatusBanner:o}=e,m=Object(u.a)();let p,h,g,b,y,f,v,C,E=!1;function P(){return!!h&&{onDarkBg:E,...b&&{onClick:b},...p&&{href:m(p)},...g&&{target:g}}}switch(t.queueTask.taskStatus){case d.Rb.Waiting:case d.Rb.Assigned:case d.Rb.Running:{y="questionBanks.importStatus.message.inProgress",h="questionBanks.importStatus.moreInfo.supportedQuestions",p="questionBanks.importStatus.moreInfo.supportedQuestionsHref",g="_blank",E=!0;const e=P();f=n.createElement(l.a,{className:"import-status-banner__processingProgressIcon",ariaLabel:m("global.loading"),size:"24"}),v="info",C=[n.createElement(n.Fragment,null,!!e&&n.createElement(a.AnalyticsLink,{className:"import-status-banner__more-info",...e,analyticsId:"course.questionBank.panel.importStatusBanner.moreInfo.link"},m(h)))];break}case d.Rb.Complete:{const{conversionInfo:e}=t,i=e&&e.messageType;if(i){switch(y=`questionBanks.importStatus.message.${i}`,i){case"unsupported":case"unconverted":h="questionBanks.importStatus.moreInfo.learnMore",p="questionBanks.importStatus.moreInfo.learnMoreHref",g="_blank";break;case"partial":h="questionBanks.importStatus.moreInfo.viewDetails",b=()=>null==s?void 0:s(t.queueTask.taskId)}const e=P();f=n.createElement(c.DefaultConversionExceptions,null),v="error",C=[n.createElement(n.Fragment,null,!!e&&n.createElement(a.AnalyticsLink,{className:"import-status-banner__more-info",...e,analyticsId:"course.questionBank.panel.importStatusBanner.moreInfo.link"},m(h))),n.createElement(r.a,{analyticsId:"course.questionBank.panel.importStatusBanner.dismissButton",key:"dismiss",onClick:()=>o(t.queueTask.taskId)},m("components.directives.notice.dismiss"))]}else y="questionBanks.importStatus.message.success",f=n.createElement(c.CheckCircle,null),v="success",C=[n.createElement(r.a,{analyticsId:"course.questionBank.panel.importStatusBanner.dismissButton",key:"dismiss",onClick:()=>o(t.queueTask.taskId)},m("components.directives.notice.dismiss"))];break}case d.Rb.CompleteErrors:case d.Rb.Incomplete:{y="questionBanks.importStatus.message.failure",h="questionBanks.importStatus.moreInfo.learnMore",p="questionBanks.importStatus.moreInfo.learnMoreHref",g="_blank";const e=P();f=n.createElement(c.DefaultConversionExceptions,null),v="error",C=[n.createElement(n.Fragment,null,!!e&&n.createElement(a.AnalyticsLink,{className:"import-status-banner__more-info",...e,analyticsId:"course.questionBank.panel.importStatusBanner.moreInfo.link"},m(h))),n.createElement(r.a,{analyticsId:"course.questionBank.panel.importStatusBanner.dismissButton",key:"dismiss",onClick:()=>o(t.queueTask.taskId)},m("components.directives.notice.dismiss"))];break}}const w=function(e){var t;const s=null===(t=e.queueTask.queueTaskData)||void 0===t?void 0:t.packageName;if(!s)return"";const n=i.split(s,"/");return i.last(n)}(t);return{statusMessage:m(y,{importFilename:w}),icon:f,severity:v,actions:C}}s.d(t,"a",(function(){return p}));const p=e=>{const t=m(e);return n.createElement(o.a,{className:"import-status-banner",severity:t.severity,icon:t.icon,actions:t.actions},t.statusMessage)}},IaSh:function(e,t,s){"use strict";var n=s("ERkP"),i=s.n(n),a=s("7nmT"),o=s.n(a),r=s("uDfI"),l=s("Uhei"),c=s("tN4z"),u=s("9OUN"),d=s("IbyE"),m=s("E1pj"),p=s("nsO7"),h=s.n(p),g=s("GR+8"),b=s("MC1S"),y=s("AuQm"),f=s("zGdY"),v=s("0x+l"),C=s("EuXa"),E=s("vQ80"),P=s("EGyI"),w=s("nBlB"),I=s("l4Sq");class S{constructor(e){this.questions=e}getQuestionFeatureAnnouncements(){return{}}}var k=s("6Nff");var q=Object(w.DragNDropItem)((({checkAndDisableAssessmentSettings:e,courseId:t,index:s,dragPointRef:n,itemRef:a,alignedGoals:o,question:r,questionTitle:l,questionVisibleNumber:c,onQuestionEdit:u,onQuestionMadeDirty:d,persistQuestion:m,deleteQuestion:p,questionBeingEditedId:h,isAnyQuestionDirty:g,hasSubmissions:b,hasAssessmentModifyPermissions:y,openGoals:f,pluginsConfig:v,dragButtonAriaLabel:C,disableInteraction:E,openPoolQuestionPanel:P,addQuestionsToEmptyPool:w,localizationPrefix:I,showFeatureAnnouncement:S,supportsInlineDocumentRender:q,fileUploadSettings:Q,extraCreditVisibility:A,assessmentId:x})=>{const O=s+1;return i.a.createElement("div",{className:`js-assessment-question-${O}`,ref:a},i.a.createElement(k.a,{checkAndDisableAssessmentSettings:e,courseId:t,questionBeingEditedId:h,isAnyQuestionDirty:g,alignedGoals:o,question:r,questionTitle:l,questionVisibleNumber:c,onQuestionEdit:u,onQuestionMadeDirty:d,persistQuestion:m,deleteQuestion:p,hasSubmissions:b,hasAssessmentModifyPermissions:y,openGoals:f,pluginsConfig:v,dragButtonAriaLabel:C,dragPointRef:n,disableInteraction:E,openPoolQuestionPanel:P,addQuestionsToEmptyPool:w,localizationPrefix:I,showFeatureAnnouncement:S,supportsInlineDocumentRender:q,fileUploadSettings:Q,extraCreditVisibility:A,assessmentId:x}))})),Q=s("VQ4P"),A=s("PCui");var x=e=>{const t=Object(Q.a)();return i.a.createElement("div",{className:"dnd-question-preview"},(()=>{const{question:s,questionTitle:n}=e,a=d.N.isFileAttachment(s),o=d.N.isQuestionBlock(s),r=o?s.pointsPerQuestion:s.points,l="assessments.canvas.question.header."+(o?"pointsEach":"points");return a?i.a.createElement("div",{className:"dnd-question-preview__file"},i.a.createElement(y.r,{...Object(A.a)(s)[0],analyticsId:"assessment.canvas.question.preview.fileViewer",supportsInlineDocumentRender:e.supportsInlineDocumentRender})):i.a.createElement("div",{className:"dnd-question-preview__question"},i.a.createElement("div",{className:"dnd-question-preview__question-header"},n&&i.a.createElement("div",{className:"dnd-question-preview__question-header-inner"},i.a.createElement("h3",{className:"dnd-question-preview__title"},n),i.a.createElement("div",{className:"dnd-question-preview__pill"},t(l,{points:r}))),s.questionText&&i.a.createElement("div",{className:"dnd-question-preview__question-text",dangerouslySetInnerHTML:{__html:s.questionText.rawText}})))})())},O=s("+VgB");class N extends n.Component{constructor(){super(...arguments),this.questionPreviews={},this.getPreview=(e,t)=>{const s=e.id,n=this.questionPreviews[s];return null==n||n.question===e&&n.questionTitle===t||(this.questionPreviews[s]=null),null==this.questionPreviews[s]&&(this.questionPreviews[s]={question:e,questionTitle:t,preview:i.a.createElement(x,{question:e,questionTitle:t})}),this.questionPreviews[s].preview},this.hasQuestionCreatePermissions=e=>!0===p.get(e,"permissions.create"),this.getDraggingLabelObject=(e,t,s)=>{const{t:n}=this.props,i=this.props.keyInsertIndex-1,a=Object(O.a)(n);return this.props.isKeyboardMoving?e===i?{string:"assessments.canvas.drop.buttonStart",relation:""}:0===this.props.keyInsertIndex?{string:"assessments.canvas.drop.buttonTop",relation:""}:Object(I.a)("drop",this.props.items[i],s[i],a):Object(I.a)("drag",t,s[e],a)},this.getQuestionTitleArray=()=>{const{items:e,t}=this.props;let s=0;const n=[];return[e.map((e=>{if(!d.N.isPresentationOnly(e)&&!d.N.isPageBreak(e)){let i="assessments.canvas.question.header.",a={};if(d.N.isQuestionBlock(e)&&e.numOfQuestionsToChoose>1){const t=s+1,n=s+e.numOfQuestionsToChoose;i+="titleBlock",a={blockStart:t,blockEnd:n},s=n}else d.N.isQuestionBlock(e)&&0===e.numOfQuestionsToChoose?i+="titleBlockEmpty":(s+=1,i+="title",a={position:s});return n.push(s),t(i,a)}return n.push(null),null})),n]}}render(){const{items:e,t,AddButton:s,hasSubmissions:n,hasAssessmentModifyPermissions:a,isLoadingInProgress:o,notification:r}=this.props,l=new S(e).getQuestionFeatureAnnouncements(),[c,u]=this.getQuestionTitleArray();return i.a.createElement("div",null,o||n||!a?i.a.createElement("div",{className:"assessment-canvas-react__question-spacer"}):i.a.createElement(s,{buttonAriaLabel:t("assessments.canvas.add.buttonTop"),index:0,analyticsId:"assessments.canvas.add"}),r&&"start"===r.positionAfter&&i.a.createElement(r.Component,null),e.map((({alignedGoals:e,...a},o)=>{const d=o+1,m=this.getDraggingLabelObject(o,a,c),p=Object(I.a)("add",a,c[o],Object(O.a)(t));return i.a.createElement("div",{key:a.id},i.a.createElement(q,{alignedGoals:e,question:a,questionTitle:c[o],questionVisibleNumber:u[o],dragButtonAriaLabel:t(m.string,{relatedContent:m.relation}),index:o,preview:this.getPreview(a,c[o]),showFeatureAnnouncement:l[a.id],...this.props}),!n&&this.hasQuestionCreatePermissions(a)?i.a.createElement(s,{index:d,buttonAriaLabel:t(p.string,{relatedContent:p.relation}),analyticsId:"assessments.canvas.addQuestion"}):i.a.createElement("div",{className:"assessment-canvas-react__question-spacer"}),r&&a.id===r.positionAfter&&i.a.createElement(r.Component,null))})))}}var T=Object(w.DragNDropContainer)(Object(P.a)(N)),_=s("XeZT"),D=s.n(_);var j=e=>{const{text:t}=e;return i.a.createElement("div",{className:"divider-text-container"},i.a.createElement("span",null,t))};const B=e=>{const{isRandomizationOfQuestionsRequired:t,isRandomizationOfAnswersRequired:s}=e.settings,n=`${e.localizationPrefix}.canvas.subheader.isAnswersRandomized`,a=`${e.localizationPrefix}.canvas.subheader.isQuestionsRandomized`,o=`${e.localizationPrefix}.canvas.subheader.isBothRandomized`;return t&&s===f.Wb.Always?i.a.createElement(L,{messageKey:o}):t?i.a.createElement(L,{messageKey:a}):s===f.Wb.Always?i.a.createElement(L,{messageKey:n}):null},L=e=>{const{messageKey:t}=e,s=Object(Q.a)();return i.a.createElement("div",null,i.a.createElement("div",{className:"assessment-subheader"},i.a.createElement(j,{text:s(t)})))};var M=e=>{const{content:t}=e,{deploymentSettings:s}=t;return i.a.createElement(B,{settings:s,localizationPrefix:e.localizationPrefix})},F=s("Zwiy"),R=s("8jBL"),z=s("myse"),H=s("Y+9S"),$=s("Begd"),G=s("YSVG");var V=e=>{const{questionSourceName:t}=e,s=Object(Q.a)();return i.a.createElement("div",{className:"question-pool-question-header question-pool-question-header--edit"},i.a.createElement(G.b,{...e,showPointsInfo:!1}),i.a.createElement("div",{className:"question-pool-question-header__question-source"},s("questionPools.questionHeader.questionSource",{questionSourceName:t})))},U=s("caKH"),W=s("WBPx");const K="assessments.canvas.question.questionBlock.removeQuestionFromPoolConfirmation";class X extends i.a.Component{constructor(e){super(e),this.actionMenuButtonRef=i.a.createRef(),this.onDeleteClick=()=>{this.setState({isConfirmationDialogOpen:!0})},this.onConfirmationDismiss=()=>{this.setState({isConfirmationDialogOpen:!1})},this.onCancelDelete=()=>{this.onConfirmationDismiss(),this.actionMenuButtonRef.current.firstChild.focus()},this.onMenuOpen=()=>{this.state.isConfirmationDialogOpen&&this.onConfirmationDismiss()},this.state={isConfirmationDialogOpen:!1}}getActionMenuProps(){const{t:e,hasSubmissions:t,hasAssessmentModifyPermissions:s,startEditMode:n}=this.props,a={directionalHint:6,enableBodyScrollingDisabledCheck:!1,onMenuOpened:this.onMenuOpen,items:[]};return s&&a.items.push({key:"edit",name:e("questionPools.questionHeader.edit"),icon:i.a.createElement(v.EditTool,null),onClick:()=>n()}),!t&&s&&a.items.push({key:"delete",name:e("questionPools.questionHeader.delete"),icon:i.a.createElement(v.Trash,null),onClick:this.onDeleteClick}),a}getDeleteConfirmationProps(){const{t:e}=this.props;return{onDismiss:this.onConfirmationDismiss,showAsCallout:!0,target:this.actionMenuButtonRef.current,calloutProps:{setInitialFocus:!0},dialogContentProps:{type:b.DialogType.actionConfirmation,showCloseButton:!1,title:e(`${K}.title`),subText:e(`${K}.subText`)}}}render(){const{deleteQuestion:e,t,overflowMenuButtonLabelData:s}=this.props,n=this.getActionMenuProps();return i.a.createElement("div",{ref:this.actionMenuButtonRef},!!n.items.length&&i.a.createElement(b.ActionMenu,{maintainExpandedProperties:this.state.isConfirmationDialogOpen,menuProps:n,"aria-hidden":"false",ariaLabel:t(s.string,{relatedContent:s.relation}),analyticsId:"questionPools.questionHeader.actionMenu"}),this.state.isConfirmationDialogOpen?i.a.createElement(U.c,{...this.getDeleteConfirmationProps(),analyticsId:"questionPools.questionHeader.confirmationDialog.dialog"},i.a.createElement(b.DialogFooter,null,i.a.createElement(W.AnalyticsDefaultButton,{onClick:this.onCancelDelete,analyticsId:"questionPools.questionHeader.confirmationDialog.cancel.button"},t(`${K}.cancel`)),i.a.createElement(W.AnalyticsPrimaryButton,{onClick:e,analyticsId:"questionPools.questionHeader.confirmationDialog.remove.button"},t(`${K}.remove`)))):null)}}var Y=Object(P.a)(X);var Z=e=>{const{questionSourceName:t,deleteQuestion:s,startEditMode:n,hasSubmissions:a,hasAssessmentModifyPermissions:o,overflowMenuButtonLabelData:r}=e,l=Object(Q.a)();return i.a.createElement("div",{className:"question-pool-question-header question-pool-question-header--read"},i.a.createElement("div",{className:"question-pool-question-header__title-row"},i.a.createElement(G.b,{...e,showPointsInfo:!1}),i.a.createElement("div",{className:"question-pool-question-header__menu-icon"},i.a.createElement(Y,{deleteQuestion:s,startEditMode:n,hasSubmissions:a,hasAssessmentModifyPermissions:o,overflowMenuButtonLabelData:r}))),i.a.createElement("div",{className:"question-pool-question-header__question-source"},l("questionPools.questionHeader.questionSource",{questionSourceName:t})))},J=s("UJ5P");var ee=e=>J.a.ACTIVE===e.editMode?i.a.createElement(V,{...e}):i.a.createElement(Z,{...e});var te=e=>{const{courseId:t,question:s,deleteQuestion:n,hasSubmissions:a,focusTitle:o,isAnyQuestionDirty:r,questionBeingEditedId:l,onQuestionEdit:c,onQuestionMadeDirty:u,persistQuestion:d,hasAssessmentModifyPermissions:m,localizationPrefix:p,supportsInlineDocumentRender:h,extraCreditVisibility:g,assessmentId:b}=e,y=Object(Q.a)();return i.a.createElement("div",{className:"question-pool-question"},i.a.createElement(k.a,{assessmentId:b,courseId:t,focusTitle:o,question:s,deleteQuestion:n,hasSubmissions:a,questionBeingEditedId:l,questionTitle:y(`question.typeLabels.${s.questionType}`),onQuestionEdit:c,onQuestionMadeDirty:u,isAnyQuestionDirty:r,persistQuestion:d,openGoals:()=>{},pluginsConfig:{},showQuestionControls:!1,localizationPrefix:p,supportsInlineDocumentRender:h,extraCreditVisibility:g,customQuestionHeader:e=>{return i.a.createElement(ee,{...e,questionSourceName:s.sourceInfo.name,hasAssessmentModifyPermissions:m,hasSubmissions:a,deleteQuestion:n,overflowMenuButtonLabelData:(t=e.questionTitle,Object(I.a)("overflow",s,t,Object(O.a)(y)))});var t}}))};class se extends n.Component{constructor(e){super(e),this.componentDidMount=()=>{this.observer=new IntersectionObserver((e=>{e[0].isIntersecting&&this.props.loadMoreQuestions()}),{rootMargin:"0px"}),this.observer.observe(this.observerRef.current)},this.componentWillUnmount=()=>{this.observer.disconnect()},this.isAnyQuestionDirty=()=>this.state.questionBeingEditedIsDirty,this.onQuestionEdit=e=>{this.setState((()=>({questionBeingEditedId:e,questionBeingEditedIsDirty:!1})))},this.onQuestionMadeDirty=e=>{e!==this.state.questionBeingEditedIsDirty&&(this.props.setIsAnyQuestionDirty(e),this.setState((()=>({questionBeingEditedIsDirty:e}))))},this.state={questionBeingEditedId:null,questionBeingEditedIsDirty:!1},this.observerRef=i.a.createRef()}render(){const{courseId:e,questions:t,hasSubmissions:s,deleteQuestion:n,isLoading:a,firstNewQuestionBankId:o,persistQuestion:r,hasAssessmentModifyPermissions:l,questionPoolId:c,assessmentId:u,localizationPrefix:d,supportsInlineDocumentRender:m,loadMoreQuestions:p,extraCreditVisibility:h}=this.props;return i.a.createElement("div",{className:"question-pool-question-list assessment-canvas-react"},t&&t.map((t=>i.a.createElement(te,{key:t.id,courseId:e,question:t,hasSubmissions:s,hasAssessmentModifyPermissions:l,deleteQuestion:()=>n(t,{courseId:e,assessmentId:u,questionBlockId:c}),focusTitle:o===t.id,onQuestionEdit:this.onQuestionEdit,onQuestionMadeDirty:this.onQuestionMadeDirty,questionBeingEditedId:this.state.questionBeingEditedId,isAnyQuestionDirty:this.isAnyQuestionDirty(),persistQuestion:r,localizationPrefix:d,supportsInlineDocumentRender:m,extraCreditVisibility:h,assessmentId:u}))),i.a.createElement("div",{className:"question-pool-ref",ref:this.observerRef}),(!t||a)&&i.a.createElement($.Spinner,{size:$.SpinnerSize.large}))}}var ne=Object(g.a)(se),ie=s("3/0u");var ae=e=>{const t=Object(Q.a)(),{closePanel:s,setCloseDialogVisibility:n}=e;return i.a.createElement(U.c,{onDismiss:()=>n(!1),hidden:!1,dialogContentProps:{title:t("questionPools.panelCloseDialog.title"),subText:t("questionPools.panelCloseDialog.instructions")},modalProps:{className:"question-pool-panel-close-dialog"},analyticsId:"questionPools.panelCloseDialog.dialog"},i.a.createElement(ie.DialogFooter,null,i.a.createElement(W.AnalyticsDefaultButton,{onClick:()=>n(!1),analyticsId:"questionPools.panelCloseDialog.cancel.button"},t("questionPools.panelCloseDialog.cancel")),i.a.createElement(W.AnalyticsPrimaryButton,{onClick:()=>s(),analyticsId:"questionPools.panelCloseDialog.close.button"},t("questionPools.panelCloseDialog.close"))))},oe=s("Fr0Y"),re=s.n(oe);var le=()=>{const e=Object(Q.a)();return i.a.createElement("div",{className:"question-pools-empty-state"},i.a.createElement(E.a,{image:re.a,passedClass:"question-pools-empty-state__image",presentationOnly:!0}),i.a.createElement("h3",{className:"question-pools-empty-state__title"},e("questionPools.emptyState.dueToDeletion.header")),i.a.createElement("div",{className:"question-pools-empty-state__message"},e("questionPools.emptyState.dueToDeletion.message")))};const ce=n.createContext({panelHeightOffset:0}),ue=e=>t=>n.createElement(ce.Consumer,null,(s=>n.createElement(e,{...t,commonContext:s}))),de=({usePanelHeightOffset:e,children:t})=>{const s=e();return n.createElement(ce.Provider,{value:{panelHeightOffset:s}},t)};class me extends i.a.Component{constructor(e){if(super(e),this.dismissPanel=()=>this.state.isAnyQuestionDirty?(this.setCloseDialogVisibility(!0),!1):(Object(H.o)(H.c.QuestionPoolPanelClosed),this.props.closePanel(),!0),this.setCloseDialogVisibility=e=>{this.setState({isShowingCloseDialog:e})},this.hasMoreQuestions=()=>this.state.paging&&!p.isEmpty(this.state.paging.nextPage),this.onLoadMoreButtonClick=()=>{this.loadMoreQuestions(!0)},this.getLoadMoreQuestionsButtonText=()=>{const{t:e}=this.props,{offset:t,count:s}=this.state.paging,n=me.QUESTION_POOL_QUESTION_LOAD_LIMIT,i=t+n;if(this.hasMoreQuestions()){return e("questionPools.moreQuestions.enabled",{count:s-i>n?n:s-i})}return e("questionPools.moreQuestions.disabled")},this.loadMoreQuestions=e=>{const{courseId:t,assessmentId:s,questionPoolId:n,loadQuestionsFromQuestionBlock:i}=this.props;if(this.state.isLoadingQuestions||!this.hasMoreQuestions())return;this.setState((()=>({isLoadingQuestions:!0})));i({courseId:t,assessmentId:s,questionBlockId:n,offset:this.state.paging.offset+me.QUESTION_POOL_QUESTION_LOAD_LIMIT,limit:me.QUESTION_POOL_QUESTION_LOAD_LIMIT}).then((t=>{this.setState((s=>{const n=e?t.questions[0].id:s.firstNewQuestionBankId;return{paging:t.paging,isLoadingQuestions:!1,firstNewQuestionBankId:n,totalQuestionCount:t.paging.count}}))}))},this.addQuestionsToPool=()=>{const{closePanel:e,openQuestionPicker:t}=this.props;e(!0),t()},this.deleteQuestionFromPool=(...e)=>{this.props.deleteQuestionFromQuestionBlock(...e).then((()=>{this.setState((e=>({totalQuestionCount:e.totalQuestionCount-1})))}))},this.setIsAnyQuestionDirty=e=>{this.setState({isAnyQuestionDirty:e})},this.state={isAnyQuestionDirty:!1,isShowingCloseDialog:!1,totalQuestionCount:0,isLoadingQuestions:void 0,paging:void 0,firstNewQuestionBankId:void 0},Object(H.m)()){const t={type:H.c.QuestionPoolPanelOpened,status:H.b.Success,pageTitle:e.t("questionPools.panelHeader")};Object(H.r)(t),Object(H.h)(this.dismissPanel)}}componentWillUnmount(){Object(H.h)(void 0)}UNSAFE_componentWillMount(){const{courseId:e,assessmentId:t,questionPoolId:s}=this.props;if(e){this.setState({isLoadingQuestions:!0});const n={courseId:e,assessmentId:t,questionBlockId:s,limit:me.QUESTION_POOL_QUESTION_LOAD_LIMIT};this.props.loadQuestionsFromQuestionBlock(n).then((e=>{this.setState({paging:e.paging,isLoadingQuestions:!1,totalQuestionCount:e.paging.count})}))}}render(){const{closePanel:e,courseId:t,t:s,hasSubmissions:n,hasAssessmentModifyPermissions:a,questions:o,assessmentTitle:r,persistQuestion:l,assessmentId:c,questionPoolId:u,localizationPrefix:d,analyticsEventAugmentor:m,commonContext:p,supportsInlineDocumentRender:h,loadMoreQuestions:g,extraCreditVisibility:b}=this.props,{firstNewQuestionBankId:y,isLoadingQuestions:f,isShowingCloseDialog:v,paging:C,totalQuestionCount:E}=this.state,P="questionPool.panel.add.button",w=m(z.AnalyticsEventTypes.CLICK_EVENT,this.addQuestionsToPool,P),I="questionPools.moreQuestions.enabled"+(this.hasMoreQuestions()?"enabled":"disabled"),S=m(z.AnalyticsEventTypes.CLICK_EVENT,this.onLoadMoreButtonClick,I),k={url:s("questionPools.pageHelpUrl")};return i.a.createElement(F.BbPanel,{isOpen:!0,type:F.BbPanelType.full,onDismiss:this.dismissPanel,excludeContentPadding:!0,closeButtonAriaLabel:s("questionPools.cancel"),className:"question-pool-panel",pageHelpProps:k,stackIndex:3,analyticsId:"questionPools.panel",heightOffset:p.panelHeightOffset,layerProps:{className:"question-pool-layer-wrapper"}},i.a.createElement(F.BbPanelHeader,{smallHeaderTitle:r,title:s("questionPools.panelHeader"),analyticsId:"questionPools.panelHeader",navMenuAriaLabel:s("global.navigationMenu")}),i.a.createElement("div",{className:"question-pool-panel__content-scroll-wrapper"},i.a.createElement("div",{className:"question-pool-panel__content"},o&&i.a.createElement("div",{className:"question-pool-panel__top-bar"},i.a.createElement("span",{className:"question-pool-panel__question-count"},s("questionPools.questionCount",{count:E})),a&&!n&&i.a.createElement("button",{className:"question-pool-panel__add-button-container button clear",onClick:w,"data-analytics-id":P},i.a.createElement("span",{className:"question-pool-panel__add-button-label"},s("questionPools.addQuestionButtonLabel")),i.a.createElement(R.AddCircle,{id:"question-pool-panel_add-button-icon"}))),i.a.createElement(ne,{courseId:t,questions:o,hasSubmissions:n,hasAssessmentModifyPermissions:a,deleteQuestion:this.deleteQuestionFromPool,isLoading:f,firstNewQuestionBankId:y,setIsAnyQuestionDirty:this.setIsAnyQuestionDirty,persistQuestion:l,questionPoolId:u,assessmentId:c,localizationPrefix:d,supportsInlineDocumentRender:h,loadMoreQuestions:this.loadMoreQuestions,extraCreditVisibility:b}),C&&i.a.createElement("button",{className:"question-pool-panel__load-more-button",onClick:S,"data-analytics-id":I,disabled:!this.hasMoreQuestions()},this.getLoadMoreQuestionsButtonText()),o&&0===o.length&&!f&&i.a.createElement(le,null))),v&&i.a.createElement(ae,{setCloseDialogVisibility:this.setCloseDialogVisibility,closePanel:e}))}}me.QUESTION_POOL_QUESTION_LOAD_LIMIT=50;const pe=Object(r.b)(((e,t)=>({questions:d.gc.question.getQuestionsByQuestionBlockId(e,t.questionPoolId)})),(e=>Object(u.b)({loadQuestionsFromQuestionBlock:d.X.question.loadQuestionsFromQuestionBlock,deleteQuestionFromQuestionBlock:d.X.question.deleteQuestionFromQuestionBlock},e)))(me);var he=Object(P.a)(ue(Object(z.withAnalytics)(pe))),ge=s("sptZ"),be=s("pNgc"),ye=s("RPob");var fe=e=>{const t=Object(Q.a)(),{message:s,onStay:n,onProceed:a,show:o,title:r}=e;return i.a.createElement(U.c,{hidden:!o,onDismiss:n,dialogContentProps:{type:b.DialogType.normal,title:r,subText:s,showCloseButton:!0,isAlert:!0},analyticsId:"questionReuse.cancelDialog.dialog"},i.a.createElement(b.DialogFooter,null,i.a.createElement(W.AnalyticsDefaultButton,{onClick:n,analyticsId:"questionReuse.cancelDialog.cancel"},t("questionReuse.cancelDialog.cancel")),i.a.createElement(W.AnalyticsPrimaryButton,{onClick:a,analyticsId:"questionReuse.cancelDialog.ok"},t("questionReuse.cancelDialog.ok"))))},ve=s("2/w5"),Ce=s("WOfr"),Ee=s("RrOo"),Pe=s("np6O"),we=s("4raK");class Ie extends i.a.Component{constructor(e){super(e),this.onSelectQuestion=()=>{const{onSelectQuestion:e,question:t,selected:s}=this.props;e(t.id,s)},this.toggleExpanded=()=>this.setState((e=>({expanded:!e.expanded}))),this.getToggleButtonAriaLabel=()=>{const{t:e}=this.props,t=Object(I.a)("toggleView",this.props.question,null,Object(O.a)(e),"questionPicker");return e(t.string,{relatedContent:t.relation})},this.getQuestionTitle=(e,t)=>{let s=`question.typeLabels.${e.questionType}`;return e.subType&&(s+=`.${e.subType}`),t(s)},this.state={expanded:!1}}render(){const{courseId:e,question:t,t:s,selected:n,sourceHeaderId:a,localizationPrefix:o,extraCreditVisibility:r}=this.props,{expanded:l}=this.state,u=d.N.isPresentationOnly(t),m=this.getQuestionTitle(t,s),h=l?"--expanded":"--collapsed",g=`selectable-question${t.id}`,b=`selectable-question-wrapper${t.id}`,y=`bb-editor${t.id} ${a} `,f=`${G.a}${t.id}`;return i.a.createElement("div",{id:g,className:`selectable-question selectable-question${h}`},i.a.createElement(c.AnalyticsFormControlLabel,{label:"","aria-labelledby":y,"aria-describedby":f,className:"selectable-question__checkbox",htmlFor:`${g}-checkbox`,control:i.a.createElement(c.AnalyticsCheckbox,{id:`${g}-checkbox`,onChange:this.onSelectQuestion,checked:n,analyticsId:"selectableQuestion.checkbox"}),analyticsId:"selectableQuestion.checkbox"}),i.a.createElement("div",{id:b,className:"selectable-question__question-wrapper"},u&&i.a.createElement("div",{className:"question-header"},i.a.createElement("h3",{id:`${G.a}${t.id}`,className:"question-header__title"},m)),l?i.a.createElement(k.a,{courseId:e,question:t,questionTitle:m,alignedGoals:t.alignedGoals,questionBeingEditedId:null,isAnyQuestionDirty:!1,onQuestionEdit:p.noop,onQuestionMadeDirty:p.noop,persistQuestion:p.noop,pluginsConfig:{},hasSubmissions:!0,hasAssessmentModifyPermissions:!1,disableDeletingQuestion:!0,disableEditingQuestion:!0,disableAligningToGoal:!0,dragButtonAriaLabel:"",dragPointRef:p.noop,disableFocus:!0,localizationPrefix:o,supportsInlineDocumentRender:!1,readonlyPoints:!0,extraCreditVisibility:r}):i.a.createElement(we.a,{id:t.id,question:this.props.question,questionTitle:u?null:m,readonlyPoints:!0,extraCreditVisibility:r})),i.a.createElement(Pe.AnalyticsIconButton,{onClick:this.toggleExpanded,className:`selectable-question__question-toggle selectable-question__question-toggle${h}`,"aria-labelledby":y,"aria-expanded":l,"aria-controls":b,analyticsId:"selectableQuestion.toggle.button"},i.a.createElement(v.ChevronDown,null)))}}var Se=Object(P.a)(Ie);class ke extends n.PureComponent{constructor(){super(...arguments),this.mainHeading=null,this.focusFirstSourceHeading=()=>{this.mainHeading&&this.mainHeading.focus()},this.isQuestionSelected=e=>{const{isSelectAllQuestions:t,deselectedQuestions:s,selectedQuestions:n}=this.props,i=p.isUndefined(s[e]),a=!p.isUndefined(n[e]);return t&&i||a},this.renderSelectDeselectAll=()=>{const{hideSelectDeselectAll:e,t,onClearAllQuestionSelection:s,onSelectAllQuestions:n}=this.props;return e?null:i.a.createElement("div",{className:"question-picker-results-list__select-deselect-all"},i.a.createElement(b.Link,{className:"js-select-all-questions",onClick:n,analyticsId:"questionPicker.questionList.selectAll.link"},t("questionPicker.questionList.selectAll")),i.a.createElement("span",null," | "),i.a.createElement(b.Link,{className:"js-deselect-all-questions",onClick:s,analyticsId:"questionPicker.questionList.clearAll.link"},t("questionPicker.questionList.clearAll")))},this.renderQuestions=()=>{const{courseId:e,items:t,onItemSelect:s,questionToFocus:n,sources:a,localizationPrefix:o,extraCreditVisibility:r}=this.props,l=p.mapKeys(a,(e=>e.id)),c=p.groupBy(t,"assessmentId");return Object.entries(c).map((([t,a],c)=>{const u=l[t],d=u?u.title:"",m=u&&"Pool"===u.type?Ce.a:Ee.a,p=`heading_${t}`;return i.a.createElement("div",{key:t,className:"js-source-question-grouping question-group-selector"},i.a.createElement("div",{className:"question-picker-results-list__heading-group"},i.a.createElement(m,{className:"question-picker-results-list__heading-icon",color:"primary"}),i.a.createElement("h2",{id:p,className:"question-picker-results-list__heading-text js-question-group-heading",ref:e=>{0===c&&(this.mainHeading=e)}},d)),a.map((a=>{const l=this.isQuestionSelected(a.id);return i.a.createElement("div",{key:a.id},i.a.createElement(Se,{courseId:e,assessmentId:t,onSelectQuestion:s,question:a,focused:n===a.id,selected:l,sourceHeaderId:p,localizationPrefix:o,extraCreditVisibility:r}))})))}))}}componentDidUpdate(e){e.isShowingFilterPanel&&!this.props.isShowingFilterPanel&&this.focusFirstSourceHeading()}render(){const{isLoadingMore:e}=this.props;return i.a.createElement("div",{className:"question-picker-results-list"},this.renderSelectDeselectAll(),this.renderQuestions(),e&&i.a.createElement(b.Spinner,{className:"question-picker-results-list__spinner",size:b.SpinnerSize.large}))}}ke.defaultProps={hideSelectDeselectAll:!1,isShowingFilterPanel:!0};var qe=Object(P.a)(ke);var Qe=({headerKey:e,messageKey:t})=>{const s=Object(Q.a)();return i.a.createElement("div",{className:"question-reuse-sources-empty-state"},i.a.createElement(E.a,{image:re.a,passedClass:"question-reuse-sources-empty-state__image"}),i.a.createElement("h3",{className:"question-reuse-sources-empty-state__title"},s(e)),i.a.createElement("div",{className:"question-reuse-sources-empty-state__message"},s(t)))};class Ae extends i.a.Component{constructor(e){super(e),this.buildCriteriaConfig=()=>{const e={blocks:[],onSetKeywords:this.onSetKeywords,selectedKeywords:this.state.selectedFilterCriteria.keywords,isKeywordExpanded:!0};e.blocks.push(this.buildSourcesBlock()),e.blocks.push(this.buildQuestionTypesBlock());const t=this.buildTagsBlock();return t&&e.blocks.push(t),e},this.buildSourcesBlock=()=>{const{t:e}=this.props,t={name:e("questionPicker.filterPanel.sources.header"),id:"sources",expanded:!0,groups:[]},s=this.getSourcesWithQuestions(),n=(()=>{const e=p.orderBy(s,"type","asc"),t=p.groupBy(e,"type");return p.transform(t,((e,t,s)=>{e[s.toLowerCase()]=p.orderBy(t,"id")}))})();return p.keys(n).forEach((s=>{const i={id:s,name:e(`questionPicker.filterPanel.sources.type.${s}`),items:[],onSelect:this.onSelectSource};n[s].forEach((e=>{if(e.type.toLowerCase()===s){const t={id:e.id,name:e.title,selected:p.includes(this.state.selectedFilterCriteria.sourceIds,e.id)};i.items.push(t)}})),t.groups.push(i),t.groups.sort((e=>"test"===e.id?-1:1))})),t},this.buildTagsBlock=()=>{const{t:e,tags:t}=this.props;if(!p.isEmpty(t)){const s={name:e("questionPicker.filterPanel.tags.header"),id:"tags",expanded:!1,groups:[]},n=t=>{let n=p.find(s.groups,{id:t});return n||(n={id:t,name:e(`questionPicker.filterPanel.tags.type.${t}`),items:[],onSelect:this.onSelectTag},s.groups.push(n)),n};return t.forEach((e=>{const t={id:e.id,name:e.title,selected:p.includes(this.state.selectedFilterCriteria.tagIds,e.id)};n(e.type).items.push(t)})),s.groups.forEach((e=>{e.items=p.sortBy(e.items,["name"])})),s.groups=p.sortBy(s.groups,["name"]),s}return null},this.buildQuestionTypesBlock=()=>{const e={id:"types",name:"",items:[],onSelect:this.onSelectQuestionType},{t,questionTypes:s}=this.props;return s.forEach((s=>{const{key:n}=s,i={id:n,name:t(`question.typeLabels.${"presentation"===n?"other":n}`),selected:p.includes(this.state.selectedFilterCriteria.questionTypes,n)};e.items.push(i)})),e.items=p.sortBy(e.items,["name"]),{name:t("questionPicker.filterPanel.questionTypes.header"),id:"types",expanded:!1,groups:[e]}},this.hasPresentationQuestionsSelected=()=>p.keys(this.state.selectedQuestions).some((e=>{const t=this.state.questions.find((t=>t.id===e));return t&&t.questionType===f.Qb.PresentationOnly})),this.hasNonPresentationQuestionsSelected=()=>p.keys(this.state.selectedQuestions).some((e=>{const t=this.state.questions.find((t=>t.id===e));return t&&t.questionType!==f.Qb.PresentationOnly})),this.reuseQuestions=()=>{const{assessmentId:e,questionPositionAfter:t}=this.props.destination,{selectedQuestions:s,deselectedQuestions:n,isSelectAllQuestions:i}=this.state;let a={courseId:this.props.courseId,assessmentId:e,positionAfter:t,selectAll:i};if(i){const e=p.keys(n),t=e.length;a={...a,searchCriteria:this.generateSearchCriteriaParam(),...t&&{excludeIds:e}}}else a={...a,questionIds:p.keys(s)};Object(H.o)(H.c.QuestionPickerPanelClosed);let o=!1;const r=Object(d.Qb)(this.state.questions);Object.keys(r).forEach((e=>{var t;(s[e]||i&&void 0===n[e])&&!1===(null===(t=r[e])||void 0===t?void 0:t.isAutoGraded)&&(o=!0)})),a={...a,includesManuallyGradedQuestions:o};(()=>{this.props.closePanel(a,this.getSelectedQuestionCount())})()},this.cancel=()=>this.areQuestionsSelected()?(this.showCancelConfirmationDialog(),!1):(Object(H.o)(H.c.QuestionPickerPanelClosed),this.props.closePanel(),!0),this.proceedClosePanel=()=>{Object(H.o)(H.c.QuestionPickerPanelClosed),this.props.closePanel()},this.areQuestionsSelected=()=>p.size(this.state.selectedQuestions)>0,this.showCancelConfirmationDialog=()=>{this.setState((()=>({isShowingCancelConfirmationDialog:!0})))},this.hideCancelConfirmationDialog=()=>{this.setState((()=>({isShowingCancelConfirmationDialog:!1})))},this.onSelectSource=(e,t)=>{this.onSelectFilterOption("sourceIds",e,t)},this.onSelectTag=(e,t)=>{this.onSelectFilterOption("tagIds",e,t)},this.onSelectQuestionType=(e,t)=>{this.onSelectFilterOption("questionTypes",e,t)},this.onSelectFilterOption=(e,t,s)=>{this.state.isSelectAllQuestions&&this.onClearAllQuestionSelection(),this.setState((n=>{const{selectedFilterCriteria:i}=n;return s?{selectedFilterCriteria:{...i,[e]:[...i[e],t]}}:{selectedFilterCriteria:{...i,[e]:[...i[e].filter((e=>e!==t))]}}}),this.initSearchRequest)},this.onSelectQuestion=(e,t)=>{this.setState((s=>{const n=s.deselectedQuestions,i=s.selectedQuestions;return s.isSelectAllQuestions?(t?n[e]=!0:delete n[e],{deselectedQuestions:n}):(t?delete i[e]:i[e]=!0,{selectedQuestions:i})}))},this.onSelectAllQuestions=()=>{this.setState((()=>({isSelectAllQuestions:!0}))),this.clearSelectedDeselectedQuestions()},this.onClearAllQuestionSelection=()=>{this.setState((()=>({isSelectAllQuestions:!1}))),this.clearSelectedDeselectedQuestions()},this.clearSelectedDeselectedQuestions=()=>{this.setState((()=>({selectedQuestions:Object.create(null),deselectedQuestions:Object.create(null)})))},this.onSetKeywords=e=>{this.setState((t=>({selectedFilterCriteria:{...t.selectedFilterCriteria,keywords:e}})),this.initSearchRequest)},this.onClearCriteria=()=>{const e=p.mapValues(this.state.selectedFilterCriteria,(()=>[]));this.setState((()=>({selectedFilterCriteria:e})),this.initSearchRequest)},this.loadFilterOptions=()=>{this.loadAssessments(),this.loadQuestionTags(),this.loadQuestionTypes()},this.loadAssessments=()=>{const e=[f.h.Pool,f.h.Test];this.continuouslyLoadFilterOptions(this.props.loadAssessments,{types:e},"assessments","isLoadingAssessments")},this.loadQuestionTags=()=>{this.continuouslyLoadFilterOptions(this.props.loadQuestionTags,void 0,"tags","isLoadingTags")},this.loadQuestionTypes=()=>{const{courseId:e,loadQuestionTypes:t}=this.props;t({courseId:e}).then((()=>{this.setState((e=>({isLoadingFilterOptions:{...e.isLoadingFilterOptions,isLoadingQuestionTypes:!1}})))}))},this.continuouslyLoadFilterOptions=(e,t,s,n,i)=>{const{courseId:a}=this.props;return e({...t,courseId:a,offset:i,limit:Ae.FILTER_OPTION_LOAD_LIMIT}).then((i=>{if(!i)return;const{paging:a}=i;this.setState((e=>{const t=e.filterLoadNum[s];return{filterLoadNum:{...e.filterLoadNum,[s]:t+1}}}),(()=>{const i=this.state.filterLoadNum[s];if(a.nextPage&&i<Ae.FILTER_OPTIONS_LOAD_MAX){const i=a.offset+a.limit;this.continuouslyLoadFilterOptions(e,t,s,n,i)}else this.setState((e=>({isLoadingFilterOptions:{...e.isLoadingFilterOptions,[n]:!1}})))}))}))},this.generateLoadQuestionsParams=({setOffset:e=!1}={})=>{const{paging:t}=this.state,{courseId:s}=this.props,n={...this.generateSearchCriteriaParam(),courseId:s};return e&&(n.offset=t.offset+t.limit),n},this.generateSearchCriteriaParam=()=>{const{selectedFilterCriteria:{keywords:e,sourceIds:t,tagIds:s,questionTypes:n}}=this.state;return{...t.length&&{assessmentIds:t},...s.length&&{categoryIds:s},...n.length&&{questionTypes:n},...e.length&&{q:e}}},this.initSearchRequest=()=>{this.setState((()=>({isLoadingQuestions:!0})),this.loadQuestionsDebounced)},this.loadQuestionsDebounced=p.debounce((()=>{const e=this.generateLoadQuestionsParams();this.setState((()=>({searchParams:e})),(()=>{this.props.searchQuestions(e).then((t=>{e===this.state.searchParams&&this.setState((()=>({questions:Object.values(t.questions),paging:t.paging,isLoadingQuestions:!1})))}))}))}),Ae.WAIT_TIME_IN_MS,{leading:!0,trailing:!0}),this.loadMoreQuestions=(e=!1)=>{if(this.state.isLoadingMoreQuestions||!this.hasMoreQuestions())return;this.setState((()=>({isLoadingMoreQuestions:!0,questionToFocus:null})));const t=this.generateLoadQuestionsParams({setOffset:!0});this.props.searchQuestions(t).then((t=>{this.setState((s=>({questions:[...Object.values(s.questions),...Object.values(t.questions)],questionToFocus:e?t.questions[0].id:null,paging:t.paging,isLoadingMoreQuestions:!1})))}))},this.hasMoreQuestions=()=>this.state.paging&&!p.isEmpty(this.state.paging.nextPage),this.onViewMoreClick=()=>{this.loadMoreQuestions(!0)},this.onScroll=e=>{this.state.isLoadingQuestions||this.state.isLoadingMoreQuestions||!this.hasMoreQuestions()||Object(ye.u)(e.target)&&this.loadMoreQuestions()},this.onKeyUp=e=>{const t=e.target;if(9===e.keyCode&&t&&"button"===t.type&&t.classList.contains("selectable-question__question-toggle")){const e=t.parentElement.id,s=e.substr(e.indexOf("_"),e.length);this.state.questions.length-1===p.findIndex(this.state.questions,(e=>e.id===s))&&this.loadMoreQuestions()}},this.renderViewMoreButton=()=>{const{paging:e,questions:t}=this.state,{analyticsEventAugmentor:s,t:n}=this.props,a="questionPicker.moreQuestions.ariaLabel",o=s(z.AnalyticsEventTypes.CLICK_EVENT,(()=>{}),a);if(!this.hasMoreQuestions())return i.a.createElement("button",{className:"offscreen-button",disabled:!0,"aria-disabled":!0,"aria-label":n("questionPicker.moreQuestions.disabled")});const r=e.count-t.length,l=r>e.limit?e.limit:r;return i.a.createElement("button",{className:"offscreen-button",onClick:o,"data-analytics-id":a,"aria-label":n("questionPicker.moreQuestions.ariaLabel",{count:l}),disabled:this.state.isLoadingMoreQuestions,"aria-disabled":this.state.isLoadingMoreQuestions})},this.getSourcesWithQuestions=()=>p.filter(this.props.sources,(e=>e.questionCount>0)),this.areAllFilterOptionsLoaded=()=>{const{isLoadingFilterOptions:e}=this.state;return p.every(p.values(e),(e=>!e))},this.getSelectedQuestionCount=()=>{const{deselectedQuestions:e,isSelectAllQuestions:t,paging:s,selectedQuestions:n}=this.state;return t?s.count-p.size(e):p.size(n)};const{t}=e;if(this.state={questions:[],paging:null,filterLoadNum:{assessments:0,tags:0},isLoadingQuestions:!0,isLoadingMoreQuestions:!1,isLoadingFilterOptions:{isLoadingAssessments:!0,isLoadingTags:!0,isLoadingQuestionTypes:!0},isShowingCancelConfirmationDialog:!1,selectedFilterCriteria:{keywords:[],sourceIds:[],tagIds:[],questionTypes:[]},isSelectAllQuestions:!1,deselectedQuestions:Object.create(null),selectedQuestions:Object.create(null),questionToFocus:null,searchParams:null},Object(H.m)()){const s={type:H.c.QuestionPickerPanelOpened,status:H.b.Success,pageTitle:t(e.headerKeys.title)};Object(H.r)(s),Object(H.h)(this.cancel)}}componentWillUnmount(){Object(H.h)(void 0)}UNSAFE_componentWillMount(){const{courseId:e}=this.props;e&&(this.loadFilterOptions(),this.initSearchRequest())}render(){const{isLoadingQuestions:e,isLoadingMoreQuestions:t,isSelectAllQuestions:s,questions:n,questionToFocus:a,paging:o,deselectedQuestions:r,selectedQuestions:l}=this.state,{courseId:c,closePanel:u,noResultsKeys:d,noSourcesKeys:m,headerKeys:p,footerKeys:h,pageHelpKey:g,localizationPrefix:b,cancelModalKeys:y,commonContext:f,extraCreditVisibility:v,t:C}=this.props,E=this.getSourcesWithQuestions(),P=E.length>0,w=this.buildCriteriaConfig(),I=C("questionPicker.footer.cancel"),S=this.areAllFilterOptionsLoaded(),k=S&&!(e||t),q=this.getSelectedQuestionCount(),Q={image:re.a,title:C(d.title),message:C(d.message)},A=C(p.title),x=C(h.primaryButton),O=C(h.selectedCount,{count:q}),N=m.title,T=m.message,_={url:C(g)};return i.a.createElement(F.BbPanel,{isOpen:!0,type:F.BbPanelType.full,onDismiss:this.cancel,excludeContentPadding:!0,closeButtonAriaLabel:I,className:"question-picker-panel",pageHelpProps:_,fixedLargeHeader:!0,stackIndex:3,heightOffset:f.panelHeightOffset,analyticsId:"assessments.questionPanelPicker.panel"},i.a.createElement(F.BbPanelHeader,{title:A,smallHeaderTitle:this.props.destination.assessmentTitle,navMenuAriaLabel:C("global.navigationMenu")}),i.a.createElement("div",{className:"question-picker-panel__content",ready:k.toString()},i.a.createElement("div",{className:"question-picker-panel__body",onKeyUp:this.onKeyUp,onScroll:this.onScroll},P&&i.a.createElement(ve.a,{id:"questionPickerPanel",isLoading:e,criteriaConfig:w,onClearCriteria:this.onClearCriteria,resultsCount:o&&o.count?o.count:0,zeroResultsEmptyStateProps:Q,analyticsId:"questionPickerPanel.filterList"},i.a.createElement(qe,{courseId:c,sources:E,deselectedQuestions:r,selectedQuestions:l,items:n,isLoadingMore:t,onItemSelect:this.onSelectQuestion,isSelectAllQuestions:s,onSelectAllQuestions:this.onSelectAllQuestions,onClearAllQuestionSelection:this.onClearAllQuestionSelection,questionToFocus:a,localizationPrefix:b,extraCreditVisibility:v})),!P&&!S&&i.a.createElement($.Spinner,{className:"question-picker-panel__spinner",size:$.SpinnerSize.large}),!P&&S&&i.a.createElement(Qe,{headerKey:N,messageKey:T}),!e&&this.renderViewMoreButton()),i.a.createElement(fe,{message:C(y.message),onStay:this.hideCancelConfirmationDialog,onProceed:()=>this.proceedClosePanel(),show:this.state.isShowingCancelConfirmationDialog,title:C(y.title)})),i.a.createElement(F.BbPanelFooter,{analyticsId:"questionPickerPanel.footer",primaryButtonProps:{className:"js-primary-button",onClick:this.reuseQuestions,disabled:0===q,text:x},secondaryButtonProps:{className:"js-cancel-button",onClick:this.cancel,text:I}},i.a.createElement("div",{className:"question-picker-panel__footer-content"},i.a.createElement(be.a,{className:"question-picker-panel__footer-icon",color:"primary"}),i.a.createElement("span",{className:"question-picker-panel__footer-text"},O))))}}Ae.FILTER_OPTION_LOAD_LIMIT=100,Ae.FILTER_OPTIONS_LOAD_MAX=10,Ae.defaultProps={searchQuestions:d.fc},Ae.WAIT_TIME_IN_MS=1e3;const xe=Object(r.b)(((e,t)=>({questionTypes:d.gc.questionType.getQuestionTypesByCourseId(e,t.courseId),sources:d.gc.assessment.getAssessmentsByCourseId(e,t.courseId),tags:d.gc.questionTag.getQuestionTagsByCourseId(e,t.courseId)})),(e=>Object(u.b)({loadAssessments:d.X.assessment.loadAssessments,loadQuestionTags:d.X.questionTag.loadQuestionTags,loadQuestionTypes:d.X.questionType.loadQuestionTypes},e)),((e,t,s)=>({...s,...e,...t,questionTypes:s.questionTypes?s.questionTypes:e.questionTypes,sources:s.sources?s.sources:e.sources})))(Ae);var Oe=Object(P.a)(ue(Object(z.withAnalytics)(xe)));var Ne=e=>i.a.createElement(Oe,{...e,noResultsKeys:{title:"questionReuse.emptyState.dueToFilter.header",message:"questionReuse.emptyState.dueToFilter.message"},noSourcesKeys:{title:"questionReuse.emptyState.dueToSource.header",message:"questionReuse.emptyState.dueToSource.message"},headerKeys:{title:"questionReuse.questionPickerHeader"},footerKeys:{primaryButton:"questionReuse.footer.primaryButtonText",selectedCount:"questionReuse.footer.selectedCount"},cancelModalKeys:{title:"questionReuse.cancelDialog.title",message:"questionReuse.cancelDialog.subtext"},pageHelpKey:"questionReuse.pageHelpUrl"}),Te=s("zSoH");var _e=Object(r.b)(((e,t)=>{const s=d.gc.assessment.getAssessmentsByCourseId(e,t.courseId),n=d.gc.questionType.getQuestionTypesByCourseId(e,t.courseId);return{sources:h.a.filter(s,(e=>e.id!==t.destination.assessmentId)),questionTypes:Object(Te.c)(n)}}))((e=>i.a.createElement(Oe,{...e,noResultsKeys:{title:"questionPools.emptyState.dueToFilter.header",message:"questionPools.emptyState.dueToFilter.message"},noSourcesKeys:{title:"questionPools.emptyState.dueToSource.header",message:"questionPools.emptyState.dueToSource.message"},headerKeys:{title:"questionPools.questionPickerHeader"},footerKeys:{primaryButton:"questionPools.footer.primaryButtonText",selectedCount:"questionPools.footer.selectedCount"},pageHelpKey:"questionPools.pageHelpUrl",cancelModalKeys:{title:"questionPools.cancelDialog.title",message:"questionPools.cancelDialog.subText"},searchQuestions:t=>{const s={...t,...!t.questionTypes&&{questionTypes:Te.a},...!t.assessmentIds&&{excludeAssessmentIds:[e.destination.assessmentId]}};return Object(d.fc)(s)}}))),De=s("8tZv"),je=s("4yoV"),Be=s("9i9V"),Le=s("Agfx");const Me=Object(Le.makeStyles)((()=>Object(Le.createStyles)({assessmentCanvasControls:{display:"flex",textAlign:"center"},assessmentCanvasControlsActions:{display:"flex",flexDirection:"column",alignItems:"center"},combineButtonIcon:{transform:"rotate(45deg)",flip:!1}}))),Fe=Object(Le.makeStyles)((e=>({controlMenu:{padding:"0 10px",color:e.palette.text.secondary,"&:hover":{color:e.palette.action.active}}}))),Re=Object(Le.makeStyles)((()=>({controlMenuList:{width:"280px"}}))),ze=e=>{const{id:t,onCloseMenu:s,anchorEl:a,controlsMenuItems:o}=e,r=Re(),l=Object(Q.a)(),c=Object(n.useMemo)((()=>o.map((({subAnalyticsId:e,translationKey:t,onClick:n,...i})=>({...i,analyticsId:e,text:l(t),onClick:e=>{null==n||n(e),s()}})))),[o,s,l]);return a?i.a.createElement(y.j,{id:t,analyticsId:"assessment-canvas-controls.controlMenu",open:!0,onClose:s,onClick:s,anchorEl:a,classes:{list:r.controlMenuList},transformOrigin:{vertical:12,horizontal:278},items:c}):null},He=e=>{const{controlsMenuItems:t,onOpenMenu:s}=e,[a,o]=Object(n.useState)(void 0),r=!!a,l=Object(Q.a)()("assessments.canvas.controls.menuOptions.ariaLabel"),u="assessment-canvas-controls-menu",d=Fe();return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.AnalyticsIconButton,{analyticsId:"assessment-canvas-controls.controlMenu.showMenu.button",className:d.controlMenu,onClick:e=>{null==s||s(e),o(e.currentTarget)},id:`${u}-button`,"aria-expanded":r,"aria-label":l,"aria-haspopup":"true","aria-controls":a?u:void 0},i.a.createElement(v.Menu,null)),!!a&&i.a.createElement(ze,{id:u,onCloseMenu:()=>{o(void 0)},anchorEl:a,controlsMenuItems:t}))},$e=e=>{const{titleKey:t,subTextKey:s,exitCallback:n}=e,a=Object(Q.a)(),o="remove-page-breaks.dialog",r=`${e.analyticsId}.${o}`,l=`${o}-title`;return i.a.createElement(U.a,{className:"js-assessment-canvas-controls-combineConfirmation",analyticsId:`${r}`,open:!0,onClose:()=>n(),"aria-labelledby":l},i.a.createElement(c.AnalyticsDialogTitle,{analyticsId:`${r}.title`,id:l,onClose:()=>n()},a(t)),i.a.createElement(c.AnalyticsDialogContent,{analyticsId:`${r}.content`},i.a.createElement(c.AnalyticsDialogContentText,{analyticsId:`${r}.body`},a(s))),i.a.createElement(c.AnalyticsDialogActions,{analyticsId:`${r}.actions`},i.a.createElement(c.AnalyticsDefaultButton,{analyticsId:`${r}.cancel`,onClick:()=>n()},a("assessments.canvas.controls.combineConfirmation.cancel")),i.a.createElement(c.AnalyticsPrimaryButton,{analyticsId:`${r}.combine`,onClick:()=>n(!0)},a("assessments.canvas.controls.combineConfirmation.combine"))))},Ge=e=>{const{canEditAssessment:t,hasPageBreaks:s,deletePageBreaks:a}=e,o=Me(),[r,l]=Object(n.useState)(!1),c=Object(n.useRef)(null),u=[{key:"combine",icon:i.a.createElement(v.Collapse,{className:o.combineButtonIcon}),onClick:()=>{l(!0)},subAnalyticsId:"assessments.canvas.controls.menuOptions.combine",translationKey:"assessments.canvas.controls.menuOptions.combine"}],d=Object(n.useMemo)((()=>u.filter((e=>"combine"!==e.key||t))),[u,t]),m=t&&s;return i.a.createElement(i.a.Fragment,null,m?i.a.createElement("div",{className:o.assessmentCanvasControls},i.a.createElement("div",{className:o.assessmentCanvasControlsActions},i.a.createElement("div",{ref:c},!!d.length&&i.a.createElement(He,{controlsMenuItems:d})))):null,r&&i.a.createElement($e,{titleKey:"assessments.canvas.controls.combineConfirmation.title.pageBreak",subTextKey:"assessments.canvas.controls.combineConfirmation.subText.pageBreak",analyticsId:"assessment-canvas-controls",exitCallback:e=>{l(!1),e&&a(),c.current&&c.current.focus()}}))};var Ve=s("flm2");const Ue=Object(Le.makeStyles)((e=>Object(Le.createStyles)({link:{"white-space":"nowrap"}})));var We=s("nmzr"),Ke=s("IVC4");const Xe=()=>{We.bb.goPeekState(Object(We.Q)({focusEleId:"auto-post-grades"}))},Ye=()=>{const[e,t]=Object(n.useState)(!1),s=Object(n.useRef)(null),a={onClick:Xe},o=Ue(),r=Object(Q.a)(),l=t=>{if(9===t.keyCode&&e){const e=document.getElementsByClassName("create-new-bar");e[e.length-1].focus(),t.preventDefault(),document.removeEventListener("keydown",l)}},u=e=>{9===e.keyCode&&s.current&&(s.current.focus(),e.preventDefault(),document.removeEventListener("keydown",u))};Object(n.useEffect)((()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)})),[e]),Object(n.useEffect)((()=>(document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)})),[]);const d=i.a.createElement(c.AnalyticsLink,{className:o.link,href:"#",...a,analyticsId:"assessment.canvas.notification.autopostGrades.link",ref:s},r("assessments.canvas.content.notifications.autopostNotification.linkText")),m=i.a.createElement(Ke.a,null),p=r("assessments.canvas.content.notifications.autopostNotification.message"),h=r("assessments.canvas.content.notifications.autopostNotification.dismiss");return e?null:i.a.createElement(Ve.a,{severity:"info",icon:m,onClose:()=>{t(!0)},closeText:h},p,i.a.createElement("span",{className:"autopost-notification-banner"}," ",d," "))};var Ze=s("6rLV"),Je=s("SFo1");const et=e=>`assessmentCopyQuestionsTaskId${p.replace(e,/_/g,".")}`;class tt extends n.Component{constructor(e){super(e),this.contextualMenuId="assessment-canvas-add-content-menu",this.AddButton=e=>i.a.createElement(C.a,{index:e.index,show:!this.state.questionBeingEditedId,onToggleAddMenu:this.onToggleAddMenu,onDismissAddMenu:this.onDismissAddMenu,isMenuOpen:this.state.openAddMenuIndex===e.index,isBlankCanvas:!this.state.questions.length,buttonAriaLabel:e.buttonAriaLabel,removedFromTabOrder:this.state.isCopyingQuestions,analyticsId:"assessmentCanvas.addQuestionButton",buttonAriaControls:this.contextualMenuId}),this.initCopyQuestionsStatusDisplay=e=>{const{loadCoursePreference:t}=this.props;t({key:et(e.id),courseId:e.courseId}).then((()=>{const e=this.props.copyQuestionTaskPref;if(e){const t="start",s=e.taskId,n=e.questionCount;this.getAndDisplayUpdatedCopyQuestionsTaskStatus(s,t,n),this.setPeriodicCheckOnCopyQuestionsTaskStatus(s,t,n)}}))},this.isAnyQuestionDirty=()=>this.state.questionBeingEditedIsDirty,this.isDisplayOneQuestionAtATimeEnabled=()=>{var e;const{content:t}=this.props;return(null===(e=null==t?void 0:t.deploymentSettings)||void 0===e?void 0:e.deliveryType)===f.c.Item},this.isCollectExternalSubmissions=()=>{const{content:e}=this.props;return e&&e.deploymentSettings&&e.deploymentSettings.isCollectExternalSubmissions},this.sortByPosition=e=>p.sortBy(e,"position"),this.getPageNumbersAndCount=e=>{const t=this.getPageCount(e);let s=1;return e.map((e=>e.questionType===f.Qb.PageBreak?(s+=1,{...e,pageNumber:s,pageCount:t}):e))},this.hasSettingsEnabledBlockingAddOfNonPOQuestions=()=>this.hasAnonymousGrading()||this.hasRubricAssociations()||this.isCollectExternalSubmissions()||this.hasDelegatedGrading()||this.hasPeerGrading(),this.checkAndDisableAssessmentSettings=e=>{this.hasSettingsEnabledBlockingAddOfNonPOQuestions()?this.displayWarningDialog((()=>this.checkAndDisableAssessmentSettings(e))):e&&e()},this.displayWarningDialog=e=>{this.hasRubricAssociations()?this.showRubricAssociationsDialog(e):this.hasAnonymousGrading()?this.showAnonymousGradingDialog(e):this.isCollectExternalSubmissions()?this.showExternalSubmissionsDialog(e):this.hasDelegatedGrading()?this.showDelegatedGradingDialog(e):this.hasPeerGrading()&&this.showPeerGradingDialog(e)},this.addQuestion=e=>{this.checkAndDisableAssessmentSettings((()=>this.createQuestion(e)))},this.addQuestionPool=()=>{this.checkAndDisableAssessmentSettings(this.openQuestionPoolQuestionPicker)},this.reuseQuestions=()=>{this.checkAndDisableAssessmentSettings(this.openReuseQuestionPicker)},this.createQuestion=e=>{const{assessment:t,createQuestion:s}=this.props,n=this.calculateQuestionPositionAfter();s(t.id,n,e)},this.hideWarningDialog=()=>{this.setState({isShowingWarningDialog:!1})},this.showAnonymousGradingDialog=e=>{this.showWarningDialog("anonymousGrading",this.removeAnonymousGrading,e)},this.showPeerGradingDialog=e=>{this.showWarningDialog("peerGrading",this.removePeerGrading,e)},this.showRubricAssociationsDialog=e=>{this.showWarningDialog("rubricAssociations",this.removeRubricAssociations,e)},this.showDelegatedGradingDialog=e=>{this.showWarningDialog("delegatedGrading",this.removeDelegatedGrading,e)},this.showAutopostNotification=()=>{var e;(null===(e=this.props.gradebookColumn)||void 0===e?void 0:e.autoPostGrades)&&this.setState({isShowingAutopostNotification:!0})},this.removeAnonymousGrading=()=>{const{gradebookColumn:e,persistGradebookColumn:t}=this.props;t(e,{...e,anonymousGrading:!1}).then((()=>{this.hideWarningDialog(),this.state.disableAssessmentSettingCallback()})).catch(this.hideWarningDialog)},this.removeRubricAssociations=()=>{const{gradebookColumn:e,removeRubricAssociations:t}=this.props;t(e.id).then((()=>{this.hideWarningDialog(),this.state.disableAssessmentSettingCallback()})).catch(this.hideWarningDialog)},this.removeDelegatedGrading=()=>{const{gradebookColumn:e,persistGradebookColumn:t}=this.props;t(e,{...e,delegatedGrading:!1}).then((()=>{this.hideWarningDialog(),this.state.disableAssessmentSettingCallback()})).catch(this.hideWarningDialog)},this.removePeerGrading=()=>{const{content:e,persistContent:t}=this.props;t(e,{...e,contentDetail:{[d.i.TestLink.handle]:{test:{deployedAssessmentType:f.C.Test,gradingColumn:{peerGrading:!1,delegatedGrading:!1},peerSettings:{peerReviewDueDate:null,peerReviewsPerStudent:null,allowLatePeerReviews:null,evaluationColumnName:null}}}}}).then((()=>{this.hideWarningDialog(),this.state.disableAssessmentSettingCallback()})).catch(this.hideWarningDialog)},this.disableRandomization=()=>{const{content:e,persistContent:t}=this.props,s=e,n={...e,deploymentSettings:{...e.deploymentSettings,isRandomizationOfQuestionsRequired:!1}};this.hideWarningDialog(),t(s,n),this.state.disableAssessmentSettingCallback()},this.showExternalSubmissionsDialog=(e=p.noop)=>{this.showWarningDialog("externalSubmissions",this.disableExternalSubmissions,e)},this.disableExternalSubmissions=()=>{const{content:e,persistContent:t}=this.props;t(e,{...e,deploymentSettings:{...e.deploymentSettings,isCollectExternalSubmissions:!1}}).then((()=>{this.hideWarningDialog(),this.state.disableAssessmentSettingCallback()}))},this.addPresentationOnlyQuestion=e=>{switch(e){case f.Pb.CloudFile:this.addFiles({openCloudStorageIntegrationModal:this.props.editorPluginsConfig.insertCloudStorageIntegrationFile.openCloudStorageIntegrationModal});break;case f.Pb.File:this.addFiles({multiple:!0});break;default:this.addText()}},this.addText=()=>{const{assessment:e,createQuestion:t}=this.props,s=this.calculateQuestionPositionAfter();t(e.id,s,f.Qb.PresentationOnly,{subType:f.Pb.Text})},this.addFiles=e=>{const{assessment:t,createQuestion:s,localize:n,fileUploadSettings:i}=this.props,{getLocalePropsForClone:a}=n,o=e=>{let t="";return e.forEach((e=>{t+=Object(je.b)(e)})),t},r=this.props.features.supportsInlineDocumentRender;Object(Be.c)({supportsInlineDocumentRender:r,localeProps:a(),...e,fileUploadSettings:i}).then((e=>{const n=this.calculateQuestionPositionAfter();s(t.id,n,f.Qb.PresentationOnly,{subType:f.Pb.File,questionText:{rawText:o(e)}})}))},this.calculateQuestionPositionAfter=()=>{const e=this.state.addMenuTarget?this.state.addMenuTarget.props.index:0;return 0===e?"start":this.state.questions[e-1].id},this.openPoolQuestionPanel=e=>{this.props.applyAccessibilityHandling&&this.props.applyAccessibilityHandling(),this.setState({activeQuestionPoolId:e,isShowingQuestionPoolPanel:!0,extraCreditVisibility:Je.b.Hidden})},this.closeQuestionPoolPanel=(e=!1)=>{this.setState({isShowingQuestionPoolPanel:!1,...!e&&{activeQuestionPoolId:null},extraCreditVisibility:Je.b.Visible})},this.openReuseQuestionPicker=()=>{this.props.applyAccessibilityHandling&&this.props.applyAccessibilityHandling(),this.setState({isShowingReuseQuestionPicker:!0,extraCreditVisibility:Je.b.ReadOnly}),this.dismissCopyQuestionsStatusBanner()},this.openQuestionPoolQuestionPicker=()=>{this.props.applyAccessibilityHandling&&this.props.applyAccessibilityHandling(),this.setState({isShowingQuestionPoolQuestionPicker:!0,extraCreditVisibility:Je.b.Hidden}),this.dismissCopyQuestionsStatusBanner()},this.addQuestionsToEmptyPoolFromAssessmentCanvas=e=>{this.setState({activeQuestionPoolId:e},(()=>this.openQuestionPoolQuestionPicker()))},this.closeQuestionPoolQuestionPicker=(e=null,t)=>{const{revertAccessibilityHandling:s}=this.props,{activeQuestionPoolId:n}=this.state;e?(e.includesManuallyGradedQuestions&&this.showAutopostNotification(),this.setState((()=>({isShowingQuestionPoolQuestionPicker:!1,extraCreditVisibility:Je.b.Visible})),(()=>{s&&s(),n?this.addQuestionsToPool(e):this.createQuestionPool(e,t)}))):this.setState((()=>({isShowingQuestionPoolQuestionPicker:!1,extraCreditVisibility:Je.b.Visible})),(()=>s&&s()))},this.closeReuseQuestionPanel=(e=null,t)=>{const{revertAccessibilityHandling:s}=this.props;e?(e.includesManuallyGradedQuestions&&this.showAutopostNotification(),this.setState((()=>({isShowingReuseQuestionPicker:!1,extraCreditVisibility:Je.b.Visible})),(()=>{s&&s(),this.copyQuestions(e,t)}))):this.setState((()=>({isShowingReuseQuestionPicker:!1,extraCreditVisibility:Je.b.Visible})),(()=>s&&s()))},this.addQuestionsToPool=e=>{const{assessmentId:t,questionIds:s,selectAll:n,searchCriteria:i,excludeIds:a}=e,{addQuestionsToPool:o,courseId:r}=this.props;o(r,t,this.state.activeQuestionPoolId,{questionIds:s,selectAll:n,searchCriteria:i,excludeIds:a})},this.createQuestionPool=(e,t)=>{const{assessmentId:s,positionAfter:n,questionIds:i,selectAll:a,searchCriteria:o,excludeIds:r}=e,{createQuestion:l}=this.props;l(s,n,f.Qb.QuestionBlock,{questionIds:i,selectAll:a,searchCriteria:o,excludeIds:r,questionCount:t})},this.copyQuestions=(e,t)=>{tt.shouldCallCopyQuestionsQueued(t)?(this.displayCopyQuestionsInProgress(e.positionAfter,t),this.copyQuestionsQueued(e,t)):(this.displayCopyQuestionsInProgress(e.positionAfter,t),this.copyQuestionsDirect(e))},this.copyQuestionsQueued=(e,t)=>{Object(d.ob)(e).then((s=>{this.updateCopyQuestionsTaskPref(s.taskId,t),this.displayAndUpdateCopyQuestionsStatusInfo(s,e.positionAfter,t)}),(e=>{this.props.setError(e.error)}))},this.persistFeedbackSettings=()=>{const{content:e,persistContent:t}=this.props,s={[f.e.AfterSubmission]:{options:[f.f.InstructorFeedback,f.f.UserAnswers,f.f.AllAnswers]},[f.e.AfterAttemptGraded]:{options:[f.f.Score]}};t(e,{...e,deploymentSettings:{...e.deploymentSettings,feedbackSettings:s}}).then((()=>{this.hideWarningDialog(),this.state.disableAssessmentSettingCallback()}))},this.showFeedbackSettingsChangeDialog=e=>{this.showWarningDialog("enableStudentSubmissionView",this.persistFeedbackSettings,e)},this.persistAllowStudentSubmission=e=>{const{content:t,persistContent:s}=this.props;s(t,{...t,deploymentSettings:{allowStudentSubmission:e,id:t.deploymentSettings.id}})},this.handleAllowStudentSubmissionChange=()=>{const{assessment:e,content:t}=this.props,s=null==e?void 0:e.hasAnswerableQuestions,n=this.hasSubmissions();s&&!n&&this.persistAllowStudentSubmission(!t.deploymentSettings.allowStudentSubmission)},this.isSubmissionViewHidden=()=>{var e,t;const{content:s}=this.props;return!!(null===(t=null===(e=null==s?void 0:s.deploymentSettings)||void 0===e?void 0:e.feedbackSettings)||void 0===t?void 0:t.ns)},this.checkAllowStudentSubmission=()=>{const{content:e,assessment:t}=this.props,s=null==t?void 0:t.hasAnswerableQuestions;return!1===s&&!1===e.deploymentSettings.allowStudentSubmission?(this.persistAllowStudentSubmission(!0),!0):!s},this.copyQuestionsDirect=e=>{Object(d.nb)(e).then((t=>{this.displayCopyQuestionsComplete(e.positionAfter,t.status),this.loadQuestions()}),(e=>{this.props.setError(e.error)}))},this.loadQuestions=()=>{const{assessment:e,loadQuestions:t}=this.props;this.setState((()=>({isLoadingInProgress:!0}))),t({courseId:e.courseId,assessmentId:e.id,refreshState:!0,offset:0}).then((()=>{this.setState((()=>({isLoadingInProgress:!1})))}))},this.updateCopyQuestionsTaskPref=(e,t)=>{const{assessment:s,saveCoursePreference:n}=this.props,i={taskId:e,questionCount:t};n(et(s.id),JSON.stringify(i),s.courseId)},this.deleteCopyQuestionsTaskPref=()=>{const{assessment:e,copyQuestionTaskPref:t,deleteCoursePreference:s}=this.props;if(t){s({key:et(e.id),courseId:e.courseId})}},this.displayAndUpdateCopyQuestionsStatusInfo=(e,t,s)=>{this.displayCopyQuestionsStatusInfo(e,t,s),this.setPeriodicCheckOnCopyQuestionsTaskStatus(e.taskId,t,s)},this.displayCopyQuestionsStatusInfo=(e,t,s)=>{if(tt.hasCopyQuestionsTaskFinishedProcessing(e.taskStatus)){const{results:s}=e;this.displayCopyQuestionsComplete(t,s&&s.status,!1,this.dismissCopyQuestionsStatusBanner.bind(this))}else this.displayCopyQuestionsInProgress(t,s)},this.displayCopyQuestionsComplete=(e,t,s,n)=>{if(!this.state.notification||this.state.notification.type===b.NotificationType.Processing){const i=Object(ge.b)({positionAfter:e,copyStatus:t,autoDismiss:s,dismissNotification:n});this.setState((()=>({isCopyingQuestions:!1,notification:i})))}},this.displayCopyQuestionsInProgress=(e,t)=>{if(!this.state.notification||this.state.notification.type!==b.NotificationType.Processing){const s=Object(ge.c)(e,t);this.setState((()=>({isCopyingQuestions:!0,notification:s})))}},this.setPeriodicCheckOnCopyQuestionsTaskStatus=(e,t,s)=>{this.copyQuestionsStatusInterval=setInterval((()=>{this.getAndDisplayUpdatedCopyQuestionsTaskStatus(e,t,s)}),this.getCopyQuestionsStatusCheckIntervalDelay())},this.getCopyQuestionsStatusCheckIntervalDelay=()=>{const{features:e}=this.props;return e&&!e.isProduction?tt.COPY_QUESTIONS_STATUS_CHECK_INTERVAL:tt.PROD_COPY_QUESTIONS_STATUS_CHECK_INTERVAL},this.getAndDisplayUpdatedCopyQuestionsTaskStatus=(e,t,s)=>{Object(d.Kb)(e).then((e=>{tt.hasCopyQuestionsTaskFinishedProcessing(e.taskStatus)&&(this.cancelCheckCopyQuestionsStatusInterval(),this.loadQuestions()),this.displayCopyQuestionsStatusInfo(e,t,s)}))},this.cancelCheckCopyQuestionsStatusInterval=()=>{clearInterval(this.copyQuestionsStatusInterval)},this.deletePageBreaks=()=>{if(this.hasPageBreaks()){const e=this.state.questions.filter((e=>e.questionType===f.Qb.PageBreak));this.props.deleteQuestions(e)}},this.getPageBreakCount=(e=this.state.questions)=>e.filter((e=>e.questionType===f.Qb.PageBreak)).length,this.getPageCount=e=>this.getPageBreakCount(e)+1,this.hasPageBreaks=()=>this.state.questions.some((e=>e.questionType===f.Qb.PageBreak)),this.getAddMenuOptions=()=>{const{localize:e,features:t,localizationPrefix:s}=this.props,n=e.translate,a={[f.Qb.CalculatedFormula]:{localization:`${s}.canvas.add.calculatedFormula`},[f.Qb.CalculatedNumeric]:{localization:`${s}.canvas.add.calculatedNumeric`},[f.Qb.Essay]:{localization:`${s}.canvas.add.essay`},[f.Qb.FIMB]:{localization:`${s}.canvas.add.fimb`},[f.Qb.Hotspot]:{localization:`${s}.canvas.add.hotspot`},[f.Qb.Matching]:{localization:`${s}.canvas.add.matching`},[f.Qb.Multiple]:{localization:`${s}.canvas.add.multipleAnswer`},[f.Qb.Either]:{localization:`${s}.canvas.add.trueFalse`}},o=Object(Ze.a)(i.a.createElement(v.Add,null),a,n,{},this.addQuestion,"assessment.canvas.add.menu.item");return[{analyticsId:"assessment.canvas.add.menu.item.questionPool",key:"newQuestionPool",icon:i.a.createElement(v.Add,null),text:n("assessments.canvas.add.questionPool"),onClick:()=>this.addQuestionPool()},...o,{analyticsId:"assessment.canvas.add.menu.item.reuseQuestions",key:"newReuseQuestion",icon:i.a.createElement(v.Add,null),text:n(`${s}.canvas.add.reuseQuestions`),onClick:()=>this.reuseQuestions()},{analyticsId:"assessment.canvas.add.menu.item.text",key:"newText",icon:i.a.createElement(v.Text,null),text:n(`${s}.canvas.add.text`),onClick:()=>this.addPresentationOnlyQuestion(f.Pb.Text)},{analyticsId:"assessment.canvas.add.menu.item.localFile",key:"newFile",icon:i.a.createElement(v.UploadFile,null),text:n(`${s}.canvas.add.localFile`),onClick:()=>this.addPresentationOnlyQuestion(f.Pb.File)},...t&&t.cloudStorageIntegration?[{analyticsId:"assessment.canvas.add.menu.item.localFile.cloudFile",key:"newCloudFile",icon:i.a.createElement(v.UploadCloud,null),text:n(`${s}.canvas.add.cloudFile`),onClick:()=>this.addPresentationOnlyQuestion(f.Pb.CloudFile)}]:[],{disabled:this.isDisplayOneQuestionAtATimeEnabled(),analyticsId:"assessment.canvas.add.menu.item.pageBreak",key:"newPageBreak",icon:i.a.createElement(v.Paginate,null),text:n(`${s}.canvas.add.pageBreak`),onClick:()=>this.addQuestion(f.Qb.PageBreak),className:"new-page-break"}].map((e=>({...e,onClick:t=>{e.onClick(t),this.onDismissAddMenu()}})))},this.hasSubmissions=()=>!0===p.get(this.props,"assessment.hasResponses"),this.hasAssessmentModifyPermissions=()=>!0===p.get(this.props,"assessment.permissions.modify"),this.hasRubricAssociations=()=>{const e=this.props.gradebookColumn;return!!e&&!!e.rubricAssociations&&!!e.rubricAssociations.length},this.hasAnonymousGrading=()=>{const e=this.props.gradebookColumn;return!!e&&!!e.anonymousGrading},this.hasPeerGrading=()=>{const e=this.props.gradebookColumn;return!!e&&!!e.peerGrading&&!!e.delegatedGrading},this.hasDelegatedGrading=()=>{const e=this.props.gradebookColumn;return!!e&&!!e.delegatedGrading&&!e.peerGrading},this.onToggleAddMenu=(e,t)=>{this.setState({addMenuTarget:e,openAddMenuIndex:t})},this.onDismissAddMenu=()=>{const{addMenuTarget:e,isShowingReuseQuestionPicker:t,openAddMenuIndex:s}=this.state;-1!==s&&(this.setState({openAddMenuIndex:-1}),e&&!t&&e.focus())},this.onReorder=(e,t)=>{const s=p.findIndex(e,(e=>e.id===t.id)),n={...t,positionAfter:0===s?"start":e[s-1].id};this.persistQuestion(t,n,this.props.assessment.id)},this.onQuestionEdit=e=>{this.setState((()=>({questionBeingEditedId:e})))},this.onQuestionMadeDirty=e=>{e!==this.state.questionBeingEditedIsDirty&&(this.props.setIsAnyQuestionDirty(e),this.setState((()=>({questionBeingEditedIsDirty:e}))))},this.deleteQuestion=e=>{const{deleteQuestion:t}=this.props;if(this.shouldEnableViewStudentSubmissionSettings(e)){const s=()=>t(e);this.showFeedbackSettingsChangeDialog(s)}else t(e)},this.shouldEnableViewStudentSubmissionSettings=e=>{const t=this.state.questions.filter((e=>e.questionType!==f.Qb.PresentationOnly&&e.questionType!==f.Qb.PageBreak));return(null==e?void 0:e.questionType)!==f.Qb.PresentationOnly&&(null==e?void 0:e.questionType)!==f.Qb.PageBreak&&1===t.length&&this.isSubmissionViewHidden()},this.persistQuestion=(e,t,s)=>{const{persistQuestion:n}=this.props;return!1===t.isAutoGraded&&this.showAutopostNotification(),t.questionType===f.Qb.PageBreak&&this.state.addMenuTarget&&(this.state.addMenuTarget.onMouseLeave(),this.state.addMenuTarget.onKeyboardBlur()),Promise.resolve(n(e,t,{assessmentId:s,expand:"alignedGoals,usageCount"}))},this.state={activeQuestionPoolId:null,addMenuTarget:null,disableAssessmentSettingCallback:null,extraCreditVisibility:Je.b.Visible,hasCopyQuestionsStatusInitialized:!1,isCopyingQuestions:!1,isLoadingInProgress:!0,isShowingAutopostNotification:!1,isShowingQuestionPoolPanel:!1,isShowingWarningDialog:!1,openAddMenuIndex:-1,questions:[],questionBeingEditedId:null,questionBeingEditedIsDirty:!1,isShowingQuestionPoolQuestionPicker:!1,isShowingReuseQuestionPicker:!1,notification:null,warningDialogSubText:null,warningDialogTitle:null,warningDialogOnOK:null}}UNSAFE_componentWillReceiveProps(e){const{assessment:t,isLoadingInProgress:s,questions:n}=e,{hasCopyQuestionsStatusInitialized:i,isLoadingInProgress:a}=this.state;this.setState((()=>({questions:this.getPageNumbersAndCount(this.sortByPosition(n))}))),a&&this.setState((()=>({isLoadingInProgress:s||!t||t.questionCount>0&&0===n.length})));!i&&!!t&&this.setState((()=>({hasCopyQuestionsStatusInitialized:!0})),(()=>this.initCopyQuestionsStatusDisplay(t)))}componentWillUnmount(){this.cancelCheckCopyQuestionsStatusInterval()}shouldInsertWarningDialog(){return this.hasAnonymousGrading()||this.hasRubricAssociations()||this.isCollectExternalSubmissions()||this.hasDelegatedGrading()||this.hasPeerGrading()||this.shouldEnableViewStudentSubmissionSettings()}showWarningDialog(e,t,s){const{localizationPrefix:n}=this.props;this.setState((()=>({isShowingWarningDialog:!0,warningDialogSubText:`${n}.canvas.warningDialogs.${e}.subText`,warningDialogTitle:`${n}.canvas.warningDialogs.${e}.title`,warningDialogOnOK:t,disableAssessmentSettingCallback:s})))}dismissCopyQuestionsStatusBanner(){this.setState((()=>({notification:null}))),this.deleteCopyQuestionsTaskPref(),this.cancelCheckCopyQuestionsStatusInterval()}renderReuseQuestionPicker(){const{assessment:e,courseId:t,features:s,localizationPrefix:n}=this.props;if(!(!!e&&this.state.isShowingReuseQuestionPicker))return null;const a={assessmentId:e.id,assessmentTitle:e.title,questionPositionAfter:this.calculateQuestionPositionAfter()};return i.a.createElement(Ne,{courseId:t,destination:a,closePanel:this.closeReuseQuestionPanel,features:s,localizationPrefix:n,extraCreditVisibility:this.state.extraCreditVisibility})}renderQuestionPoolQuestionPicker(){const{assessment:e,courseId:t,features:s,localizationPrefix:n}=this.props;if(!(!!e&&this.state.isShowingQuestionPoolQuestionPicker))return null;const a={assessmentId:e.id,assessmentTitle:e.title,questionPositionAfter:this.calculateQuestionPositionAfter()};return i.a.createElement(_e,{courseId:t,destination:a,closePanel:this.closeQuestionPoolQuestionPicker,features:s,localizationPrefix:n,extraCreditVisibility:this.state.extraCreditVisibility})}renderPoolQuestionPanel(){const{activeQuestionPoolId:e,isShowingQuestionPoolPanel:t,extraCreditVisibility:s}=this.state;return!!this.props.assessment&&!!e&&t?i.a.createElement(he,{questionPoolId:e,assessmentId:this.props.assessment.id,assessmentTitle:this.props.assessment.title,closePanel:this.closeQuestionPoolPanel,courseId:this.props.courseId,hasSubmissions:this.hasSubmissions(),hasAssessmentModifyPermissions:this.hasAssessmentModifyPermissions(),openQuestionPicker:this.openQuestionPoolQuestionPicker,persistQuestion:this.persistQuestion,localizationPrefix:this.props.localizationPrefix,supportsInlineDocumentRender:this.props.features.supportsInlineDocumentRender,extraCreditVisibility:s}):null}renderAutopostNotification(){const{isShowingAutopostNotification:e}=this.state;return e?i.a.createElement(Ye,null):null}renderPseudoPageBreakHeader(){const{localize:e}=this.props,t=e.translate,s=this.getPageCount();return i.a.createElement("div",{className:"page-break"},i.a.createElement("div",{className:"contents"},i.a.createElement(c.AnalyticsTypography,{component:"span"},t("assessments.canvas.question.pageBreak.pageNumber",{pageNumber:1,pageCount:s}))))}render(){var e;const{assessment:t,content:s,courseId:n,localize:a,gradebookColumn:o,localizationPrefix:r,fileUploadSettings:l}=this.props,u=a.translate,d=this.hasSubmissions(),m=this.hasAssessmentModifyPermissions(),p=this.getAddMenuOptions(),h=!this.state.isLoadingInProgress&&0===this.state.questions.length,g=null==s?void 0:s.deploymentSettings.allowStudentSubmission,f=null==t?void 0:t.hasAnswerableQuestions,v=f?"AdditionalContentTitle":"SubmissionTitle",C=this.hasAssessmentModifyPermissions(),P=this.hasPageBreaks();let w,I;return o&&o.gradebookCategory&&(I=o.gradebookCategory.title,w=o.gradebookCategory.isUserDefined?"custom":I),i.a.createElement("div",{className:"assessment-canvas-react"},this.renderAutopostNotification(),h&&!this.isCollectExternalSubmissions()&&i.a.createElement("div",{className:"assessment-canvas-react assessment-canvas-react--blank"},i.a.createElement(E.a,{image:D.a,passedClass:"assessment-canvas-react--blank__image"}),i.a.createElement("h3",{className:"assessment-canvas-react--blank__title"},u(`${r}.canvas.emptyState.header.assessment`)),i.a.createElement("div",null,u(`${r}.canvas.emptyState.saving`))),this.state.isLoadingInProgress&&i.a.createElement(b.Spinner,{size:b.SpinnerSize.large}),(null===(e=this.state.addMenuTarget)||void 0===e?void 0:e.inlineAddButton)&&i.a.createElement(y.j,{analyticsId:"assessment.canvas.add.menu",anchorEl:this.state.addMenuTarget.inlineAddButton,id:this.contextualMenuId,items:p,MenuListProps:{"aria-label":u(`${r}.canvas.add.menu`),className:"js-assessment-canvas-add-menu"},onClose:this.onDismissAddMenu,open:-1!==this.state.openAddMenuIndex}),!this.state.isLoadingInProgress&&i.a.createElement("div",{className:"assessment-canvas-react__question-list"},0===this.state.questions.length||null==s?null:i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"assessment-canvas-react__heading"},i.a.createElement("h2",null,u(`${r}.canvas.content.${w}`,{categoryTitle:I})),!d&&i.a.createElement(Ge,{deletePageBreaks:this.deletePageBreaks,canEditAssessment:C,hasPageBreaks:P})),i.a.createElement(M,{content:s,localizationPrefix:this.props.localizationPrefix})),P&&this.renderPseudoPageBreakHeader(),i.a.createElement(T,{assessmentId:(null==t?void 0:t.id)||"",courseId:n,items:this.state.questions,boundingElementId:"gradebook-item-panel-content",onReorderItem:this.onReorder,scrollContainerId:"basic-container",checkAndDisableAssessmentSettings:this.checkAndDisableAssessmentSettings,persistQuestion:this.persistQuestion,deleteQuestion:this.deleteQuestion,AddButton:this.AddButton,onQuestionEdit:this.onQuestionEdit,onQuestionMadeDirty:this.onQuestionMadeDirty,questionBeingEditedId:this.state.questionBeingEditedId,isAnyQuestionDirty:this.isAnyQuestionDirty(),hasSubmissions:d,isLoadingInProgress:this.state.isLoadingInProgress,hasAssessmentModifyPermissions:m,openGoals:this.props.routes.openGoals,pluginsConfig:this.props.editorPluginsConfig,notification:this.state.notification,disableInteraction:this.state.isCopyingQuestions,openPoolQuestionPanel:this.openPoolQuestionPanel,addQuestionsToEmptyPool:this.addQuestionsToEmptyPoolFromAssessmentCanvas,localizationPrefix:this.props.localizationPrefix,supportsInlineDocumentRender:this.props.features.supportsInlineDocumentRender,fileUploadSettings:l,extraCreditVisibility:this.state.extraCreditVisibility})),this.state.isCopyingQuestions&&i.a.createElement("div",{className:"assessment-canvas-react__questions-overlay"}),!this.state.isLoadingInProgress&&!this.isCollectExternalSubmissions()&&i.a.createElement("div",{className:"assessment-canvas-react__student-submission"},i.a.createElement("div",{className:"assessment-canvas-react__student-submission-switch"},i.a.createElement("div",{className:"assessment-canvas-react__student-submission-switch__container"},i.a.createElement(c.AnalyticsTooltip,{classes:{tooltip:"add-additional-content-tooltip"},title:u(`${r}.canvas.studentSubmission.SwitchTooltip`),analyticsId:"course.content.assessment.AllowStudentSubmission.switchTooltip",placement:"top-start",disableFocusListener:f,disableHoverListener:f},i.a.createElement(c.AnalyticsFormControlLabel,{classes:{root:"switch-root"},htmlFor:"student-submission-display-selector",onClick:()=>this.handleAllowStudentSubmissionChange(),checked:g,disabled:this.checkAllowStudentSubmission()||d,"aria-label":u(`${r}.canvas.studentSubmission.switchLabel`),control:i.a.createElement(c.AnalyticsSwitch,{id:"student-submission-display-switch",className:"assessment-canvas-react_student-submission-switch",analyticsId:"assessment.canvas.studentSubmission.switch"}),"data-analytics-id":"course.content.assessment.AllowStudentSubmission.switch",analyticsId:"SHOW_STUDENT_SUBMISSION_SWITCH_ANALYTICS_ID",label:void 0})),i.a.createElement("span",{className:"assessment-canvas-react__student-submission-switch__label"},u(`${r}.canvas.studentSubmission.switchLabel`))),f&&!g&&!d&&i.a.createElement("div",{className:"assessment-canvas-react__student-submission-switch__note"},u(`${r}.canvas.studentSubmission.switchNote`))),g&&i.a.createElement("div",{className:"assessment-canvas-react__student-submission-section"},!h&&i.a.createElement("div",{className:"assessment-canvas-react__student-submission__additional-content"},u(`${r}.canvas.studentSubmission.${v}`)),i.a.createElement("div",{className:"assessment-canvas-react__student-submission__student-submission-info"},u(`${r}.canvas.studentSubmission.AdditionalContentSubtext`)))),this.shouldInsertWarningDialog()&&i.a.createElement(De.a,{show:this.state.isShowingWarningDialog,onCancel:this.hideWarningDialog,onDismiss:this.hideWarningDialog,onOk:this.state.warningDialogOnOK,subText:u(this.state.warningDialogSubText),title:u(this.state.warningDialogTitle),key:this.state.warningDialogTitle,analyticsId:"assessmentCanvas.insertWarning"}),this.renderReuseQuestionPicker(),this.renderQuestionPoolQuestionPicker(),this.renderPoolQuestionPanel())}}tt.SYNC_QUESTION_COPY_LIMIT=50,tt.PROD_COPY_QUESTIONS_STATUS_CHECK_INTERVAL=3e4,tt.COPY_QUESTIONS_STATUS_CHECK_INTERVAL=8e3,tt.hasCopyQuestionsTaskFinishedProcessing=e=>"COMPLETE"===e||"COMPLETE_ERRORS"===e||"INCOMPLETE"===e,tt.shouldCallCopyQuestionsQueued=e=>e>tt.SYNC_QUESTION_COPY_LIMIT;const st=e=>{const t=e&&e.value&&JSON.parse(e.value);return p.isEmpty(t)?null:t},nt=Object(r.b)(((e,t)=>{const s=p.get(t,"assessment.courseId"),n=p.get(t,"assessment.id"),i=et(n),a=d.gc.coursePreference.getCoursePreferenceByKeyAndCourseId(e,i,s);return{copyQuestionTaskPref:st(a)}}),(e=>Object(u.b)({addQuestionsToPool:d.X.question.updateQuestionsInQuestionBlock,deleteCoursePreference:d.X.coursePreference.deleteCoursePreference,deleteQuestions:d.X.question.deleteQuestions,loadCoursePreference:d.X.coursePreference.loadCoursePreference,saveCoursePreference:(e,t,s)=>{const n={key:e,value:t,visibleToStudents:!1};return d.X.coursePreference.persistCoursePreference(n,s)},setError:d.X.app.setError},e)))(tt);var it=Object(g.a)(nt),at=s("7x0g"),ot=s("NdLt");class rt extends n.Component{constructor(e){super(e),this.loadedColumnSummary=!1,this.loadedGradebookColumn=!1,this.loadedContent=!1,this.assessmentHasResponses=()=>{const{assessment:e}=this.props;return e&&e.hasResponses},this.contentHasMultipleAttempts=()=>{const{content:e}=this.props;return e&&e.deploymentSettings&&1!==e.deploymentSettings.attemptCount},this.contentHasTimeLimit=()=>{const{content:e}=this.props;return e&&e.deploymentSettings&&null!=e.deploymentSettings.timeLimit},this.contentHasGroups=()=>{const{content:e}=this.props;return e&&e.isGroupContent},this.columnHasPostedGrades=()=>{const{columnSummary:e}=this.props;return e&&(e.numGroupsPosted||e.numPosted)},this.canEditSettings=()=>{const{assessment:e}=this.props;return e&&e.permissions.modify&&e.permissions.deploy},this.canEditDueDate=()=>{const{assessment:e}=this.props;if(!e)return!1;const t=e.permissions;return t.modify&&t.deploy&&t.modifyDueDate},this.canOpenGroups=()=>this.canEditSettings()&&!this.contentHasMultipleAttempts()&&!this.contentHasTimeLimit(),this.persist=()=>{const{content:e,gradebookColumn:t,persistContent:s,persistGradebookColumn:n}=this.props,i={...e},a={...t};null!==this.state.allowConversations&&(this.state.allowConversations?i.forumAttacherAction=d.v.ADD.toString():(i.forumAttacherAction=d.v.DELETE.toString(),i.attachedForumLink=null));const o=null!==this.state.randomizeQuestions,r=null!==this.state.randomizeAnswers;return(o||r)&&(i.deploymentSettings={...e.deploymentSettings},o&&(i.deploymentSettings.isRandomizationOfQuestionsRequired=this.state.randomizeQuestions),r&&(i.deploymentSettings.isRandomizationOfAnswersRequired=this.state.randomizeAnswers)),null!==this.state.dueDate&&(a.dueDate=this.state.dueDate),null!==this.state.anonymousGrading&&(a.anonymousGrading=this.state.anonymousGrading),s(e,i).then((()=>{n(t,a).then((()=>{this.setState({allowConversations:null,randomizeQuestions:null,randomizeAnswers:null,dueDate:null,anonymousGrading:null})}))}))},this.onAllowConversationToggle=(e,t)=>{this.setState({allowConversations:t})},this.onRandomizeQuestionsToggle=(e,t)=>{this.setState({randomizeQuestions:t})},this.onRandomizeAnswersToggle=(e,t)=>{this.setState({randomizeAnswers:t?"ALWAYS":"NEVER"})},this.onAnonymousGradingToggle=(e,t)=>{this.setState({anonymousGrading:t})},this.onDueDateChange=e=>{this.setState((()=>({dueDate:e})))},this.onGroupsDelete=()=>{this.setState((()=>({showDeleteGroupsDialog:!0})))},this.onGroupsDeleteCancel=()=>{this.setState((()=>({showDeleteGroupsDialog:!1})))},this.onGroupsDeleteConfirm=()=>{const{content:e,deleteGroups:t}=this.props;t(e.id),this.setState((()=>({showDeleteGroupsDialog:!1})))},this.getGroupsSubTitle=()=>{const{content:e,localizationPrefix:t,t:s}=this.props;let n="";if(this.canEditSettings())if(this.contentHasMultipleAttempts()||this.contentHasTimeLimit())this.contentHasMultipleAttempts()&&this.contentHasTimeLimit()?n=s(`${t}.settings.groups.subtitle.restrictions.attemptsAndTimeLimit`):this.contentHasTimeLimit()?n=s(`${t}.settings.groups.subtitle.restrictions.timeLimit`):this.contentHasMultipleAttempts()&&(n=s(`${t}.settings.groups.subtitle.restrictions.attempts`));else if(this.contentHasGroups())n=s(`${t}.settings.groups.subtitle.numberOfGroups.plural`,{count:e.assignedGroups.length});else{if(!this.assessmentHasResponses()&&!this.columnHasPostedGrades())return null;{const e=this.props.gradebookColumn.gradebookCategory,i=e.isUserDefined?"custom":e.title;this.columnHasPostedGrades()?n=s(`${t}.settings.groups.subtitle.restrictions.studentAttempts.${i}`,{title:i}):this.assessmentHasResponses()&&(n=s(`${t}.settings.groups.subtitle.restrictions.postedGrades.${i}`,{title:i}))}}else n=s(`${t}.settings.groups.subtitle.restrictions.insufficientPrivileges`);return i.a.createElement("div",null,n)},this.state={allowConversations:null,anonymousGrading:null,randomizeQuestions:null,randomizeAnswers:null,dueDate:null,showDeleteGroupsDialog:!1}}componentDidUpdate(e){const{gradebookColumn:t,content:s,courseId:n,contentId:i,loadColumnSummary:a,loadContents:o,loadGradebookColumn:r}=this.props;t||this.loadedGradebookColumn||!s||(r({courseId:n,columnId:s.gradingColumn.id}),this.loadedGradebookColumn=!0),this.loadedColumnSummary||e.gradebookColumn||!t||(a({courseId:t.courseId,columnId:t.id}),this.loadedColumnSummary=!0),s||this.loadedContent||(o({courseId:n,contentId:i}),this.loadedContent=!0)}render(){const{content:e,gradebookColumn:t,localizationPrefix:s,analyticsEventAugmentor:n,t:a}=this.props,{showDeleteGroupsDialog:o}=this.state,r="assessmentSettings.settings.groups.title.link",l=n(z.AnalyticsEventTypes.CLICK_EVENT,(()=>{}),r);return i.a.createElement("div",{className:"assessment-settings"},e&&t&&i.a.createElement("div",null,i.a.createElement(b.TextField,{className:"dueDate",label:a(`${s}.settings.dueDate`),defaultValue:t.dueDate,disabled:!this.canEditDueDate(),onChanged:this.onDueDateChange,analyticsId:"assessmentSettings.editDueDate"}),i.a.createElement(b.Checkbox,{label:a(`${s}.settings.allowClassConversations`),defaultChecked:!!e.attachedForumLink,disabled:!this.canEditSettings(),onChange:this.onAllowConversationToggle,analyticsId:"assessmentSettings.allowClassConversation"}),i.a.createElement(b.Checkbox,{label:a(`${s}.settings.randomizeQuestions`),defaultChecked:e.deploymentSettings.isRandomizationOfQuestionsRequired,disabled:!this.canEditSettings(),onChange:this.onRandomizeQuestionsToggle,analyticsId:"assessmentSettings.randomizeQuestions"}),i.a.createElement(b.Checkbox,{label:a(`${s}.settings.randomizeAnswers`),defaultChecked:e.deploymentSettings.isRandomizationOfAnswersRequired===f.Wb.Always,disabled:!this.canEditSettings(),onChange:this.onRandomizeAnswersToggle,analyticsId:"assessmentSettings.randomizeAnswers"}),i.a.createElement("h3",{className:"assessment-settings__subheader"},a(`${s}.settings.anonymousGrading`)),i.a.createElement(b.Checkbox,{label:a(`${s}.settings.hideStudentNames`),defaultChecked:t.anonymousGrading,onChange:this.onAnonymousGradingToggle,analyticsId:"assessmentSettings.hideStudentNames"}),i.a.createElement(ot.AnalyticsPrimaryButton,{className:"submitButton",onClick:this.persist,analyticsId:"assessmentSettings.submit"},a(`${s}.settings.submitButton`))),i.a.createElement("div",null,this.canOpenGroups()?i.a.createElement("a",{"data-analytics-id":r,href:this.props.routes.getGroupsHref(),onClick:l},i.a.createElement(R.Groups,null),i.a.createElement("div",null,a(`${s}.settings.groups.title`)),this.getGroupsSubTitle()):i.a.createElement("div",null,i.a.createElement(R.Groups,null),i.a.createElement("div",null,a(`${s}.settings.groups.title`)),this.getGroupsSubTitle()),this.contentHasGroups()&&this.canEditSettings()?i.a.createElement(Pe.AnalyticsIconButton,{className:"delete-groups",onClick:this.onGroupsDelete,disabled:this.assessmentHasResponses()||this.columnHasPostedGrades(),"aria-label":a(`${s}.settings.groups.delete.label`),analyticsId:"assessmentSettings.groups.delete"},i.a.createElement(v.Trash,null)):null),i.a.createElement(at.a,{hidden:!o,onCancel:this.onGroupsDeleteCancel,onContinue:this.onGroupsDeleteConfirm,titleKey:`${s}.settings.groups.delete.dialog.title`,textKey:`${s}.settings.groups.delete.dialog.text`,cancelKey:"assessments.global.cancel",continueKey:"assessments.global.yes",analyticsId:"assessment.settings.groups.delete.dialog"}))}}const lt=Object(r.b)(((e,t)=>({assessment:d.gc.assessment.getAssessmentByContentId(e,t.contentId),columnSummary:d.gc.columnSummary.getColumnSummaryByColumnId(e,t.gradebookColumn&&t.gradebookColumn.id),content:d.gc.content.getContentById(e,t.contentId),gradebookColumn:d.gc.gradebookColumn.getGradebookColumnByContentId(e,t.contentId)})),(e=>Object(u.b)({loadColumnSummary:d.X.columnSummary.loadColumnSummary,deleteGroups:d.X.group.deleteByContentId,loadGradebookColumn:d.X.gradebookColumn.loadGradebookColumn,loadContents:d.X.content.loadContents,persistGradebookColumn:d.X.gradebookColumn.persistGradebookColumn,persistContent:d.X.content.persistContent},e)))(Object(P.a)(rt));var ct=Object(z.withAnalytics)(lt),ut=s("33wY");class dt extends n.Component{constructor(e){super(e),this.state={hasLoadedQuestions:!1,isQuestionLoadingInProgress:!0}}componentDidMount(){const{courseId:e,contentId:t,loadContents:s}=this.props;e&&t&&s({courseId:e,contentId:t})}componentDidUpdate(e){const{assessment:t,courseId:s,loadGradebookColumn:n,loadQuestions:i}=this.props,{hasLoadedQuestions:a}=this.state;!e.assessment&&t&&n({courseId:s,columnId:null==t?void 0:t.gradableItemId}),t&&(a||i({courseId:s,assessmentId:t.id,refreshState:!0,expand:"alignedGoals,usageCount",offset:0}).then((()=>{this.setState((()=>({isQuestionLoadingInProgress:!1,hasLoadedQuestions:!0})))})))}render(){const{allyService:e,contentId:t,features:s,UltraWindowSize:n}=this.props;return i.a.createElement("div",null,i.a.createElement(ut.a,{allyService:e,contentId:t},i.a.createElement(it,{...this.props,isLoadingInProgress:this.state.isQuestionLoadingInProgress}),s&&s.reactAssessmentsSettings&&!1))}}var mt=Object(r.b)(((e,t)=>({assessment:d.gc.assessment.getAssessmentByContentId(e,t.contentId),questions:d.gc.question.getQuestionsByContentId(e,t.contentId),content:d.gc.content.getContentById(e,t.contentId),gradebookColumn:d.gc.gradebookColumn.getGradebookColumnByContentId(e,t.contentId),fileUploadSettings:d.gc.fileUploadSettings.getFileUploadSettings(e)})),(e=>Object(u.b)({loadContents:d.X.content.loadContents,loadGradebookColumn:d.X.gradebookColumn.loadGradebookColumn,persistContent:d.X.content.persistContent,persistGradebookColumn:d.X.gradebookColumn.persistGradebookColumn,createQuestion:d.X.question.createQuestion,deleteQuestion:d.X.question.deleteQuestion,loadQuestions:d.X.question.loadQuestions,persistQuestion:d.X.question.persistQuestion,removeRubricAssociations:d.X.gradebookColumn.removeRubricAssociations},e)))(Object(m.windowResizingResponsiveComponentWrapper)(dt)),pt=s("1mOI");var ht=({question:e,answersInfo:t,pluginsConfig:s})=>i.a.createElement("div",{className:"readonly-calculated-formula-question"},i.a.createElement("div",{className:"readonly-answer__main"},i.a.createElement(pt.a,{pluginsConfig:s,question:e,supportsInlineDocumentRender:!1})),t&&i.a.createElement("div",{className:"readonly-answer__info readonly-calculated-formula-question__info"},i.a.createElement("div",{className:"readonly-calculated-formula-question__info-section"},t[0]),i.a.createElement("div",{className:"readonly-calculated-formula-question__info-section"},t[1]),i.a.createElement("div",{className:"readonly-calculated-formula-question__info-section"},t[2]))),gt=s("+F4g"),bt=s("ekqz");var yt=e=>{const{answersInfo:t,question:s}=e;return i.a.createElement("div",{className:"readonly-calculated-numeric-question"},i.a.createElement("div",{className:"readonly-answer__main"},i.a.createElement(bt.b,{id:s.id,bbml:s.questionText.rawText,isReadOnly:!0,refreshBbml:!0}),i.a.createElement(gt.a,{...e})),t&&i.a.createElement("div",{className:"readonly-answer__info readonly-calculated-numeric-question__info"},i.a.createElement("div",{className:"readonly-calculated-numeric-question__info-section"},t[0]),i.a.createElement("div",{className:"readonly-calculated-numeric-question__info-section"},t[1]),i.a.createElement("div",{className:"readonly-calculated-numeric-question__info-section"},t[2])))},ft=s("7O4Y");const vt=Object(Le.makeStyles)((e=>Object(Le.createStyles)({readonlyEssayQuestionRoot:{"& .instructions":{border:`solid 1px ${e.palette.background.b5}`,backgroundColor:e.palette.background.b2,borderRadius:"2px",padding:"8px 10px",minHeight:"20px",color:e.palette.text.secondary,marginTop:"6px",cursor:"default"},"& .model-answer":{[e.breakpoints.up("md")]:{width:"70%"}}}})));var Ct=s("EG80");var Et=e=>{const{question:t,questionTextClassName:s}=e,n=Object(Q.a)(),a=vt();return i.a.createElement("div",{className:Object(ft.a)(a.readonlyEssayQuestionRoot,"readonly-essay-question")},i.a.createElement("div",{className:s},i.a.createElement(bt.b,{id:t.id,bbml:t.questionText.rawText,isReadOnly:!0,refreshBbml:!0})),i.a.createElement("div",{className:"readonly-answer__container"},i.a.createElement("div",{className:"instructions readonly-answer__instructions readonly-answer__main"},n("assessments.canvas.question.essay.instructions"))),i.a.createElement(Ct.a,{disableFocus:!1,isReadOnly:!0,refreshBbml:!0,question:t}))},Pt=s("ERsv"),wt=s("5O/A"),It=s("K9sL");var St=e=>{const t=Object(Q.a)(),{question:s,answersInfo:n,answersInfoLabel:a,questionTextClassName:o,pluginsConfig:r}=e,l={},c=e=>{const s=l[e];if(s)return s;const n=e.split("-")[1],i=t("assessments.canvas.question.fimb.blank",{count:n});return l[e]=i,i};return i.a.createElement("div",{className:"readonly-fimb-question"},i.a.createElement("div",{className:o},i.a.createElement(bt.b,{id:s.id,plugins:[Object(Pt.customClass)()],bbml:(e=>{let t=e.questionText.rawText;return e.answers.forEach((e=>{const{ident:s}=e,n=l[s];if(n)t=t.replace(s,n);else{const e=c(s);t=t.replace(s,e),l[s]=e}})),t})(s),isReadOnly:!0,refreshBbml:!0})),i.a.createElement("div",{className:"readonly-fimb-question"},i.a.createElement("div",{className:"readonly-answer__container"},i.a.createElement("span",{className:"readonly-fimb-question__instructions readonly-answer__instructions readonly-answer__main"}),n&&i.a.createElement("span",{className:"readonly-answer__info-label readonly-answer__info"},a)),s.answers.map(((e,s)=>{const a=e.answerValues[0],o=wt.b[a.evaluationType].locKey,r=t(`${o}.${a.caseSensitive?"readOnlyCaseSensitive":"readOnly"}`);return i.a.createElement("div",{key:e.ident,className:"readonly-fimb-question-answer"},i.a.createElement("div",{className:"readonly-answer__container"},i.a.createElement("div",{className:"readonly-answer__main readonly-fimb-question-answer-input"},i.a.createElement("div",{className:"readonly-fimb-question-answer-input__label"},c(e.ident)),i.a.createElement("div",{className:"readonly-fimb-question-answer-input__input-wrapper"},i.a.createElement("div",{className:"readonly-fimb-question-answer-input__answer"},e.answerValues.map((e=>e.value)).join(";")))),n&&i.a.createElement("div",{className:"readonly-answer__info"},n[s])),i.a.createElement("div",{className:"readonly-fimb-question-answer__description"},r))})),i.a.createElement(It.d,{pluginsConfig:r,question:s})))},kt=s("rQu3");const qt=Object(Le.makeStyles)((e=>Object(Le.createStyles)({root:{display:"flex",flexDirection:"column",[e.breakpoints.up("md")]:{flexDirection:"row"}},question:{"& .automated-question-feedback-read":{[e.breakpoints.up("md")]:{width:"100%"}}},answersInfoWrapper:{marginTop:"10px",[e.breakpoints.up("md")]:{marginTop:"0px"}},answerInfo:{marginBottom:"21px"}})));var Qt=e=>{const t=qt(),{answersInfo:s,question:n,pluginsConfig:a}=e;return i.a.createElement("div",{className:t.root},i.a.createElement("div",{className:Object(ft.a)(t.question,"readonly-answer__main")},i.a.createElement(bt.b,{id:n.id,bbml:n.questionText.rawText,isReadOnly:!0,refreshBbml:!0}),i.a.createElement(kt.a,{pluginsConfig:a,question:n})),s&&i.a.createElement("div",{className:"readonly-answer__info"},i.a.createElement("div",{className:t.answersInfoWrapper},s.map(((e,s)=>i.a.createElement("div",{key:s,className:t.answerInfo},e))))))},At=s("cw3y"),xt=s("ZQN4");var Ot=Object(m.windowResizingResponsiveComponentWrapper)((e=>{const t=Object(Q.a)(),{answersInfo:s,answersInfoLabel:n,hideDistractors:a,question:o,UltraWindowSize:r,questionTextClassName:l,pluginsConfig:c}=e,u=Object(xt.a)(o),d=t(`assessments.canvas.question.matching.scoringOptions.${u.key}`),m=t("assessments.canvas.question.matching.scoringOptions.readPlaceholder",{scoringOption:d}),p=o.answers.filter((e=>e.isDistractor));return i.a.createElement("div",{className:"readonly-matching__container"},i.a.createElement("div",{className:l},i.a.createElement(bt.b,{id:o.id,bbml:o.questionText.rawText,isReadOnly:!0,refreshBbml:!0})),i.a.createElement("div",{className:"readonly-matching__pairs"},i.a.createElement("div",{className:"readonly-answer__container"},i.a.createElement("div",{className:"readonly-multiple-answer-question__instructions readonly-answer__main readonly-answer__instructions"},!r.isSmallBreakpoint()&&i.a.createElement("div",{className:"readonly-matching__column-titles-container"},i.a.createElement("div",{className:"readonly-matching__column-title"},t("assessments.canvas.question.matching.headers.prompts")),i.a.createElement("div",{className:"readonly-matching__column-title"},t("assessments.canvas.question.matching.headers.answers")))),s&&i.a.createElement("span",{className:"readonly-answer__info-label readonly-answer__info"},n)),i.a.createElement("ol",{className:"readonly-matching__list"},o.prompts.map(((e,n)=>((e,n)=>{const a=n+1,l=`answer-header-${o.id}-${a}`,c=`prompt-header-${o.id}-${n}`,u=`${G.a}${o.id} ${c}`,d=r.isSmallBreakpoint()?t("assessments.canvas.question.matching.indexMobile",{pairNumber:a}):t("assessments.canvas.question.matching.index",{pairNumber:a});return i.a.createElement("li",{key:e.id,className:"readonly-matching__list-item readonly-answer__container"},i.a.createElement("div",{className:"readonly-matching-prompt-answer-pair__container readonly-answer__main"},i.a.createElement("div",{className:"readonly-matching-prompt-answer-pair__element readonly-matching-prompt-answer-pair__element-index"},d),i.a.createElement("div",{className:"readonly-matching-prompt-answer-pair__element readonly-matching-prompt-answer-pair__element-prompt"},i.a.createElement("div",{className:"readonly-matching-prompt-answer-pair__text"},i.a.createElement("div",{id:c,className:"sr-only"},t("assessments.canvas.question.matching.headers.prompt",{pairNumber:a})),i.a.createElement(bt.b,{ariaLabelledBy:u,bbml:e.promptText.rawText,id:`prompt-${e.id}`,isReadOnly:!0,ariaRequired:!0}))),r.isSmallBreakpoint()&&i.a.createElement("div",{className:"\n                        readonly-matching-prompt-answer-pair__element\n                        readonly-matching-prompt-answer-pair__element-answer-label\n                    "},t("assessments.canvas.question.matching.answerLabel")),i.a.createElement("div",{className:"readonly-matching-answer"},i.a.createElement("div",{className:"readonly-matching-answer__text"},i.a.createElement("div",{id:l,className:"sr-only"},t("assessments.canvas.question.matching.headers.answer",{pairNumber:a})),i.a.createElement(bt.b,{ariaLabelledBy:u,bbml:o.answers[e.matchingAnswerIndex].answerText.rawText,id:At.b(e.id),isReadOnly:!0,ariaRequired:!0})))),s&&i.a.createElement("div",{className:"readonly-matching-question__answers-info readonly-answer__info"},s[n]))})(e,n)))),!a&&p.length>0&&i.a.createElement("div",{className:"readonly-matching__distractors"},i.a.createElement("div",{className:"readonly-matching__distractors-list"},i.a.createElement("div",{className:"readonly-matching__distractors-list-label"},i.a.createElement("span",null,t("assessments.canvas.question.matching.additionalAnswers"))),i.a.createElement("ol",{className:"readonly-matching__list matching__distractors-list-items"},p.map(((e,s)=>((e,s)=>{const n=s+1,a=`distractor-header-${o.id}-${s}`,r=`${G.a}${o.id} ${a}`;return i.a.createElement("li",{className:"readonly-matching__distractors-list-items-item",key:e.ui.id},i.a.createElement("div",{className:"readonly-matching-distractor"},i.a.createElement("div",{className:"readonly-matching-distractor__answer"},i.a.createElement("div",{className:"readonly-matching-distractor__text"},i.a.createElement("div",{id:a,className:"sr-only"},t("assessments.canvas.question.matching.headers.distractor",{distractorNumber:n})),i.a.createElement(bt.b,{ariaLabelledBy:r,bbml:e.answerText.rawText,id:`distractor-${e.ui.id}`,isReadOnly:!0,ariaRequired:!0})))))})(e,s)))))),i.a.createElement("div",{className:"readonly-matching-question-scoring-options__text"},m)),i.a.createElement(It.d,{pluginsConfig:c,question:o}))}));var Nt=e=>{const{answersInfo:t,answersInfoLabel:s,question:n,questionTextClassName:a,pluginsConfig:o}=e,r=Object(Q.a)(),l="assessments.canvas.question.multipleAnswer";return i.a.createElement("div",{className:"readonly-multiple-answer-question"},i.a.createElement("div",{className:a},i.a.createElement(bt.b,{id:n.id,bbml:n.questionText.rawText,isReadOnly:!0,refreshBbml:!0})),i.a.createElement("div",{className:"readonly-answer__container"},i.a.createElement("div",{className:"readonly-multiple-answer-question__instructions readonly-answer__main readonly-answer__instructions"},r(`${l}.answerInstructions`)),t&&i.a.createElement("span",{className:"readonly-answer__info-label readonly-answer__info"},s)),i.a.createElement("ol",{className:"readonly-multiple-answer-question__list"},n.answers.map(((e,s)=>i.a.createElement("li",{key:e.id,className:"readonly-multiple-answer-question__li readonly-answer__container"},i.a.createElement("div",{className:"readonly-multiple-answer-question__answer readonly-answer__main"},i.a.createElement("span",{className:"readonly-multiple-answer-question__text"},i.a.createElement(bt.b,{bbml:e.answerText.rawText,id:e.id,isReadOnly:!0})),e.correctAnswer&&i.a.createElement("span",{className:"readonly-multiple-answer-question__correct"},r(`${l}.correctAnswer`))),t&&i.a.createElement("div",{className:"readonly-multiple-answer-question__answers-info readonly-answer__info"},t[s]))))),i.a.createElement(It.d,{pluginsConfig:o,question:n}))};var Tt=e=>{const{answersInfo:t,answersInfoLabel:s,question:n,questionTextClassName:a,pluginsConfig:o}=e,r=Object(Q.a)(),l="assessments.canvas.question.trueFalse";return i.a.createElement("div",{className:"readonly-true-false-question"},i.a.createElement("div",{className:a},i.a.createElement(bt.b,{id:n.id,bbml:n.questionText.rawText,isReadOnly:!0,refreshBbml:!0})),i.a.createElement("div",{className:"readonly-answer__container"},t&&i.a.createElement("span",{className:"readonly-answer__info-label readonly-answer__info"},s)),i.a.createElement("ol",{className:"readonly-true-false-question__list"},i.a.createElement("li",{className:"readonly-true-false-question__li readonly-answer__container"},i.a.createElement("div",{className:"readonly-true-false-question__answers readonly-answer__main"},i.a.createElement("span",{className:"readonly-true-false-question__text"},r(`${l}.${n.answerType}.true`)),n.answer&&i.a.createElement("span",{className:"readonly-true-false-question__correct"},r(`${l}.correctAnswer`))),t&&i.a.createElement("div",{className:"readonly-true-false-question__answers-info readonly-answer__info"},t[0])),i.a.createElement("li",{className:"readonly-true-false-question__li readonly-answer__container"},i.a.createElement("div",{className:"readonly-true-false-question__answers readonly-answer__main"},i.a.createElement("span",{className:"readonly-true-false-question__text"},r(`${l}.${n.answerType}.false`)),!n.answer&&i.a.createElement("span",{className:"readonly-true-false-question__correct"},r(`${l}.correctAnswer`))),t&&i.a.createElement("div",{className:"readonly-true-false-question__answers-info readonly-answer__info"},t[1]))),i.a.createElement(It.d,{pluginsConfig:o,question:n}))};var _t=e=>i.a.createElement("p",null,"readonly essay presentation-only content: ",e.question.id),Dt=s("HuI8");var jt=e=>{const{title:t,titleAlert:s,points:n}=e,{translate:a,formatNumber:o}=Object(Dt.a)(),r=null==n?a("assessments.canvas.question.header.noPoints"):a("assessments.canvas.question.header.points",{points:o(n,{maximumFractionDigits:2})});return i.a.createElement("div",{className:"readonly-question-header"},i.a.createElement("span",{className:"readonly-question-header__content"},i.a.createElement("span",{className:"readonly-question-header__title-container"},i.a.createElement("h3",{className:"readonly-question-header__title"},t),s&&i.a.createElement("span",{className:"readonly-question-header__title-alert"},s)),i.a.createElement("span",{className:"readonly-question-header__pill"},r)))};const Bt=e=>i.a.createElement("div",{className:"readonly-question-component-react"},i.a.createElement(jt,{...e.questionHeaderProps}),(()=>{const{question:t,...s}=e,n={...s,questionTextClassName:"readonly-question-component-react__question-text"};switch(e.question.questionType){case f.Qb.CalculatedFormula:return i.a.createElement(ht,{...n,question:t});case f.Qb.CalculatedNumeric:return i.a.createElement(yt,{...n,question:t});case f.Qb.Either:return i.a.createElement(Tt,{...n,question:t});case f.Qb.Essay:return i.a.createElement(Et,{...n,question:t});case f.Qb.FIMB:return i.a.createElement(St,{...n,question:t});case f.Qb.Hotspot:return i.a.createElement(Qt,{answersInfo:n.answersInfo,question:t,...n});case f.Qb.PresentationOnly:return i.a.createElement(_t,{...n,question:t});case f.Qb.Matching:return i.a.createElement(Ot,{...n,question:t});case f.Qb.Multiple:return i.a.createElement(Nt,{...n,question:t});default:return null}})()),Lt=new Map;const Mt=Object(Le.makeStyles)((e=>({accessCodeClass:{fontSize:e.typography.fontSizeXXLarge,fontWeight:e.typography.fontWeightLight,letterSpacing:"6px"},highlightClass:{color:e.palette.focus.main},noHighlightClass:{color:e.palette.text.primary,transition:"color 1s"}}))),Ft=({code:e,isNew:t=!1})=>{const{formatNumber:s}=Object(Dt.a)(),{accessCodeClass:i,highlightClass:a,noHighlightClass:o}=Mt(),r=t?a:o;return n.createElement("span",{className:`${i} ${r} js-access-code-display`},s(Number.parseInt(e,10),{useGrouping:!1,minimumIntegerDigits:6}))};var Rt=s("w8C8"),zt=s("XBaz"),Ht=s("/n7R");var $t=e=>{const{tooltip:t,activeTooltip:s,onClick:i,analyticsId:a}=e,[o,r]=(()=>{const[e,t]=n.useState(!1);return[e,n.useCallback((()=>{t(!0),setTimeout((()=>t(!1)),3e3)}),[])]})(),l=n.useCallback((e=>{r(),null==i||i(e)}),[r,i]);return n.createElement(Ht.AnalyticsTooltip,{analyticsId:`${a}.tooltip`,title:o?s:t},n.createElement(Pe.AnalyticsIconButton,{onClick:l,analyticsId:a,"aria-label":t},e.children))};const Gt=Object(Le.makeStyles)((e=>({containerClass:{display:"flex",alignItems:"center",color:"green"},firstButtonClass:{borderRight:`1px solid ${e.palette.secondary.light}`}}))),Vt=({onCodeRefresh:e,onCodeCopy:t})=>{const s=Object(Q.a)(),{containerClass:i,firstButtonClass:a}=Gt();return n.createElement("div",{className:i},n.createElement($t,{className:a,analyticsId:"assessments.settings.accessCode.copy",onClick:t,tooltip:s("assessments.settings.accessCode.copy"),activeTooltip:s("assessments.settings.accessCode.copied")},n.createElement(Rt.a,null)),n.createElement($t,{analyticsId:"assessments.settings.accessCode.refresh",onClick:e,tooltip:s("assessments.settings.accessCode.refresh"),activeTooltip:s("assessments.settings.accessCode.refreshed")},n.createElement(zt.a,null)))},Ut=()=>{return(e=6,window.crypto.getRandomValues(new Uint8Array(e))).map((e=>e%10)).join("");var e},Wt=Object(Le.makeStyles)((e=>({containerClass:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:e.spacing(5)}})));var Kt=s("GIU+");var Xt=({accessCode:e,onAccessCodeChanged:t})=>{const[s,i]=n.useState(e),[a,o]=n.useState(!1),{containerClass:r}=Wt(),l=n.useCallback((()=>{const e=Ut();i(e),t(e),o(!0),setTimeout((()=>o(!1)),1500)}),[t]),c=n.useCallback((()=>{e&&Object(Kt.a)(e)}),[e]);return s||l(),n.createElement("div",{className:r},n.createElement(Ft,{code:null!=s?s:"",isNew:a}),n.createElement(Vt,{onCodeCopy:c,onCodeRefresh:l}))},Yt=s("czSG"),Zt=s("bJi+"),Jt=s("zTL+"),es=s("7NIW"),ts=s("sEjo");const ss=()=>{const e=Object(Q.a)(),t=e("banners.peerAssessments.notEnoughSubmissions.editSettingsButton"),s=e("banners.peerAssessments.notEnoughSubmissions.notice"),i=[n.createElement(ts.a,{analyticsId:"course.grades.gradebook-item.peerReview.notEnoughSubmissionsBanner.editSettingsButton",key:"edit",onClick:()=>{We.bb.goPeekState(Object(We.Q)({focusEleId:"enable-peer-grading"}))}},t)],a=n.createElement(es.a,null);return n.createElement(Jt.a,{severity:"error",actions:i,icon:a},n.createElement("span",{className:"js-banner-contents"},s))};var ns=s("ECG1");const is=({peerReviewDueDate:e})=>{const t=Object(Q.a)()("banners.peerAssessments.peerReviewPeriodOpen.notice",{peerReviewDueDate:e}),s=n.createElement(ns.a,null);return n.createElement(Jt.a,{severity:"info",icon:s},n.createElement("span",{className:"js-banner-contents"},t))},as=Object(Le.makeStyles)((e=>Object(Le.createStyles)({bannerClass:{display:"flex",flexWrap:"wrap",marginInlineStart:"-12px",marginInlineEnd:"-12px",[e.breakpoints.up("sm")]:{marginInlineStart:"-30px",marginInlineEnd:"-30px"}},iconWrapperClass:{alignSelf:"flex-start"},iconClass:{color:e.palette.primary.main},actionClass:{flexBasis:"100%",justifyContent:"flex-end"},buttonClass:{flexBasis:"initial"}}))),os=({assignAndNavigateToPeerReview:e,dismissBanner:t,hasEnoughSubmissionsForPeerAssessment:s,canRetrieveNewPeerReview:i})=>{const a=Object(Q.a)(),o=a("banners.peerAssessments.peerReviewHasBeenDeleted.startNewReviewButton"),r=a("banners.peerAssessments.peerReviewHasBeenDeleted.dismissButton"),l=a("banners.peerAssessments.peerReviewHasBeenDeleted.notice"),c=a("banners.peerAssessments.peerReviewHasBeenDeleted.notEnoughSubmissionsNotice"),u=s?l:c,{bannerClass:d,iconWrapperClass:m,iconClass:p,actionClass:h,buttonClass:g}=as(),b=[n.createElement(ts.a,{analyticsId:"course.assessments.assessment-overview.peerReview.peerReviewDeletedBanner.dismissButton",key:"dismiss",onClick:t,className:g},r)];return i&&b.push(n.createElement(ts.a,{analyticsId:"course.assessments.assessment-overview.peerReview.peerReviewDeletedBanner.startNewReviewButton",key:"startNewReviewButton",onClick:e,className:g},o)),n.createElement(Jt.a,{severity:"warning",actions:b,icon:n.createElement(Ke.a,{className:p}),classes:{root:d,icon:m,action:h}},n.createElement("span",{className:"js-banner-contents"},u))},rs=()=>{const e=Object(Q.a)(),[t,s]=n.useState(!0),{bannerClass:i,iconWrapperClass:a,iconClass:o}=as();if(!t)return null;const r=e("banners.autoSubmissionAssessments.timeLimitOverriddenByDueDate.notice"),l=e("banners.autoSubmissionAssessments.timeLimitOverriddenByDueDate.dismissButton");return n.createElement(Jt.a,{severity:"warning",icon:n.createElement(Ke.a,{className:o}),classes:{root:i,icon:a,action:a},onClose:()=>s(!1),closeText:l},n.createElement("span",{className:"js-banner-contents"},r))};var ls=s("ALQB");const cs=Object(Le.makeStyles)((()=>Object(Le.createStyles)({progressBarClass:{height:10}}))),us=({descriptionId:e,answerableQuestionCount:t,unansweredQuestionCount:s})=>{const i=Object(Q.a)(),{progressBarClass:a}=cs(),o=i("assessmentProgress.progressBar.ariaLabel"),r=0===t?0:(t-s)/t*100;return n.createElement(ls.a,{"aria-hidden":!0,ariaLabel:o,"aria-describedby":e,variant:"determinate",value:r,classes:{root:a}})},ds=Object(Le.makeStyles)((()=>Object(Le.createStyles)({textClass:{textTransform:"uppercase"}}))),ms=({descriptionId:e,answerableQuestionCount:t,unansweredQuestionCount:s})=>{const i=Object(Q.a)(),{textClass:a}=ds(),[o,r]=n.useState("");return n.useEffect((()=>{const e=i("assessmentProgress.questionCounts.unansweredText",{unanswered:s}),a=i("assessmentProgress.questionCounts.fullText",{total:t,unanswered:n.createElement("strong",{key:"unanswered"},e)});r(a)}),[t,s,i]),n.createElement("span",{id:e,className:a,role:"status","aria-live":"polite"},o)},ps=Object(Le.makeStyles)((e=>Object(Le.createStyles)({containerClass:{paddingBottom:"15px",marginBottom:"15px",borderBottom:`solid 1px ${e.palette.border.main}`}}))),hs=({currentPage:e,totalPages:t})=>{const s=Object(Q.a)(),{containerClass:i}=ps(),a=s("assessmentProgress.pageCounts.currentText",{current:e}),o=s("assessmentProgress.pageCounts.fullText",{total:t,current:n.createElement("strong",{key:"current"},a)});return n.createElement("div",{className:i},o)};var gs=s("93oC");const bs=e=>{switch(null==e?void 0:e.questionType){case f.Qb.PresentationOnly:return!1;case f.Qb.FIMB:return(e=>{const{givenAnswers:t}=e;return!t||"object"!=typeof t||!Object.values(t||{}).every((e=>null!=e&&e.trim().length>0))})(e);case f.Qb.Matching:return(e=>{const{givenAnswers:t,question:s}=e;return!t||!s||t.filter((e=>null!==e)).length<s.prompts.length})(e);case f.Qb.Hotspot:return(e=>{const{givenAnswers:t}=e;return!t||0===t.length})(e);default:return(null==e?void 0:e.attemptStatus)===f.l.NotAttempted}},ys=[f.Qb.Essay],fs=Object.values(f.Qb);var vs,Cs,Es;!function(e){e.ExtraCredit="extraCredit"}(vs||(vs={})),function(e){e[e.Answered=0]="Answered",e[e.Unanswered=1]="Unanswered",e[e.All=2]="All"}(Cs||(Cs={})),function(e){e.First="first",e.Previous="previous",e.Next="next",e.Last="last"}(Es||(Es={}));class Ps{constructor(e,t,s,n,i,a=(()=>{})){this.questionAttempts=[],this.questionAttemptPages=[],this.questionAttemptLookup={},this.currentPageIndex=0,this.firstQuestionOnCurrentPageIndex=0,this.firstPageIndex=null,this.previousPageIndex=null,this.nextPageIndex=null,this.lastPageIndex=null,this.numberOfManualPageBreaks=0,this.questionStatusesById={},this.queuedFiltering=!1,this.queuedNavigation=null,this.questionTypes=[],this.firstOfQuestionTypeIndex={},this.questionAttributes=[],this.currentVisibleQuestionAttemptsPage=[],this.canNavigateBackward=!1,this.canNavigateForward=!1,this.answerableQuestionCount=0,this.unansweredQuestionCount=0,this.questionsMatchingFilterCount=0,this.totalPageCount=0,this.currentPageCount=0,this.filter={status:Cs.All},this.onNavigationOrFilterChanged=()=>{},this.onAutoSaveStatusChanged=(e,t,s)=>{if(!e)return;const n=this.questionStatusesById[e];n?(t>n.saveNumber&&(n.saveNumber=t),t===n.saveNumber&&(n.current=s)):this.questionStatusesById[e]={saveNumber:t,current:s},this.hasSuccessfullyFinishedAllPendingSaves(this.questionStatusesById[e])&&this.processQueuedNavigationAndFiltering()},this.onAnswerPersisted=e=>{const t=this.questionAttemptLookup[e.id];t&&("unansweredAnswerableQuestions"in e&&(t.unansweredAnswerableQuestions=e.unansweredAnswerableQuestions),"attemptStatus"in e&&(t.attemptStatus=e.attemptStatus),"givenAnswer"in e&&(t.givenAnswer=e.givenAnswer),"givenAnswers"in e&&(t.givenAnswers=e.givenAnswers)),this.calculateUnansweredQuestionCount()},this.attemptId=e,this.courseId=t,this.dispatch=s,this.showSkipQuestionDialog=n,this.onAfterAsyncViewAction=i,this.onNextQuestionFetchFailure=a}initializeQuestionTypes(){const e=Object.keys(this.firstOfQuestionTypeIndex);this.questionTypes=fs.filter((t=>ys.includes(t)&&e.includes(t)))}initializeQuestionAttributes(){this.questionAttempts.filter((e=>{var t,s;return(null===(t=null==e?void 0:e.question)||void 0===t?void 0:t.extraCredit)&&!(null===(s=null==e?void 0:e.question)||void 0===s?void 0:s.externallyReferencedQuestion)})).length>0&&(this.questionAttributes=[vs.ExtraCredit])}isAnswerable(e){return e.questionType!==f.Qb.PresentationOnly&&e.questionType!==f.Qb.PageBreak}augmentCurrentQuestionAttempt(e,t,s){const n=e;return n.onAnswerPersisted=this.onAnswerPersisted,n.questionIndex=t,n.pageIndex=s,n.isVisibleGivenFilter=!0,this.questionAttemptLookup[n.id]=n,n}calculateUnansweredQuestionCount(){this.unansweredQuestionCount=this.questionAttempts.filter(bs).length}setCurrentVisibleQuestionAttemptsPage(e=!1){var t;this.currentVisibleQuestionAttemptsPage=[];const s=null!==(t=this.questionAttemptPages[this.currentPageIndex])&&void 0!==t?t:[];this.currentVisibleQuestionAttemptsPage=s.filter((e=>e.isVisibleGivenFilter)),e&&null!==this.firstPageIndex?this.navigateFirst():0===this.currentVisibleQuestionAttemptsPage.length&&(null!==this.firstPageIndex?this.navigateFirst():null!==this.nextPageIndex&&this.navigateNext())}currentPageHasUnsavedAnswers(){return Object.keys(this.questionStatusesById).some((e=>{const t=this.questionStatusesById[e];return t&&!this.hasSuccessfullyFinishedAllPendingSaves(t)}))}hasManualPageBreaks(){return this.numberOfManualPageBreaks>0}onFilterChanged(e,t=!1){this.filter=e,this.currentPageHasUnsavedAnswers()?this.queuedFiltering=!0:(this.firstPageIndex=null,this.previousPageIndex=null,this.nextPageIndex=null,this.lastPageIndex=null,this.questionsMatchingFilterCount=0,this.calculateNavigationState(),this.processQuestionAttemptsBackwards(e),this.processQuestionAttemptsForwards(e),this.setCurrentVisibleQuestionAttemptsPage(t),this.questionStatusesById={},this.calculateNavigationState(),this.onNavigationOrFilterChanged())}processQuestionAttemptsBackwards(e){if(this.currentPageIndex>0)for(let t=this.firstQuestionOnCurrentPageIndex-1;t>=0;t--){const s=this.isQuestionAttemptVisible(t,e);s&&null===this.previousPageIndex&&(this.previousPageIndex=this.questionAttempts[t].pageIndex),s&&(this.firstPageIndex=this.questionAttempts[t].pageIndex)}}processQuestionAttemptsForwards(e){for(let t=this.firstQuestionOnCurrentPageIndex;t<this.questionAttempts.length;t++){const s=this.isQuestionAttemptVisible(t,e),n=this.questionAttempts[t].pageIndex;s&&n>this.currentPageIndex&&null===this.nextPageIndex&&(this.nextPageIndex=this.questionAttempts[t].pageIndex),s&&n>this.currentPageIndex&&(this.lastPageIndex=this.questionAttempts[t].pageIndex)}}isQuestionAttemptVisible(e,t){if(t){const s=this.evaluateQuestionAgainstFilter(this.questionAttempts[e],t);return this.questionsMatchingFilterCount+=s&&this.isAnswerable(this.questionAttempts[e])?1:0,s}return this.questionAttempts[e].isVisibleGivenFilter}evaluateQuestionAgainstFilter(e,t){var s,n;let i=!0;return"status"in t&&(i=t.status===Cs.Answered&&e.attemptStatus!==f.l.NotAttempted&&this.isAnswerable(e)||t.status===Cs.Unanswered&&e.attemptStatus===f.l.NotAttempted&&this.isAnswerable(e)||t.status===Cs.All),i&&t.types&&!t.attributes?i=t.types.some((t=>t===e.questionType)):i&&!t.types&&t.attributes?i=this.filterAttributesSupportExtraCredit(t,e):i&&t.types&&t.attributes&&(i=null!==(n=(null===(s=t.types)||void 0===s?void 0:s.some((t=>t===e.questionType)))&&this.filterAttributesSupportExtraCredit(t,e))&&void 0!==n&&n),e.isVisibleGivenFilter=i,i}filterAttributesSupportExtraCredit(e,t){var s,n;return null!==(n=null===(s=e.attributes)||void 0===s?void 0:s.some((e=>{var s,n;return e===vs.ExtraCredit&&(null===(s=null==t?void 0:t.question)||void 0===s?void 0:s.extraCredit)&&!(null===(n=null==t?void 0:t.question)||void 0===n?void 0:n.externallyReferencedQuestion)})))&&void 0!==n&&n}calculateNewPageIndexesAfterNavigating(){this.firstPageIndex=null,this.previousPageIndex=null,this.nextPageIndex=null,this.lastPageIndex=null,this.calculateNavigationState(),this.processQuestionAttemptsBackwards(),this.processQuestionAttemptsForwards(),this.calculateNavigationState()}processQueuedNavigationAndFiltering(){this.currentPageHasUnsavedAnswers()||(null!=this.queuedNavigation&&this.onAfterAsyncViewAction((()=>{const e=this.queuedNavigation;switch(this.queuedNavigation=null,e){case Es.First:this.navigateFirst();break;case Es.Previous:this.navigatePrevious();break;case Es.Next:this.navigateNext();break;case Es.Last:this.navigateLast()}})),this.queuedFiltering&&this.onAfterAsyncViewAction((()=>{this.queuedFiltering=!1,this.onFilterChanged(this.filter)})))}isPageable(){return!1}hasFilterApplied(){return"status"in this.filter&&this.filter.status!==Cs.All||"types"in this.filter||"attributes"in this.filter}hasUnansweredFilterApplied(){return"status"in this.filter&&this.filter.status===Cs.Unanswered&&!("types"in this.filter)}isFilterable(){return this.answerableQuestionCount>0}isWaitingForQueuedNavigationOrFiltering(){return this.queuedFiltering||!!this.queuedNavigation}isWaitingForAnswersToPersist(){for(const[,e]of Object.entries(this.questionStatusesById))if(!this.hasSuccessfullyFinishedAllPendingSaves(e)&&!this.hasUnsuccessfullyFinishedAllPendingSaves(e))return!0;return!1}isFreeformSaveFailed(){const e=this.questionStatusesById.freeform;return!!e&&!this.hasSuccessfullyFinishedAllPendingSaves(e)}hasSuccessfullyFinishedAllPendingSaves(e){return e.current===y.d.Saved}hasUnsuccessfullyFinishedAllPendingSaves(e){return e.current===y.d.SaveFailure}setNavigationOrFilteringChangedCallback(e){this.onNavigationOrFilterChanged=e}isFirstQuestionAttemptOfType(e,t){return this.firstOfQuestionTypeIndex[e]===t}}const ws=Object(Le.makeStyles)((e=>Object(Le.createStyles)({rowClass:{display:"flex",flexDirection:"row",gap:"5px",alignItems:"center"},chipContainerClass:{listStyle:"none",margin:0,display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"5px"},paperClass:{width:"100%",[e.breakpoints.up("sm")]:{width:"300px"}}}))),Is=Object(Le.makeStyles)((e=>Object(Le.createStyles)({container:{background:e.palette.common.white,borderBottom:`1px solid ${e.palette.border.main}`},row:{borderBottom:`1px solid ${e.palette.border.main}`,padding:"12px",maxHeight:"170px",overflowY:"auto"},fieldset:{border:"none",margin:"0px",padding:"0px"},legend:{marginBottom:"6px"},resetButton:{height:"48px",width:"100%",fontWeight:e.typography.fontWeightSemiBold,textAlign:"left",padding:"12px"},formGroup:{marginLeft:"4px"},formLabel:{marginRight:0,display:"block"}}))),Ss=({questionTypes:e,onFilterChanged:t,filter:s,analyticsId:i,questionAttributes:a})=>{const o=Is(),r=Object(Q.a)(),l=r("filterDropdown.navigate"),u=r("filterDropdown.allQuestions"),d=r("filterDropdown.unansweredQuestions"),m=r("filterDropdown.filterQuestionTypes"),p=r("filterDropdown.resetAll"),h=n.useCallback((e=>{if(e===f.Qb.Essay)return r("filterDropdown.questionTypes.essay")}),[r]),g=Object.values(e).map((e=>({questionType:e,label:h(e)}))),b=e=>{if(e===vs.ExtraCredit)return r("filterDropdown.questionAttributes.extraCredit")},y=Object.values(a).map((e=>({questionAttribute:e,label:b(e)}))),v=n.useCallback((e=>{t({...s,status:parseInt(e.target.value,10)})}),[t,s]),C=n.useCallback(((e,n)=>{var i;const a=null!==(i=s.types)&&void 0!==i?i:[],o=n?[...a,e.target.value]:a.filter((t=>t!==e.target.value)),r={status:s.status};o.length>0&&(r.types=o),s.attributes&&(r.attributes=s.attributes),t(r)}),[t,s]),E=n.useCallback(((e,n)=>{var i;const a=null!==(i=s.attributes)&&void 0!==i?i:[],o=n?[...a,e.target.value]:a.filter((t=>t!==e.target.value)),r={status:s.status};o.length>0&&(r.attributes=o),s.types&&(r.types=s.types),t(r)}),[t,s]),P=n.useCallback((e=>{var t,n;return null!==(n=null===(t=s.types)||void 0===t?void 0:t.some((t=>t===e)))&&void 0!==n&&n}),[s]),w=n.useCallback((e=>{var t,n;return null!==(n=null===(t=s.attributes)||void 0===t?void 0:t.some((t=>t===e)))&&void 0!==n&&n}),[s]);return n.createElement("div",{className:Object(ft.a)(o.container,"js-assessment-filter-popover-container")},n.createElement("div",{className:o.row},n.createElement("fieldset",{className:o.fieldset},n.createElement("legend",{className:o.legend},l),n.createElement(c.AnalyticsRadioGroup,{analyticsId:`${i}.answer-status.radio-group`,defaultValue:Cs.All,name:"assessment-filter-popover-radio-buttons-group",hasCustomLegend:!0,className:o.formGroup,value:s.status,onChange:v},n.createElement(c.AnalyticsFormControlLabel,{className:Object(ft.a)(o.formLabel,"js-assessment-filter-all-questions"),analyticsId:`${i}.attempt-status.all.radio.form-control-label`,value:Cs.All,control:n.createElement(c.AnalyticsRadio,{analyticsId:`${i}.attempt-status.all.radio`}),label:u}),n.createElement(c.AnalyticsFormControlLabel,{className:Object(ft.a)(o.formLabel,"js-assessment-filter-unanswered-questions"),analyticsId:`${i}.attempt-status.unanswered.radio.form-control-label`,value:Cs.Unanswered,control:n.createElement(c.AnalyticsRadio,{analyticsId:`${i}.attempt-status.unanswered.radio`}),label:d})))),(e.length>0||a.length>0)&&n.createElement("div",{className:o.row},n.createElement("fieldset",{className:o.fieldset},n.createElement("legend",{className:o.legend},m),n.createElement("div",{className:o.formGroup},g.map((e=>{const{label:t,questionType:s}=e,a=`${s}-filter-control`,r=n.createElement(c.AnalyticsSwitch,{analyticsId:`${i}.${s}.switch`,id:a,checked:P(s),onChange:e=>C(e,!P(s)),name:s});return n.createElement(c.AnalyticsFormControlLabel,{key:s,analyticsId:`${i}.${s}.checkbox.form-control-label`,value:s,control:r,htmlFor:a,label:t,labelPlacement:"end",className:Object(ft.a)(o.formLabel,"js-assessment-filter-essay-checkbox")})})),y.map((e=>{const{label:t,questionAttribute:s}=e;if(!t)return null;const a=`${s}-filter-control`,r=n.createElement(c.AnalyticsSwitch,{analyticsId:`${i}.${s}.switch`,id:a,checked:w(s),onChange:e=>E(e,!w(s)),name:s});return n.createElement(c.AnalyticsFormControlLabel,{key:s,analyticsId:`${i}.${s}.checkbox.form-control-label`,value:s,control:r,htmlFor:a,label:t,labelPlacement:"end",className:Object(ft.a)(o.formLabel,`js-assessment-filter-${s}-checkbox`)})}))))),n.createElement(c.AnalyticsLink,{component:"button",analyticsId:`${i}.reset-all-button`,className:Object(ft.a)(o.resetButton,"js-assessment-filter-reset-all-button"),onClick:()=>t({status:Cs.All})},p))},ks="assessments.filter-criteria.remove",qs=({filter:e,onFilterAvailable:t,onFilterChanged:s,questionTypes:i,questionAttributes:a})=>{var o,r,l,u;const d=n.useRef(null),[m,p]=n.useState(!1),h=Object(Q.a)(),{isRtl:g}=Object(Dt.a)(),b=h("filterDropdown.ariaLabel"),y=e.status===Cs.Unanswered,v=null!==(r=null===(o=e.types)||void 0===o?void 0:o.some((e=>e===f.Qb.Essay)))&&void 0!==r&&r,C=null!==(u=null===(l=e.attributes)||void 0===l?void 0:l.some((e=>e===vs.ExtraCredit)))&&void 0!==u&&u,E=n.useCallback((t=>{var n,i;const a={status:t===Cs.Unanswered?Cs.All:e.status},o=null!==(n=e.types)&&void 0!==n?n:[],r=t===f.Qb.Essay?o.filter((e=>e!==t)):o;r.length>0&&(a.types=r);const l=null!==(i=e.attributes)&&void 0!==i?i:[],c=t===vs.ExtraCredit?l.filter((e=>e!==t)):l;c.length>0&&(a.attributes=c),s(a)}),[e,s]),{chipContainerClass:P,paperClass:w,rowClass:I}=ws(),S=()=>{!1!==(null==t?void 0:t())&&p(!m)};return y||v||C?n.createElement("div",{className:I},n.createElement("div",null,n.createElement(c.AnalyticsIconButton,{name:"assessment-header-question-filter-button",analyticsId:"assessments.filter-criteria.button","aria-label":b,ref:d,onClick:S,id:"assessment-header-question-filter-button","aria-controls":"assessment-header-question-filter-region","aria-expanded":m},n.createElement(gs.a,null)),n.createElement(c.AnalyticsPopover,{analyticsId:"assessments.filter-criteria.popover",anchorEl:d.current,open:m,onClose:S,anchorOrigin:{vertical:"bottom",horizontal:g()?"right":"left"},transformOrigin:{vertical:"top",horizontal:g()?"right":"left"},PaperProps:{className:w},role:"region",id:"assessment-header-question-filter-region","aria-labelledby":"assessment-header-question-filter-button",tabIndex:-1},n.createElement(Ss,{analyticsId:"assessments.filter-criteria.popover",questionTypes:i,filter:e,onFilterChanged:s,questionAttributes:a}))),n.createElement("ul",{className:P},y&&n.createElement("li",null,n.createElement(c.AnalyticsChip,{analyticsId:`${ks}.unanswered`,label:h("filterDropdown.unansweredQuestions"),onDelete:()=>E(Cs.Unanswered),deleteLabel:h("filterDropdown.filterChips.removeUnansweredCriteria")})),v&&n.createElement("li",null,n.createElement(c.AnalyticsChip,{analyticsId:`${ks}.essay`,label:h("filterDropdown.questionTypes.essay"),onDelete:()=>E(f.Qb.Essay),deleteLabel:h("filterDropdown.filterChips.removeEssayCriteria")})),C&&n.createElement("li",null,n.createElement(c.AnalyticsChip,{analyticsId:`${ks}.extraCredit`,label:h("filterDropdown.questionAttributes.extraCredit"),onDelete:()=>E(vs.ExtraCredit),deleteLabel:h("filterDropdown.filterChips.removeExtraCreditCriteria")})))):null},Qs=Object(Le.makeStyles)((e=>Object(Le.createStyles)({backwardSectionRoot:{[e.breakpoints.up("md")]:{marginRight:"15px"}},forwardSectionRoot:{[e.breakpoints.up("md")]:{marginLeft:"15px"}},backwardSectionLabel:{flexDirection:"column",[e.breakpoints.up("md")]:{flexDirection:"row"}},forwardSectionLabel:{flexDirection:"column",[e.breakpoints.up("md")]:{flexDirection:"row-reverse"}},button:{[e.breakpoints.down("md")]:{"& > span":{paddingTop:"4px"}},[e.breakpoints.up("md")]:{width:"auto",maxWidth:"200px"}},buttonLabel:{fontSize:"10px",[e.breakpoints.up("md")]:{fontSize:"14px",marginLeft:"14px",marginRight:"14px"}}}))),As=({id:e,label:t,ariaLabel:s,icon:i,navigate:a,onClick:o,disabled:r})=>{const l=Qs(),u=a===Fs.Forward?l.forwardSectionRoot:l.backwardSectionRoot,d=a===Fs.Forward?l.forwardSectionLabel:l.backwardSectionLabel;return n.createElement(c.AnalyticsIconButton,{name:e,"aria-label":s,analyticsId:`assessments.navigation-button.${e}-nav-button`,onClick:()=>o(e),disabled:r,classes:{root:Object(ft.a)(l.button,u,`js-assessment-navigation-${e}-button`),label:d}},i,n.createElement(c.AnalyticsTypography,{component:"span",className:l.buttonLabel},t))};var xs=s("U7v+"),Os=s("SFuT"),Ns=s("eqO1");const Ts=Object(Le.makeStyles)((e=>Object(Le.createStyles)({filterButton:{background:e.palette.common.white,border:`1px solid ${e.palette.grey[700]}`,boxSizing:"border-box",borderRadius:"2px",padding:"8px 12px",justifyContent:"space-between"},filterButtonText:{width:"max-content"},filterButtonIcon:{[e.breakpoints.up("md")]:{display:"flex",justifyContent:"flex-end"}},paperClass:{width:"100%",[e.breakpoints.up("sm")]:{width:"300px"}}}))),_s=({questionsMatchingFilterCount:e,questionTypes:t,filter:s,onFilterAvailable:i,onFilterChanged:a,renderFullWidth:o,questionAttributes:r})=>{const l=n.useRef(null),[u,d]=n.useState(!1),m=Object(Q.a)(),{isRtl:p}=Object(Dt.a)(),h=Ts(),g=Object(Ns.t)(),b=Object(Ns.s)(g.breakpoints.up("md")),y=()=>{!1!==(null==i?void 0:i())&&d(!u)},f=m("filterDropdown.ariaLabel"),v=n.useMemo((()=>{var t,n,i,a,o,r;const l="filterDropdown.filterStatus";if(0===e)return m(l+".noQuestionsListed");if(s.status===Cs.All&&0===(null!==(t=s.types)&&void 0!==t?t:[]).length&&0===(null!==(n=s.attributes)&&void 0!==n?n:[]).length)return m(l+".allQuestionsListed");let c="";const u=`${m("filterDropdown.questionLabels.separator")} `,d=null!==(a=null===(i=s.types)||void 0===i?void 0:i.map((e=>m("filterDropdown.questionLabels.types."+e))).join(u))&&void 0!==a?a:"",p=null!==(r=null===(o=s.attributes)||void 0===o?void 0:o.map((e=>m("filterDropdown.questionLabels.attributes."+e))).join(u))&&void 0!==r?r:"";let h="";switch(d&&!p?h=d:!d&&p?h=p:d&&p&&(h=[d,p].join(u)),s.status){case Cs.All:c=".allWithCriteriaAndCount";break;case Cs.Unanswered:c=h?".unansweredWithCriteriaAndCount":".unansweredWithCount";break;case Cs.Answered:c=h?".answeredWithCriteriaAndCount":".answeredWithCount"}return m(l+c,{count:e,filterCriteria:h})}),[m,e,s]);return n.createElement(n.Fragment,null,n.createElement(c.AnalyticsIconButton,{name:"assessment-footer-question-filter-button","aria-label":f,className:Object(ft.a)(h.filterButton,"js-assessment-filter-dropdown-button"),analyticsId:"assessments.filter-dropdown.button",ref:l,onClick:y,id:"assessment-footer-question-filter-button","aria-controls":"assessment-footer-question-filter-region","aria-expanded":u},(()=>{if(b||o)return n.createElement(n.Fragment,null,n.createElement("span",{className:h.filterButtonText},m("filterDropdown.filter",{count:e})),n.createElement(xs.a,{className:h.filterButtonIcon}));const t=e>99?`(${m("filterDropdown.moreThan99")})`:`(${e})`;return n.createElement(n.Fragment,null,n.createElement(Os.a,{className:h.filterButtonIcon}),n.createElement("span",{className:h.filterButtonText},t))})()),n.createElement("span",{className:"sr-only","aria-live":"polite",role:"status"},v),n.createElement(c.AnalyticsPopover,{analyticsId:"assessments.filter-dropdown.popover",anchorEl:l.current,open:u,onClose:y,anchorOrigin:{vertical:"top",horizontal:p()?"right":"left"},transformOrigin:{vertical:"bottom",horizontal:p()?"right":"left"},PaperProps:{className:h.paperClass},role:"region",id:"assessment-footer-question-filter-region","aria-labelledby":"assessment-footer-question-filter-button",tabIndex:-1},n.createElement(Ss,{analyticsId:"assessments.filter-dropdown.popover",questionTypes:t,filter:s,onFilterChanged:a,questionAttributes:r})))};var Ds=s("ks7T"),js=s("TFdY"),Bs=s("5HEc"),Ls=s("UUbQ");const Ms=Object(Le.makeStyles)((e=>Object(Le.createStyles)({attentionIcon:{verticalAlign:"middle"},controlsContainer:{display:"flex"},filterControlsContainer:{display:"flex",marginRight:"15px"},navigationControlsContainer:{display:"flex",width:"100%",justifyContent:"space-around",[e.breakpoints.up("md")]:{justifyContent:"center"}},messageSection:{[e.breakpoints.up("md")]:{paddingTop:"10px"}},noBacktrackingMessage:{paddingLeft:"10px"},rightSection:{justifyContent:"flex-end"}})));var Fs;!function(e){e[e.Backward=0]="Backward",e[e.Forward=1]="Forward"}(Fs||(Fs={}));const Rs=({showNavigation:e,showFilter:t,filter:s,isBacktrackingProhibited:n,canNavigateForward:a,canNavigateBackward:o,onFilterAvailable:r,questionsMatchingFilterCount:l,questionTypes:c,onFilterChanged:u,onNavigationChanged:d,questionAttributes:m})=>{const p=Object(Q.a)(),h=Ms(),g=p("assessmentControls.first"),b=p("assessmentControls.previous"),y=p("assessmentControls.next"),f=p("assessmentControls.last"),v=p("assessmentControls.firstQuestion"),C=p("assessmentControls.previousQuestion"),E=p("assessmentControls.nextQuestion"),P=p("assessmentControls.lastQuestion"),w=p("assessmentControls.noBacktracking"),I=i.a.useCallback((e=>{d(e)}),[d]),S={navigate:Fs.Backward,onClick:I,disabled:!o},k={navigate:Fs.Forward,onClick:I,disabled:!a},q=[{id:Es.First,label:g,ariaLabel:v,icon:i.a.createElement(js.a,{"aria-hidden":!0}),...S},{id:Es.Previous,label:b,ariaLabel:C,icon:i.a.createElement(Ds.a,{"aria-hidden":!0}),...S},{id:Es.Next,label:y,ariaLabel:E,icon:i.a.createElement(Bs.a,{"aria-hidden":!0}),...k},{id:Es.Last,label:f,ariaLabel:P,icon:i.a.createElement(Ls.a,{"aria-hidden":!0}),...k}];return i.a.createElement("div",{className:h.controlsContainer},n?i.a.createElement("div",{className:h.messageSection},i.a.createElement(es.a,{className:h.attentionIcon,"aria-hidden":!0,"data-testid":"attempt-footer-prevent-backtracking-icon"}),i.a.createElement("span",{className:h.noBacktrackingMessage,"data-testid":"attempt-footer-prevent-backtracking-message"},w)):i.a.createElement(i.a.Fragment,null,t&&i.a.createElement("span",{className:h.filterControlsContainer},i.a.createElement(_s,{questionsMatchingFilterCount:l,questionTypes:c,filter:s,onFilterAvailable:r,onFilterChanged:u,renderFullWidth:!e,questionAttributes:m})),e&&i.a.createElement("span",{className:h.navigationControlsContainer},q.map((e=>i.a.createElement(As,{key:e.id,id:e.id,label:e.label,ariaLabel:e.ariaLabel,icon:e.icon,navigate:e.navigate,onClick:e.onClick,disabled:e.disabled}))))))},zs=Object(Le.makeStyles)((()=>Object(Le.createStyles)({buttonClass:{minHeight:"inherit",minWidth:"inherit"}}))),Hs=({assessmentTimerTextId:e,onToggle:t,isVisible:s})=>{const{buttonClass:i}=zs(),a=Object(Q.a)(),o=n.useMemo((()=>a(s?"assessmentProgress.timer.hideTimer":"assessmentProgress.timer.showTimer")),[a,s]),r=n.useCallback((()=>{t(!s)}),[t,s]);return n.createElement(z.AnalyticsContext,{action:s?"hide":"show"},n.createElement(c.AnalyticsIconButton,{analyticsId:"assessment.timer.visibility.toggle","aria-controls":e,"aria-label":o,onClick:r,className:i,title:o,"aria-expanded":s},s?n.createElement(v.Invisible,null):n.createElement(v.Visible,null)))};class $s extends Ps{initializeQuestionAttempts(e){this.answerableQuestionCount=0,this.questionAttempts=e.reduce(((e,t,s)=>{if(!t.id||!t.questionType)return e;this.firstOfQuestionTypeIndex[t.questionType]||(this.firstOfQuestionTypeIndex[t.questionType]=t.id),this.answerableQuestionCount+=this.isAnswerable(t)?1:0;const n=this.augmentCurrentQuestionAttempt(t,s,0);return e.push(n),e}),[]),this.initializeQuestionTypes(),this.initializeQuestionAttributes(),this.questionAttemptPages=[this.questionAttempts],this.questionsMatchingFilterCount=this.answerableQuestionCount,this.calculateUnansweredQuestionCount(),this.setCurrentVisibleQuestionAttemptsPage(),this.calculateNavigationState()}calculateNavigationState(){this.canNavigateBackward=!1,this.canNavigateForward=!1}navigateFirst(){throw new Error("Navigation is not supported when all questions at once.")}navigatePrevious(){throw new Error("Navigation is not supported when all questions at once.")}navigateNext(){throw new Error("Navigation is not supported when all questions at once.")}navigateLast(){throw new Error("Navigation is not supported when all questions at once.")}isLastPage(){return!0}}class Gs extends Ps{initializeQuestionAttempts(e){this.numberOfManualPageBreaks=e.filter(d.N.isPageBreak).length;const t=this.numberOfManualPageBreaks>0,s=e.length-this.numberOfManualPageBreaks;this.answerableQuestionCount=0;let n=[],i=0;this.questionAttempts=e.reduce(((s,a,o)=>{if(!a.id||!a.questionType)return s;this.firstOfQuestionTypeIndex[a.questionType]||(this.firstOfQuestionTypeIndex[a.questionType]=a.id);const r=a.questionType===f.Qb.PageBreak,l=o===e.length-1;if(this.answerableQuestionCount+=this.isAnswerable(a)?1:0,!r){const e=this.augmentCurrentQuestionAttempt(a,i,this.questionAttemptPages.length);i+=1,n.push(e),s.push(e)}return(!t||r||l)&&(n.length>0&&this.questionAttemptPages.push(n),n=[]),s}),[]),this.currentPageCount=1,this.totalPageCount=this.questionAttemptPages.length>0?this.questionAttemptPages.length:1,this.initializeQuestionTypes(),this.initializeQuestionAttributes();const a=s>1;this.nextPageIndex=a?1:null,this.lastPageIndex=a?this.questionAttemptPages.length-1:null,this.questionsMatchingFilterCount=this.answerableQuestionCount,this.calculateUnansweredQuestionCount(),this.setCurrentVisibleQuestionAttemptsPage(),this.calculateNavigationState()}calculateNavigationState(){1!==this.questionAttemptPages.length&&(this.canNavigateBackward=null!=this.firstPageIndex||null!=this.previousPageIndex,this.canNavigateForward=null!=this.nextPageIndex||null!=this.lastPageIndex)}navigateFirst(){null!==this.firstPageIndex&&(this.currentPageHasUnsavedAnswers()?this.queuedNavigation=Es.First:(this.currentPageIndex=this.firstPageIndex,this.navigate()))}navigatePrevious(){null!==this.previousPageIndex&&(this.currentPageHasUnsavedAnswers()?this.queuedNavigation=Es.Previous:(this.currentPageIndex=this.previousPageIndex,this.navigate()))}navigateNext(){null!==this.nextPageIndex&&(this.currentPageHasUnsavedAnswers()?this.queuedNavigation=Es.Next:(this.currentPageIndex=this.nextPageIndex,this.navigate()))}navigateLast(){null!==this.lastPageIndex&&(this.currentPageHasUnsavedAnswers()?this.queuedNavigation=Es.Last:(this.currentPageIndex=this.lastPageIndex,this.navigate()))}isPageable(){return!0}isLastPage(){return null===this.lastPageIndex}navigate(){this.firstQuestionOnCurrentPageIndex=this.questionAttemptPages[this.currentPageIndex][0].questionIndex,this.currentPageCount=this.currentPageIndex+1,this.setCurrentVisibleQuestionAttemptsPage(),this.questionStatusesById={},this.calculateNewPageIndexesAfterNavigating(),this.onNavigationOrFilterChanged()}}const Vs=e=>{const{showConfirmationModal:t,onCancel:s,onConfirmation:i,questionNumber:a}=e,o=Object(Q.a)(),r=`${e.analyticsId}.skip-question.dialog`,l="skip-question.dialog-title",u=o("assessments.attempt.modal.skipQuestion.questionTitle",{number:a});return n.createElement(U.a,{className:"js-skip-question-confirmation-dialog",analyticsId:r,open:t,onClose:s,maxWidth:"md","aria-labelledby":l},n.createElement(c.AnalyticsDialogTitle,{analyticsId:`${r}.title`,id:l,onClick:s},o("assessments.attempt.modal.skipQuestion.title")),n.createElement(c.AnalyticsDialogContent,{analyticsId:`${r}.content`},n.createElement(c.AnalyticsDialogContentText,{analyticsId:`${r}.body`},o("assessments.attempt.modal.skipQuestion.body",{questionTitle:n.createElement("strong",null,u)}))),n.createElement(c.AnalyticsDialogActions,{analyticsId:`${r}.actions`},n.createElement(c.AnalyticsDefaultButton,{analyticsId:`${r}.cancel.button`,onClick:s},o("assessments.attempt.modal.skipQuestion.cancel")),n.createElement(c.AnalyticsPrimaryButton,{analyticsId:`${r}.confirmation.button`,onClick:i},o("assessments.attempt.modal.skipQuestion.confirm"))))};class Us extends Ps{constructor(){super(...arguments),this.isMovingOn=!1,this.currentIsMarkedMovedOn=!1}replaceQuestionAttempts(e){var t;const s=null===(t=this.questionAttempts[this.questionAttempts.length-1])||void 0===t?void 0:t.id,n=e[0].id;this.initializeQuestionAttempts(e),s!==n&&this.onAfterAsyncViewAction((()=>{this.questionStatusesById={}}))}initializeQuestionAttempts(e){var t,s,n,i;this.questionAttempts=[],this.questionAttemptPages=[];const a=e[e.length-1],o=this.augmentCurrentQuestionAttempt(a,e.length-1,this.questionAttemptPages.length);this.totalPageCount=null!==(t=a.totalQuestionPages)&&void 0!==t?t:0,this.currentPageCount=null!==(s=a.visibleQuestionPage)&&void 0!==s?s:0,this.answerableQuestionCount=null!==(n=a.totalAnswerableQuestions)&&void 0!==n?n:0,this.unansweredQuestionCount=null!==(i=a.unansweredAnswerableQuestions)&&void 0!==i?i:0,this.questionAttempts.push(o),this.questionAttemptPages.push([o]),this.currentPageIndex=o.pageIndex,this.setCurrentVisibleQuestionAttemptsPage(),this.calculateNavigationState()}calculateNavigationState(){this.canNavigateBackward=!1,this.isLastPage()?this.canNavigateForward=!1:this.canNavigateForward=!0}navigateFirst(){throw new Error("Navigating to the first questions is not supported when prevent backtracking.")}navigatePrevious(){throw new Error("Navigating to the previous questions is not supported when prevent backtracking.")}async navigateNext(e){var t;if(!this.isMovingOn)if(this.currentPageHasUnsavedAnswers())this.queuedNavigation=Es.Next;else if(this.isAnswerable(this.currentQuestionAttempt)&&bs(this.currentQuestionAttempt)&&!e)this.showSkipQuestionDialog(null!==(t=this.currentQuestionAttempt.visibleQuestionNumber)&&void 0!==t?t:1);else try{this.isMovingOn=!0,this.currentIsMarkedMovedOn||(this.currentIsMarkedMovedOn=!!await this.markQuestionAttemptMovedOn()),await this.loadNextQuestion(),this.currentIsMarkedMovedOn=!1,this.onNavigationOrFilterChanged()}catch(e){this.onNextQuestionFetchFailure()}finally{this.isMovingOn=!1}}navigateLast(){throw new Error("Navigating to the last question is not supported when prevent backtracking.")}isLastPage(){return this.currentPageCount===this.totalPageCount}markQuestionAttemptMovedOn(){return this.dispatch(d.X.questionAttempt.markQuestionAttemptMovedOn(this.currentQuestionAttempt.id,this.courseId))}loadNextQuestion(){return this.dispatch(d.X.questionAttempt.loadQuestionAttemptsByAttemptId(this.attemptId,this.courseId))}isPageable(){return!0}isFilterable(){return!1}calculateUnansweredQuestionCount(){this.unansweredQuestionCount=this.currentQuestionAttempt.unansweredAnswerableQuestions}get currentQuestionAttempt(){return this.questionAttempts[this.questionAttempts.length-1]}}var Ws=s("kNOQ");const Ks=e=>{const{isOneQuestionAtATime:t,isPreventBacktracking:s,attemptId:i,courseId:a,onAfterInitializeQuestionAttemptView:o,onAfterAsyncViewAction:l,onBeforeQuestionAttemptsInitialized:c,onAfterQuestionAttemptsInitialized:u}=e,m=Object(r.d)(),[p,h]=n.useState(null),g=Object(r.e)((e=>d.gc.questionAttempt.getQuestionAttemptsByAttemptId(e,i))),[b,f]=n.useState({visible:!1,questionNumber:1}),{enqueueSnackbar:C,dequeueSnackbar:E}=Object(y.rb)(y.S.AssessmentQuestionFetchFailure),P=Object(Q.a)(),w=n.useCallback((e=>{f({visible:!0,questionNumber:e})}),[b]),I=n.useCallback((()=>{f({...b,visible:!1})}),[f]),S=n.useCallback((()=>{p&&(p.navigateNext(!0),I())}),[p,I]),k=Object(Ws.b)((()=>{E();const e={icon:n.createElement(v.Attention,null),snackbarMessage:P("global.tryAgain")};C(e)}));return n.useEffect((()=>{if(!(i&&o&&l&&a))return;if(p)return;let e;if(s)return e=new Us(i,a,m,w,l,k),o(e),void h(e);const n=null!=g?g:[],r=n.some(d.N.isPageBreak),c=n.every(d.N.isPageBreak);e=t||r&&!c?new Gs(i,a,m,w,l):new $s(i,a,m,w,l),o(e),h(e)}),[g,t,s,i,a,o,l,k,w,m]),n.useEffect((()=>{if(!p||(null!=g?g:[]).length<1)return;if(p instanceof Us){const e=g[g.length-1],t=c([e]);return p.replaceQuestionAttempts(t),void u(p)}const e=c([...g]);p.initializeQuestionAttempts(e),u(p)}),[g,p,c,u]),p?n.createElement(Vs,{analyticsId:"assessments.attempt",showConfirmationModal:b.visible,questionNumber:b.questionNumber,onCancel:I,onConfirmation:S}):null};s("IArP");var Xs=s("THXI"),Ys=s("QgAF");const Zs={padding:"8px 10px"},Js={lineHeight:1.2},en=Object(Le.makeStyles)((e=>Object(Le.createStyles)({correctOrFullCredit:{...Zs,backgroundColor:e.palette.success.light},incorrect:{...Zs,backgroundColor:e.palette.error.light},partialCredit:{...Zs,backgroundColor:Object(Ys.lighten)(Xs.d.yellow,.8)},lateAnswerResultDataWrapper:{...Js,marginBottom:"6px"},nonLateAnswerResultDataWrapper:{...Js,marginBottom:"0px"},latenessWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},latenessText:{fontStyle:"italic"},latenessIcon:{marginRight:"6px"},answerResultText:{fontWeight:e.typography.fontWeightBold,marginBottom:"4px"}})));var tn;!function(e){e.Correct="correct",e.Partial="partial",e.Incorrect="incorrect",e.FullCredit="full-credit"}(tn||(tn={}));const sn=e=>{const{answerResult:t,answerResultInfoContent:s,wasAnsweredLate:i,rootClassName:a}=e,o=en(),r=Object(Q.a)(),l=t&&s;if(!l&&!i)return null;let c;c=i||!t||tn.Partial===t?o.partialCredit:tn.Incorrect===t?o.incorrect:o.correctOrFullCredit;const u=i?o.lateAnswerResultDataWrapper:o.nonLateAnswerResultDataWrapper;return n.createElement("div",{className:Object(ft.a)(c,a)},l&&n.createElement("div",{className:u},n.createElement("div",{className:o.answerResultText},r((e=>tn.Correct===e?"components.directives.assessment-question.status.correct":tn.Incorrect===e?"components.directives.assessment-question.status.incorrect":tn.Partial===e?"components.directives.assessment-question.status.partial":"components.directives.assessment-question.status.full-credit")(t))),s),i&&n.createElement("div",{className:o.latenessWrapper},n.createElement(es.a,{className:o.latenessIcon}),n.createElement("div",{className:o.latenessText},r("components.directives.assessment-question.status.attention"))))},nn=({className:e,checked:t,disabled:s,onCheckedChanged:a,analyticsId:o})=>{const r=`${o}.input.checkbox`,l=Object(Q.a)(),u=Object(n.useCallback)((e=>{a(e.target.checked)}),[a]);return i.a.createElement(c.AnalyticsFormControlLabel,{analyticsId:r,label:l("assessmentSettings.randomizeQuestions"),htmlFor:"randomize-questions",className:e,control:i.a.createElement(c.AnalyticsCheckbox,{analyticsId:r,checked:t,disabled:s,onChange:u,id:"randomize-questions",inputProps:{"aria-describedby":"randomize-questions-description"}})})},an=Object(y.sb)((e=>({titleKey:e.titleKey,subTextKey:e.subtextKey,analyticsId:e.analyticsId})))((({assessmentId:e,checked:t,disabled:s,onCheckedChanged:a,openModal:o,analyticsId:l,className:u})=>{const m=`${l}.input.checkbox`,p=Object(Q.a)(),h=Object(r.d)(),g=Object(r.e)((t=>d.gc.question.getPageBreakQuestionsByAssessmentId(t,e))),b=Object(n.useCallback)((async e=>{if(!e.target.checked)return void a(!1);if(0===g.length)return void a(!0);const{confirmed:t}=await o();if(!t)return void a(!1);const s=await h(d.X.question.deleteQuestions(g));s.results&&Object.keys(s.results).every((e=>s.results[e].isOk))?a(!0):a(!1)}),[a,g,o,h]);return i.a.createElement(c.AnalyticsFormControlLabel,{analyticsId:m,label:p("assessmentSettings.displayOneAtATime"),htmlFor:"display-one-question-at-a-time",className:u,control:i.a.createElement(c.AnalyticsCheckbox,{checked:t,disabled:s,onChange:b,analyticsId:m,id:"display-one-question-at-a-time"})})}),$e),on=({className:e,checked:t,disabled:s,onCheckedChanged:a,analyticsId:o})=>{const r=`${o}.input.checkbox`,l=Object(Q.a)(),u=Object(n.useCallback)((e=>{a(e.target.checked)}),[a]);return i.a.createElement(c.AnalyticsFormControlLabel,{analyticsId:`${r}.label`,label:l("assessmentSettings.randomizePages"),htmlFor:"randomize-pages",className:e,control:i.a.createElement(c.AnalyticsCheckbox,{checked:t,disabled:s,onChange:u,analyticsId:r,id:"randomize-pages"})})},rn=({checked:e,disabled:t,onCheckedChanged:s,analyticsId:a})=>{const o=`${a}.input.checkbox`,r=Object(Q.a)(),l=Object(n.useCallback)((e=>{s(e.target.checked)}),[s]);return i.a.createElement(c.AnalyticsFormControlLabel,{analyticsId:`${o}.label`,label:r("assessmentSettings.keepFirstPageFirst"),htmlFor:"keep-first-page-first",control:i.a.createElement(c.AnalyticsCheckbox,{checked:e,disabled:t,onChange:l,analyticsId:o,id:"keep-first-page-first"})})};var ln=s("ZQFV");const cn=Object(Le.makeStyles)((e=>Object(Le.createStyles)({select:{padding:"10px"},root:{"& #attempt-selection":{display:"flex",justifyContent:"space-between",gap:"10px"},width:"100%"},item:{display:"flex",justifyContent:"space-between",padding:"10px"},labelContainer:{display:"flex",flexDirection:"column",marginRight:"10px"},label:{fontWeight:e.typography.fontWeightSemiBold},attemptDetailsContainer:{display:"flex",flexDirection:"column"},isLateSubmission:{color:e.palette.indicatorSecondary.main},submissionDateContainer:{whiteSpace:"pre-wrap"},submissionPostedContainer:{color:e.palette.success.main,fontStyle:"italic"}}))),un=e=>{const{analyticsId:t,attemptId:s,attemptOptions:n=[],onChange:a,pointsPossible:o,gradeSchema:r,autoFocus:l=!1}=e,u=cn(),d=Object(Q.a)(),m=n.find((({value:e})=>e===s))||n[0];return i.a.createElement(c.AnalyticsTextField,{analyticsId:`${t}.attempt-selection`,select:!0,id:"attempt-selection",label:d("components.directives.grade.grading-bar.attempt-selection.label"),"aria-label":d("components.directives.grade.grading-bar.attempt-selection.label"),floatingLabel:!0,value:null==m?void 0:m.value,onChange:e=>{var t;return a(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value)},SelectProps:{className:Object(ft.a)(u.select,"hide-focus-outline")},className:u.root,autoFocus:l},n.filter((e=>e.attemptStatus!==f.l.InProgress)).map((e=>i.a.createElement(c.AnalyticsMenuItem,{button:!0,analyticsId:`${t}.attempt-selection.option`,className:u.item,key:e.value,value:e.value},i.a.createElement(c.AnalyticsTypography,{component:"div",className:u.labelContainer},i.a.createElement("span",{className:u.label},e.label),i.a.createElement("span",{className:u.attemptDetailsContainer},e.postedDate&&i.a.createElement(c.AnalyticsTypography,{component:"span",className:Object(ft.a)(u.submissionPostedContainer),dangerouslySetInnerHTML:{__html:e.postedDate}}),i.a.createElement(c.AnalyticsTypography,{component:"span",className:Object(ft.a)(u.submissionDateContainer,e.isSubmissionLate&&u.isLateSubmission),dangerouslySetInnerHTML:{__html:e.submissionDate}}),i.a.createElement(c.AnalyticsTypography,{component:"span",dangerouslySetInnerHTML:{__html:e.submissionSize}}))),e.value!==m.value&&i.a.createElement(ln.I,{grade:e.isReadyToPost?e.grade:void 0,variant:ln.P.getGradePillType(null==r?void 0:r.scaleType),pointsPossible:o,symbolGrade:e.isReadyToPost?e.displayGrade:void 0})))))};un.defaultProps={attemptId:""};s("mZt7"),s("KLhW"),s("0Ljr"),s("hLhy"),s("YuUd"),s("I4tD");var dn=s("JAGG"),mn=s("Rco2");const pn=Object(Le.makeStyles)((e=>Object(Le.createStyles)({canvasDiv:{backgroundColor:e.palette.background.b6,paddingLeft:"20px",paddingRight:"20px",border:`1px solid ${e.palette.border.main}`,position:"relative",borderTop:"none"},spinner:{top:"50%",left:"50%",position:"absolute",marginLeft:"-19px",marginTop:"-19px"},hotspotKeyboardControlsWrapper:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",[e.breakpoints.up("sm")]:{justifyContent:"flex-end"}},tallImageInfoBanner:{border:`1px solid ${e.palette.border.main}`,borderBottom:"none"}})));var hn=s("ApVX"),gn=s("gnis"),bn=s("yJL7");const yn=Object(Le.makeStyles)((e=>Object(Le.createStyles)({primaryInstructionsText:{fontWeight:e.typography.fontWeightSemiBold},rightSectionContainer:{display:"flex"}})));var fn=s("o1iR"),vn=s("EBQB"),Cn=s("CD3w"),En=s("i9xO"),Pn=s("Zbp7");const wn=Object(Le.makeStyles)((()=>Object(Le.createStyles)({root:{marginRight:"12px",display:"flex",alignItems:"center"}}))),In=e=>{const t=wn();return i.a.createElement("div",{className:t.root},e.children)};var Sn=Object(n.memo)((e=>{const{addNewHotspotPin:t,deleteSelectedHotspotPins:s,hasActiveHotspotSelection:n}=e,a=Object(Q.a)(),o=yn(),r=Object(Le.useMediaQuery)(Object(Ns.t)().breakpoints.up("sm"));return i.a.createElement(i.a.Fragment,null,i.a.createElement(bn.a,null,i.a.createElement(Cn.a,null,i.a.createElement(vn.a,null,i.a.createElement("span",{className:o.primaryInstructionsText},a("assessments.canvas.question.hotspot.toolbar.addPin"))),i.a.createElement(fn.a,{icon:i.a.createElement(gn.a,{color:"primary"}),onClick:()=>t(),ariaLabel:a("assessments.canvas.question.hotspot.toolbar.addPin"),analyticsId:"assessments.canvas.question.hotspot.add.pin.button",controlInfoDescriptionLocaleKey:"assessments.canvas.question.hotspot.toolbar.keyboardCommandTooltip.addPin.description",controlInfoCommandLocaleKey:"assessments.canvas.question.hotspot.toolbar.keyboardCommandTooltip.addPin.command"})),i.a.createElement("div",{className:o.rightSectionContainer},r&&i.a.createElement(In,null,a("assessments.canvas.question.hotspot.toolbar.pinInstructions")),i.a.createElement(Pn.a,null,i.a.createElement(En.a,{onClick:()=>s(),disabled:!n,icon:hn.a,text:a("assessments.canvas.question.hotspot.toolbar.erasePin"),analyticsId:"assessments.canvas.question.hotspot.erase.pin.button"})))))})),kn=s("PxJx"),qn=s("3le2"),Qn=s("+1G9"),An=s("fN3Q");const xn=e=>{const{addPins:t,givenAnswers:s,shouldDrawPins:i}=e,[a,o]=Object(n.useState)(!1);Object(n.useEffect)((()=>{(async()=>{if(i&&!a){o(!0);const e=s.filter((e=>Boolean(e.coordinates)));e.length&&await t(e.map((e=>({hotspotPinId:Object(An.v4)(),coordinates:e.coordinates,isCorrectAnswer:Boolean(e.correctAnswer)}))))}})()}),[t,s,a,i])};var On,Nn,Tn=s("B/aE"),_n=s("YUDX"),Dn=s("rQEZ"),jn=s("6OL3"),Bn=s("031P"),Ln=s("ihlUh"),Mn=s.n(Ln),Fn=s("izYA"),Rn=s.n(Fn),zn=s("DiuX"),Hn=s.n(zn),$n=s("eYvb"),Gn=s.n($n),Vn=s("KDr4"),Un=s("vymd");(Nn=On||(On={}))[Nn.Pin=Mn.a]="Pin",Nn[Nn.PinDrag=Rn.a]="PinDrag",Nn[Nn.CorrectPin=Hn.a]="CorrectPin",Nn[Nn.IncorrectPin=Gn.a]="IncorrectPin";const Wn=Bn.fabric.util.createClass(Bn.fabric.Group,{type:Un.a.HotspotPin,primaryPin:Bn.fabric.Group,dragPin:Bn.fabric.Group,initialize(e,t,s,n){const i=[s,...n?[n]:[]];i.forEach((e=>{e.set({originX:"center",originY:"center"})}));const a={id:e,originX:"center",originY:"center",selectable:t,lockMovementX:!t,lockMovementY:!t,hasBorders:!1,hasControls:!1,hoverCursor:t?"move":"default"};this.callSuper("initialize",i,a),this.set("id",e),this.primaryPin=s,this.dragPin=n,this.showPrimaryPin(),this.registerHotspotPinEventHandlers(t)},toObject(){return Bn.fabric.util.object.extend(this.callSuper("toObject"),{id:this.get("id")})},registerHotspotPinEventHandlers(e){e&&this.dragPin&&(this.on("selected",(()=>{this.showDragPin()})),this.on("deselected",(()=>{this.showPrimaryPin()})))},resize(e){const t=Object(Vn.c)(this.width,e),s=Object(Vn.c)(this.height,e);this.set({scaleX:t/this.width,scaleY:s/this.height}),this.setCoords()},showPrimaryPin(){var e;this.primaryPin.set({visible:!0}),null===(e=this.dragPin)||void 0===e||e.set({visible:!1})},showDragPin(){var e;this.primaryPin.set({visible:!1}),null===(e=this.dragPin)||void 0===e||e.set({visible:!0})}}),Kn=e=>{const{pinId:t,pinIcon:s,pinDragIcon:n,isPinMovable:i,creationCallback:a}=e,o=(e,s)=>{const n=new Wn(t,i,e,s);a(n)};Bn.fabric.loadSVGFromString(s.toString(),(e=>{const t=Bn.fabric.util.groupSVGElements(e);i&&n?Bn.fabric.loadSVGFromString(n.toString(),(e=>{const s=Bn.fabric.util.groupSVGElements(e);o(t,s)})):o(t)}))},Xn=e=>Kn({...e,pinIcon:On.Pin,pinDragIcon:On.PinDrag});var Yn=s("Y8zf"),Zn=s("iD7+"),Jn=s("yX1G"),ei=s("E9Bh"),ti=s("cexh");const si="{unset}",ni=e=>{const{onHotspotImageLoaded:t,canvasBackgroundOptions:s,onUpdate:i}=e,a=Object(jn.a)(),{selectedObjectPositions:o,registerEvents:r}=Object(ei.b)(a),l=Object(jn.a)(),{requestUpdate:c}=Object(Yn.a)({onUpdate:i,values:a.values,refreshData:a.refreshMap,coordinateInfoMapper:Zn.b}),{canvas:u,nextHotspotObjectNumber:d,deleteSelectedHotspotObjects:m,...h}=Object(Dn.a)({mapManager:a,onHotspotImageLoaded:t,selectedObjectPositions:o,canvasBackgroundOptions:s,requestHotspotQuestionUpdate:c});Object(n.useEffect)((()=>{Object(Zn.c)({objects:l.sortedValues.map((e=>e.object))});const e=l.sortedValues.map((e=>e.label)).filter(p.identity);e.length&&Object(Zn.c)({objects:e,skipCount:l.count}),Object(Zn.c)({selectedObjectPositions:o,skipCount:e.length+l.count,objects:a.sortedValues.map((e=>e.object))})}),[l.count,l.sortedValues,a.sortedValues,o]),Object(n.useEffect)((()=>{if(!u)return;const e=u.getZoom();a.values.forEach((t=>{const{object:s}=t;s.resize(e)})),l.values.forEach((({object:t,label:s})=>{t.resize(e),s&&(s.resize(e),Object(Vn.h)(s,t))})),u.requestRenderAll()}),[u,null==u?void 0:u.height,null==u?void 0:u.width,l.values,a.values]);const g=Object(n.useCallback)(((e,t)=>{if(!u)return;let s;const n=u.getZoom();if(t)s=Object(ti.e)(t);else{const{width:e,height:t}=u.backgroundImage;s=Object(Vn.f)(e,t,n)}e.set(s),e.setCoords()}),[u]),b=Object(n.useCallback)((e=>{if(!u)return Promise.resolve({});const{coordinateInfo:t,readonly:s=!1,position:n=d,createPin:i=Xn}=null!=e?e:{},a=!t||t.hotspotPinId===si,o=a?Object(An.v4)():t.hotspotPinId;return new Promise((e=>{i({pinId:o,creationCallback:i=>{const l=u.getZoom(),d=[{name:ei.a.MOVING,handler:()=>{const{top:e,left:t}=i;i.set({top:Object(Vn.e)(e,u.height,l),left:Object(Vn.e)(t,u.width,l)}),i.setCoords()}},...s?[]:[{name:ei.a.MODIFIED,handler:c}]];r({events:d,object:i,position:n}),g(i,null==t?void 0:t.coordinates),u.add(i),!s&&a&&u.setActiveObject(i),e({position:n,object:i,id:o})},isPinMovable:!s})}))}),[u,d,g,r,c]),y=Object(n.useCallback)((async e=>{const t=e?await b({coordinateInfo:{hotspotPinId:si,coordinates:e}}):await b();a.add(t),c()}),[b,a,c]),f=Object(n.useCallback)((async e=>{const{coordinateInfos:t=[],makeCreationCallback:s,readonly:n}=null!=e?e:{},i=await Promise.all(t.map(((e,t)=>b({readonly:n,coordinateInfo:e,position:t+1,createPin:null==s?void 0:s(t)}))));a.addMultiple(i),c()}),[b,a,c]),v=Object(n.useCallback)((async e=>await f({coordinateInfos:e})),[f]),C=Object(n.useCallback)((async e=>await f({coordinateInfos:e,readonly:!0})),[f]),E=Object(n.useCallback)((async e=>await f({coordinateInfos:e,readonly:!0,makeCreationCallback:t=>s=>(e=>Kn({...e,pinIcon:e.isCorrectAnswer?On.CorrectPin:On.IncorrectPin}))({...s,isCorrectAnswer:e[t].isCorrectAnswer})})),[f]);Object(n.useEffect)((()=>{const e=async e=>{if(u&&!(null==u?void 0:u.getActiveObjects().length)){const t=Object(ti.a)([Object(Vn.c)(e.pointer.x,u.getZoom()),Object(Vn.c)(e.pointer.y,u.getZoom())]);await y(t)}};return i&&(null==u||u.on("mouse:up",e)),()=>{i&&(null==u||u.off("mouse:up",e))}}),[y,u,i]);const P=Object(n.useCallback)((e=>{const t=a.getByPosition(o[0]);if(!u||!t||1!==o.length)return;const{object:s}=t,{top:n,left:i}=s,{top:r,left:l}=e,d={},m=u.getZoom();r&&Number.isFinite(r)&&(d.top=Object(Vn.e)(n+r,u.height,m)),l&&Number.isFinite(l)&&(d.left=Object(Vn.e)(i+l,u.width,m)),s.set({...d}),s.setCoords(),s.saveState(),u.requestRenderAll(),c()}),[u,a,c,o]),{addReadonlyHotspots:w}=Object(Jn.a)({canvas:u,mapManager:l});return{...h,modifyPin:P,addNewHotspotPin:y,deleteSelectedPins:m,addReadonlyHotspots:w,addReadonlyHotspotPins:C,addExistingHotspotPins:v,addCorrectnessHotspotPins:E}};var ii=s("lqgZ");const ai=[{items:["components.directives.assessment-question.hotspot.student-attempt-keyboard-info.content.tab","components.directives.assessment-question.hotspot.student-attempt-keyboard-info.content.move","components.directives.assessment-question.hotspot.student-attempt-keyboard-info.content.precision","components.directives.assessment-question.hotspot.student-attempt-keyboard-info.content.delete"]}],oi=e=>{const{question:t,givenAnswers:s,onAnswerChange:a}=e,o=Object(Q.a)(),r=Object(Ns.t)(),l=Object(n.useRef)(null),u=pn(r),[d,m]=Object(n.useState)(!1),[p,h]=Object(n.useState)(!1),g=Object(n.useCallback)((()=>{m(!0)}),[]),b=Object(n.useCallback)((e=>{var t;const n=e.map((e=>({coordinates:e.coordinates})));Object(qn.d)({canvasWrapper:null==l?void 0:l.current,answers:s,coordinates:e})&&(null===(t=l.current)||void 0===t||t.focus()),a(n)}),[a,s]),y=Object(n.useMemo)((()=>Object(ii.a)(t,r)),[t,r]),{onReady:f,modifyPin:C,onResizeCanvas:E,addNewHotspotPin:P,deleteSelectedPins:w,addReadonlyHotspots:I,addExistingHotspotPins:S,activateNextHotspotObject:k,activateLastHotspotObject:q,activateFirstHotspotObject:A,hasActiveHotspotObjSelection:x}=ni({canvasBackgroundOptions:y,onHotspotImageLoaded:g,onUpdate:b});Object(Qn.a)({answers:t.answers||[],addHotspots:I,shouldDrawHotspots:d&&t.displayShapesToStudents}),xn({addPins:S,givenAnswers:s||[],shouldDrawPins:d});const{handleCanvasFocus:O,handleCanvasKeydown:N}=Object(Tn.a)({addNewHotspotPin:P,activateNextHotspotObject:k,activateLastHotspotObject:q,activateFirstHotspotObject:A,modifyHotspotObject:C,getArrowKeyChanges:_n.b,deleteSelectedHotspotObjects:w});return Object(n.useEffect)((()=>{const e=new ResizeObserver((e=>{var t,s;h((null===(s=null===(t=e[0])||void 0===t?void 0:t.contentRect)||void 0===s?void 0:s.height)>qn.a)}));return(null==l?void 0:l.current)&&e.observe(l.current),()=>e.disconnect()}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:u.hotspotKeyboardControlsWrapper},i.a.createElement(kn.a,{infoLocaleKeys:ai,analyticsIdPrefix:"assessments.canvas.question.hotspot.attempt"})),d&&i.a.createElement(Sn,{addNewHotspotPin:P,hasActiveHotspotSelection:x,deleteSelectedHotspotPins:w}),p&&i.a.createElement(Jt.a,{severity:"info",icon:i.a.createElement(v.Information,null),classes:{root:u.tallImageInfoBanner}},o("components.directives.assessment-question.hotspot.tall-image-info-banner.content")),i.a.createElement("div",{ref:l,className:Object(ft.a)(u.canvasDiv,"no-outline"),tabIndex:0,role:"region","aria-label":o("assessments.canvas.question.hotspot.canvasAriaLabel"),onKeyDown:N,onFocus:O,"data-testid":"canvas-wrapper"},i.a.createElement(mn.a,{onResizeCanvas:E,onReady:f}),!d&&i.a.createElement("div",{className:u.spinner},i.a.createElement(c.AnalyticsCircularProgress,{ariaLabel:o("assessments.canvas.question.hotspot.image.loading"),size:"medium"}))))},ri=e=>{const{question:t,givenAnswers:s,isCorrectAnswersVisible:a}=e,o=Object(Q.a)(),r=Object(Ns.t)(),l=pn(r),[u,d]=Object(n.useState)(!1),m=Object(ii.a)(t,r),{onReady:p,onResizeCanvas:h,addReadonlyHotspots:g,addReadonlyHotspotPins:b,addCorrectnessHotspotPins:y}=ni({onHotspotImageLoaded:()=>d(!0),canvasBackgroundOptions:m});return Object(Qn.a)({shouldDrawHotspots:u&&(a||t.displayShapesToStudents),answers:t.answers||[],addHotspots:g,shouldDrawLabels:a}),xn({givenAnswers:s||[],shouldDrawPins:u,addPins:a?y:b}),i.a.createElement("div",null,i.a.createElement("div",{className:l.canvasDiv},i.a.createElement(mn.a,{onResizeCanvas:h,onReady:p}),!u&&i.a.createElement("div",{className:l.spinner},i.a.createElement(c.AnalyticsCircularProgress,{ariaLabel:o("assessments.canvas.question.hotspot.image.loading"),size:"medium"}))))};s.d(t,"E",(function(){return Bt})),s.d(t,"a",(function(){return Xt})),s.d(t,"b",(function(){return ut.a})),s.d(t,"i",(function(){return It.b})),s.d(t,"j",(function(){return J.a})),s.d(t,"G",(function(){return Yt.a})),s.d(t,"B",(function(){return Zt.a})),s.d(t,"u",(function(){return Ct.a})),s.d(t,"v",(function(){return Ct.b})),s.d(t,"r",(function(){return ss})),s.d(t,"t",(function(){return is})),s.d(t,"s",(function(){return os})),s.d(t,"F",(function(){return rs})),s.d(t,"g",(function(){return us})),s.d(t,"p",(function(){return ms})),s.d(t,"f",(function(){return hs})),s.d(t,"c",(function(){return qs})),s.d(t,"e",(function(){return Rs})),s.d(t,"q",(function(){return Hs})),s.d(t,"w",(function(){return Es})),s.d(t,"A",(function(){return Cs})),s.d(t,"d",(function(){return Ks})),s.d(t,"y",(function(){return tn})),s.d(t,"z",(function(){return sn})),s.d(t,"D",(function(){return nn})),s.d(t,"x",(function(){return an})),s.d(t,"C",(function(){return on})),s.d(t,"o",(function(){return rn})),s.d(t,"h",(function(){return un})),s.d(t,"l",(function(){return dn.a})),s.d(t,"m",(function(){return oi})),s.d(t,"n",(function(){return ri})),s.d(t,"k",(function(){return Je.b}));const li=/setLang=([^$&]+)/;function ci(e,t,s,n,a,r){var c;let u=s;if(null==s&&"undefined"!=typeof window&&li.test(window.location.search)){u=(null!==(c=window.location.search.match(li))&&void 0!==c?c:[])[1]}o.a.render(i.a.createElement(l.a,{locale:u,babelfishInstance:n,babelfishFormatInstance:a,bundlesToLoad:["assessments/locales/[locale]/assessment-canvas.json"],isRtl:r},i.a.createElement("div",{className:"assessments-app"},e)),t)}const ui={renderAssessmentPanel:(e,{store:t,locale:s,babelfishInstance:n,babelfishFormatInstance:a,isRtl:o},{courseId:l,contentId:u,features:d,routes:m,setIsAnyQuestionDirty:h=(()=>{}),isOrganization:g,allyService:b,editorPluginsConfig:y={},applyAccessibilityHandling:f,revertAccessibilityHandling:v,usePanelHeightOffset:C})=>{Object.keys(d).forEach((e=>{!function(e,t){if(!Object(p.isString)(e)||!Object(p.isBoolean)(t))throw new Error("Toggle name must be String type, toggle value must be Boolean type");Lt.set(e,t)}(e,d[e])}));const E=g?"assessments.organization":"assessments";ci(i.a.createElement(r.a,{store:t},i.a.createElement(c.AnalyticsJssThemeProvider,{theme:"light",isRtl:o},i.a.createElement(de,{usePanelHeightOffset:C},i.a.createElement(mt,{babelfishInstance:n,contentId:u,courseId:l,features:d,routes:m,editorPluginsConfig:y,setIsAnyQuestionDirty:h,applyAccessibilityHandling:f,revertAccessibilityHandling:v,localizationPrefix:E,allyService:b})))),e,s,n,a,o)},renderAssessmentSettings:(e,{store:t,locale:s,babelfishInstance:n,babelfishFormatInstance:a,isRtl:o},{courseId:l,contentId:u,routes:d,isOrganization:m})=>{const p=m?"assessments.organization":"assessments";ci(i.a.createElement(r.a,{store:t},i.a.createElement(c.AnalyticsJssThemeProvider,{theme:"light",isRtl:o},i.a.createElement(ct,{courseId:l,contentId:u,routes:d,localizationPrefix:p}))),e,s,n,a,o)},renderQuestion:(e,t,s,n,a,u,d,m,p)=>{const h=m?"assessments.organization":"assessments";o.a.render(i.a.createElement(r.a,{store:t},i.a.createElement(l.a,{locale:s,babelfishInstance:n,babelfishFormatInstance:a,isRtl:u},i.a.createElement(c.AnalyticsJssThemeProvider,{theme:"light",isRtl:u},i.a.createElement(k.b,{...d,localizationPrefix:h})))),e,p||null)},destroyReactControl:e=>{o.a.unmountComponentAtNode(e)}};t.H=ui},XeZT:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 200 200" style="enable-background:new 0 0 200 200" xml:space="preserve"><circle style="fill:#e3f4fc" cx="99.5" cy="99.5" r="99.5"/><path style="fill:#d2edfa" d="M51.74 40.724h95.52v117.282H51.74z"/><path style="fill:#fff" d="M51.74 38.606h95.52v115.42H51.74z"/><path style="fill:#d2edfa" d="M93.928 75.222h42.188v2.388H93.928zM93.928 80.794h42.188v2.388H93.928zM93.928 86.366h20.696v2.388H93.928z"/><path style="fill:#c26fd2" d="m57.61 97.358 2.165-8.013-8.023 2.13z"/><path style="fill:#d2edfa" d="M79.6 77.61v14.328H65.272V77.61H79.6m2.388-2.388H62.884v19.104h19.104V75.222z"/><text transform="translate(93.928 30.646)" style="fill:#a8bfcc;font-family:\'OpenSans-Semibold\';font-size:23.3456">Abc</text><path style="fill:#d2edfa" d="M62.884 49.75h73.232v14.328H62.884zM133.728 107.858v30.248H65.272v-30.248h68.456m2.388-2.388H62.884v35.024h73.232V105.47zM86.764 75.222h2.388v2.388h-2.388zM86.764 80.794h2.388v2.388h-2.388zM86.764 86.366h2.388v2.388h-2.388z"/><path style="fill:#aec6d6" d="M34.394 118.206h35.024v2.388H34.394zM34.394 124.574h34.228v2.388H34.394zM34.394 130.942h34.228v2.388H34.394zM34.394 137.31h19.9v2.388h-19.9z"/><path style="fill:#c7bcac" d="M142.447 110.126h-.001"/><defs><path id="a" d="M100.296 132.534h30.248v29.452h-30.248z"/></defs><clipPath id="b"><use xlink:href="#a" style="overflow:visible"/></clipPath><g style="clip-path:url(#b)"><path style="fill:#36d7fb" d="M129.748 162.782h-28.656a1.592 1.592 0 0 1-1.592-1.592v-27.86c0-.879.713-1.592 1.592-1.592h28.656c.879 0 1.592.713 1.592 1.592v27.86c0 .879-.713 1.592-1.592 1.592z"/><circle style="fill:#fee132" cx="120.668" cy="147.315" r="2.841"/><path style="fill:#fefa78" d="M120.669 145.611c.94.001 1.704.766 1.704 1.706s-.766 1.704-1.706 1.704a1.708 1.708 0 0 1-1.704-1.706 1.706 1.706 0 0 1 1.706-1.704m.001-1.137a2.841 2.841 0 1 0-.004 5.682 2.841 2.841 0 0 0 .004-5.682z"/><g style="opacity:.2"><path style="fill:#303030" d="m131.308 160.029.002-4.233-5.679-5.686-5.686 5.679-10.222-10.235-10.236 11.358-.001 3.096"/></g><g><path style="fill:#44e17d" d="m119.975 158.238-10.222-10.235-10.236 11.358-.001 1.817a1.596 1.596 0 0 0 1.591 1.593l27.957.018a2.278 2.278 0 0 0 2.274-2.271l.001-2.273-5.679-5.686-5.685 5.679z"/><path style="fill:#82fa7d" d="m109.812 150.315 9.036 9.048 1.125 1.126 1.126-1.125 4.56-4.554 4.088 4.093-.002 2.295-28.638-.019.001-1.207 8.704-9.657m-.059-2.313L99.517 159.36l-.001 1.818a1.596 1.596 0 0 0 1.591 1.593l28.638.019h.001c.875 0 1.591-.716 1.592-1.591l.002-2.954-5.679-5.686-5.686 5.679-10.222-10.236z"/></g></g><path style="fill:#d2edfa" d="M129.748 161.209v1.573h-28.656v-1.573H99.5v1.573c0 .879.713 1.592 1.592 1.592h28.656c.879 0 1.592-.713 1.592-1.592v-1.573h-1.592z"/><path style="fill:#fff" d="M129.748 133.33v27.86h-28.656v-27.86h28.656m0-1.592h-28.656c-.879 0-1.592.713-1.592 1.592v27.86c0 .879.713 1.592 1.592 1.592h28.656c.879 0 1.592-.713 1.592-1.592v-27.86c0-.879-.713-1.592-1.592-1.592z"/><path style="fill:none;stroke:#c26fd2;stroke-width:2.388;stroke-linecap:round;stroke-miterlimit:10" d="M96.515 147.26c-6.924 0-12.537-5.613-12.537-12.537s5.613-12.537 12.537-12.537"/><path style="fill:#c26fd2" d="m97.088 126.308 7.188-4.15-7.188-4.151z"/><g><path style="fill:#c26fd2" d="m68.671 53.292 4.151 7.188 4.151-7.188z"/></g><path style="fill:none;stroke:#c26fd2;stroke-width:2.388;stroke-linecap:round;stroke-miterlimit:10" d="M72.734 54.526V31.84c0-6.1 4.945-11.045 11.045-11.045h7.363M35.289 113.695l19.37-19.369"/><g><path transform="rotate(45.001 143.22 93.124)" style="fill:#fec34c" d="M139.218 70.125h8v46h-8z"/><path transform="rotate(45.001 148.877 98.78)" style="fill:#fcb73d" d="M144.875 75.782h8v46h-8z"/><path transform="rotate(45.001 164.433 78.981)" style="fill:#d5d5d5" d="M157.431 76.983h14v4h-14z"/><path transform="rotate(45.001 160.897 75.446)" style="fill:#e8e8e8" d="M156.896 73.447h8v4h-8z"/><path style="fill:#fc5d92" d="m170.795 82.518-11.314-11.314 2.885-2.885a7.92 7.92 0 0 1 11.201 0l.113.113a7.92 7.92 0 0 1 0 11.201l-2.885 2.885z"/><path style="fill:#fcd3a6" d="m118.469 123.531 5.657-16.971 11.314 11.314z"/><path style="fill:#fcd3a6" d="M124.126 106.56h3.771v3.771h3.772v3.772h3.771v3.771"/><path style="opacity:.1" d="m173.68 68.433-.057-.057-8.485 8.485 5.657 5.657 2.885-2.885a7.92 7.92 0 0 0 0-11.2z"/><path style="fill:#767676" d="m120.237 118.227-1.768 5.304 5.304-1.768z"/></g></svg>'},eYvb:function(e,t){e.exports='<svg width="38" height="38" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="19" cy="19" r="18" fill="#C23E37" stroke="#fff" stroke-width="2"/><path d="M27 11 11 27M11 11l16 16" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>\n'},ihlUh:function(e,t){e.exports='<svg width="38" height="38" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="19" cy="19" r="18" fill="#046BF1" stroke="#fff" stroke-width="2"/><path d="M15.675 11 11 15.675l5.454 5.455 4.676-4.675L15.675 11ZM16.455 21.13l.78 5.455 9.35-9.35-5.454-.78M22.429 22.429 27 27" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>'},izYA:function(e,t){e.exports='<svg width="48" height="48" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="23" stroke="#046bf1" stroke-width="2" stroke-linecap="round" stroke-dasharray="4 6" /><circle cx="24" cy="24" r="18" fill="#fff" stroke="#046bf1" stroke-width="2" /><path d="M20.675 16 16 20.675l5.454 5.455 4.676-4.675L20.675 16ZM21.455 26.13l.78 5.455 9.35-9.35-5.454-.78M27.429 27.429 32 32" stroke="#046bf1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></svg>'}}]);